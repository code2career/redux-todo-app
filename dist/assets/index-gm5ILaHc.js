(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function Oy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fh={exports:{}},ga={},Uh={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function eE(){if(Wm)return Ce;Wm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function I(b){return b===null||typeof b!="object"?null:(b=E&&b[E]||b["@@iterator"],typeof b=="function"?b:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,$={};function M(b,K,de){this.props=b,this.context=K,this.refs=$,this.updater=de||N}M.prototype.isReactComponent={},M.prototype.setState=function(b,K){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,K,"setState")},M.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function Z(){}Z.prototype=M.prototype;function ee(b,K,de){this.props=b,this.context=K,this.refs=$,this.updater=de||N}var G=ee.prototype=new Z;G.constructor=ee,F(G,M.prototype),G.isPureReactComponent=!0;var W=Array.isArray,ce=Object.prototype.hasOwnProperty,ne={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function S(b,K,de){var Te,Ie={},xe=null,Le=null;if(K!=null)for(Te in K.ref!==void 0&&(Le=K.ref),K.key!==void 0&&(xe=""+K.key),K)ce.call(K,Te)&&!R.hasOwnProperty(Te)&&(Ie[Te]=K[Te]);var Me=arguments.length-2;if(Me===1)Ie.children=de;else if(1<Me){for(var Be=Array(Me),mt=0;mt<Me;mt++)Be[mt]=arguments[mt+2];Ie.children=Be}if(b&&b.defaultProps)for(Te in Me=b.defaultProps,Me)Ie[Te]===void 0&&(Ie[Te]=Me[Te]);return{$$typeof:r,type:b,key:xe,ref:Le,props:Ie,_owner:ne.current}}function A(b,K){return{$$typeof:r,type:b.type,key:K,ref:b.ref,props:b.props,_owner:b._owner}}function P(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function D(b){var K={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(de){return K[de]})}var O=/\/+/g;function k(b,K){return typeof b=="object"&&b!==null&&b.key!=null?D(""+b.key):K.toString(36)}function et(b,K,de,Te,Ie){var xe=typeof b;(xe==="undefined"||xe==="boolean")&&(b=null);var Le=!1;if(b===null)Le=!0;else switch(xe){case"string":case"number":Le=!0;break;case"object":switch(b.$$typeof){case r:case e:Le=!0}}if(Le)return Le=b,Ie=Ie(Le),b=Te===""?"."+k(Le,0):Te,W(Ie)?(de="",b!=null&&(de=b.replace(O,"$&/")+"/"),et(Ie,K,de,"",function(mt){return mt})):Ie!=null&&(P(Ie)&&(Ie=A(Ie,de+(!Ie.key||Le&&Le.key===Ie.key?"":(""+Ie.key).replace(O,"$&/")+"/")+b)),K.push(Ie)),1;if(Le=0,Te=Te===""?".":Te+":",W(b))for(var Me=0;Me<b.length;Me++){xe=b[Me];var Be=Te+k(xe,Me);Le+=et(xe,K,de,Be,Ie)}else if(Be=I(b),typeof Be=="function")for(b=Be.call(b),Me=0;!(xe=b.next()).done;)xe=xe.value,Be=Te+k(xe,Me++),Le+=et(xe,K,de,Be,Ie);else if(xe==="object")throw K=String(b),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Le}function xt(b,K,de){if(b==null)return b;var Te=[],Ie=0;return et(b,Te,"","",function(xe){return K.call(de,xe,Ie++)}),Te}function Nt(b){if(b._status===-1){var K=b._result;K=K(),K.then(function(de){(b._status===0||b._status===-1)&&(b._status=1,b._result=de)},function(de){(b._status===0||b._status===-1)&&(b._status=2,b._result=de)}),b._status===-1&&(b._status=0,b._result=K)}if(b._status===1)return b._result.default;throw b._result}var ze={current:null},re={transition:null},me={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:re,ReactCurrentOwner:ne};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:xt,forEach:function(b,K,de){xt(b,function(){K.apply(this,arguments)},de)},count:function(b){var K=0;return xt(b,function(){K++}),K},toArray:function(b){return xt(b,function(K){return K})||[]},only:function(b){if(!P(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ce.Component=M,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=ee,Ce.StrictMode=s,Ce.Suspense=g,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.act=se,Ce.cloneElement=function(b,K,de){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Te=F({},b.props),Ie=b.key,xe=b.ref,Le=b._owner;if(K!=null){if(K.ref!==void 0&&(xe=K.ref,Le=ne.current),K.key!==void 0&&(Ie=""+K.key),b.type&&b.type.defaultProps)var Me=b.type.defaultProps;for(Be in K)ce.call(K,Be)&&!R.hasOwnProperty(Be)&&(Te[Be]=K[Be]===void 0&&Me!==void 0?Me[Be]:K[Be])}var Be=arguments.length-2;if(Be===1)Te.children=de;else if(1<Be){Me=Array(Be);for(var mt=0;mt<Be;mt++)Me[mt]=arguments[mt+2];Te.children=Me}return{$$typeof:r,type:b.type,key:Ie,ref:xe,props:Te,_owner:Le}},Ce.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:u,_context:b},b.Consumer=b},Ce.createElement=S,Ce.createFactory=function(b){var K=S.bind(null,b);return K.type=b,K},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(b){return{$$typeof:d,render:b}},Ce.isValidElement=P,Ce.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:Nt}},Ce.memo=function(b,K){return{$$typeof:y,type:b,compare:K===void 0?null:K}},Ce.startTransition=function(b){var K=re.transition;re.transition={};try{b()}finally{re.transition=K}},Ce.unstable_act=se,Ce.useCallback=function(b,K){return ze.current.useCallback(b,K)},Ce.useContext=function(b){return ze.current.useContext(b)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(b){return ze.current.useDeferredValue(b)},Ce.useEffect=function(b,K){return ze.current.useEffect(b,K)},Ce.useId=function(){return ze.current.useId()},Ce.useImperativeHandle=function(b,K,de){return ze.current.useImperativeHandle(b,K,de)},Ce.useInsertionEffect=function(b,K){return ze.current.useInsertionEffect(b,K)},Ce.useLayoutEffect=function(b,K){return ze.current.useLayoutEffect(b,K)},Ce.useMemo=function(b,K){return ze.current.useMemo(b,K)},Ce.useReducer=function(b,K,de){return ze.current.useReducer(b,K,de)},Ce.useRef=function(b){return ze.current.useRef(b)},Ce.useState=function(b){return ze.current.useState(b)},Ce.useSyncExternalStore=function(b,K,de){return ze.current.useSyncExternalStore(b,K,de)},Ce.useTransition=function(){return ze.current.useTransition()},Ce.version="18.3.1",Ce}var Hm;function Hl(){return Hm||(Hm=1,Uh.exports=eE()),Uh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km;function tE(){if(Km)return ga;Km=1;var r=Hl(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(d,g,y){var v,E={},I=null,N=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(N=g.ref);for(v in g)s.call(g,v)&&!u.hasOwnProperty(v)&&(E[v]=g[v]);if(d&&d.defaultProps)for(v in g=d.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:d,key:I,ref:N,props:E,_owner:o.current}}return ga.Fragment=t,ga.jsx=h,ga.jsxs=h,ga}var qm;function nE(){return qm||(qm=1,Fh.exports=tE()),Fh.exports}var Se=nE(),sl={},zh={exports:{}},Zt={},jh={exports:{}},Bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function rE(){return Gm||(Gm=1,function(r){function e(re,me){var se=re.length;re.push(me);e:for(;0<se;){var b=se-1>>>1,K=re[b];if(0<o(K,me))re[b]=me,re[se]=K,se=b;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var me=re[0],se=re.pop();if(se!==me){re[0]=se;e:for(var b=0,K=re.length,de=K>>>1;b<de;){var Te=2*(b+1)-1,Ie=re[Te],xe=Te+1,Le=re[xe];if(0>o(Ie,se))xe<K&&0>o(Le,Ie)?(re[b]=Le,re[xe]=se,b=xe):(re[b]=Ie,re[Te]=se,b=Te);else if(xe<K&&0>o(Le,se))re[b]=Le,re[xe]=se,b=xe;else break e}}return me}function o(re,me){var se=re.sortIndex-me.sortIndex;return se!==0?se:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var g=[],y=[],v=1,E=null,I=3,N=!1,F=!1,$=!1,M=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(re){for(var me=t(y);me!==null;){if(me.callback===null)s(y);else if(me.startTime<=re)s(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(y)}}function W(re){if($=!1,G(re),!F)if(t(g)!==null)F=!0,Nt(ce);else{var me=t(y);me!==null&&ze(W,me.startTime-re)}}function ce(re,me){F=!1,$&&($=!1,Z(S),S=-1),N=!0;var se=I;try{for(G(me),E=t(g);E!==null&&(!(E.expirationTime>me)||re&&!D());){var b=E.callback;if(typeof b=="function"){E.callback=null,I=E.priorityLevel;var K=b(E.expirationTime<=me);me=r.unstable_now(),typeof K=="function"?E.callback=K:E===t(g)&&s(g),G(me)}else s(g);E=t(g)}if(E!==null)var de=!0;else{var Te=t(y);Te!==null&&ze(W,Te.startTime-me),de=!1}return de}finally{E=null,I=se,N=!1}}var ne=!1,R=null,S=-1,A=5,P=-1;function D(){return!(r.unstable_now()-P<A)}function O(){if(R!==null){var re=r.unstable_now();P=re;var me=!0;try{me=R(!0,re)}finally{me?k():(ne=!1,R=null)}}else ne=!1}var k;if(typeof ee=="function")k=function(){ee(O)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,xt=et.port2;et.port1.onmessage=O,k=function(){xt.postMessage(null)}}else k=function(){M(O,0)};function Nt(re){R=re,ne||(ne=!0,k())}function ze(re,me){S=M(function(){re(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){F||N||(F=!0,Nt(ce))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(re){switch(I){case 1:case 2:case 3:var me=3;break;default:me=I}var se=I;I=me;try{return re()}finally{I=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=I;I=re;try{return me()}finally{I=se}},r.unstable_scheduleCallback=function(re,me,se){var b=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?b+se:b):se=b,re){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,re={id:v++,callback:me,priorityLevel:re,startTime:se,expirationTime:K,sortIndex:-1},se>b?(re.sortIndex=se,e(y,re),t(g)===null&&re===t(y)&&($?(Z(S),S=-1):$=!0,ze(W,se-b))):(re.sortIndex=K,e(g,re),F||N||(F=!0,Nt(ce))),re},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(re){var me=I;return function(){var se=I;I=me;try{return re.apply(this,arguments)}finally{I=se}}}}(Bh)),Bh}var Qm;function iE(){return Qm||(Qm=1,jh.exports=rE()),jh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function sE(){if(Xm)return Zt;Xm=1;var r=Hl(),e=iE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function I(n){return g.call(E,n)?!0:g.call(v,n)?!1:y.test(n)?E[n]=!0:(v[n]=!0,!1)}function N(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function F(n,i,a,c){if(i===null||typeof i>"u"||N(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,f,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];M[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function ee(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(Z,ee);M[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(Z,ee);M[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(Z,ee);M[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function G(n,i,a,c){var f=M.hasOwnProperty(i)?M[i]:null;(f!==null?f.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(F(i,a,f,c)&&(a=null),c||f===null?I(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var W=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),ne=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),re=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,b;function K(n){if(b===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);b=i&&i[1]||""}return`
`+b+n}var de=!1;function Te(n,i){if(!n||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(j){var c=j}Reflect.construct(n,[],i)}else{try{i.call()}catch(j){c=j}n.call(i.prototype)}else{try{throw Error()}catch(j){c=j}n()}}catch(j){if(j&&c&&typeof j.stack=="string"){for(var f=j.stack.split(`
`),m=c.stack.split(`
`),w=f.length-1,C=m.length-1;1<=w&&0<=C&&f[w]!==m[C];)C--;for(;1<=w&&0<=C;w--,C--)if(f[w]!==m[C]){if(w!==1||C!==1)do if(w--,C--,0>C||f[w]!==m[C]){var x=`
`+f[w].replace(" at new "," at ");return n.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",n.displayName)),x}while(1<=w&&0<=C);break}}}finally{de=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Ie(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Te(n.type,!1),n;case 11:return n=Te(n.type.render,!1),n;case 1:return n=Te(n.type,!0),n;default:return""}}function xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case ne:return"Portal";case A:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case et:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xt:return i=n.displayName||null,i!==null?i:xe(n.type)||"Memo";case Nt:i=n._payload,n=n._init;try{return xe(n(i))}catch{}}return null}function Le(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Me(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function mt(n){var i=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function rr(n){n._valueTracker||(n._valueTracker=mt(n))}function rs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Pr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function di(n,i){var a=i.checked;return se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function is(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Me(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function To(n,i){i=i.checked,i!=null&&G(n,"checked",i,!1)}function So(n,i){To(n,i);var a=Me(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ss(n,i.type,a):i.hasOwnProperty("defaultValue")&&ss(n,i.type,Me(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Wa(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ss(n,i,a){(i!=="number"||Pr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ir=Array.isArray;function sr(n,i,a,c){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Me(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Io(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function os(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ir(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Me(a)}}function as(n,i){var a=Me(i.value),c=Me(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Co(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ut(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ut(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var or,Ao=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,f)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(or=or||document.createElement("div"),or.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=or.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function xr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mi=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(n){mi.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),pi[i]=pi[n]})});function ko(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||pi.hasOwnProperty(n)&&pi[n]?(""+i).trim():i+"px"}function Ro(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=ko(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var Po=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xo(n,i){if(i){if(Po[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function No(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gi=null;function us(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ls=null,cn=null,zn=null;function cs(n){if(n=ta(n)){if(typeof ls!="function")throw Error(t(280));var i=n.stateNode;i&&(i=wu(i),ls(n.stateNode,n.type,i))}}function jn(n){cn?zn?zn.push(n):zn=[n]:cn=n}function Do(){if(cn){var n=cn,i=zn;if(zn=cn=null,cs(n),i)for(n=0;n<i.length;n++)cs(i[n])}}function yi(n,i){return n(i)}function Vo(){}var ar=!1;function Oo(n,i,a){if(ar)return n(i,a);ar=!0;try{return yi(n,i,a)}finally{ar=!1,(cn!==null||zn!==null)&&(Vo(),Do())}}function tt(n,i){var a=n.stateNode;if(a===null)return null;var c=wu(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var hs=!1;if(d)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){hs=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{hs=!1}function _i(n,i,a,c,f,m,w,C,x){var j=Array.prototype.slice.call(arguments,3);try{i.apply(a,j)}catch(X){this.onError(X)}}var vi=!1,fs=null,Sn=!1,bo=null,fc={onError:function(n){vi=!0,fs=n}};function ds(n,i,a,c,f,m,w,C,x){vi=!1,fs=null,_i.apply(fc,arguments)}function Ha(n,i,a,c,f,m,w,C,x){if(ds.apply(this,arguments),vi){if(vi){var j=fs;vi=!1,fs=null}else throw Error(t(198));Sn||(Sn=!0,bo=j)}}function In(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function wi(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Cn(n){if(In(n)!==n)throw Error(t(188))}function Ka(n){var i=n.alternate;if(!i){if(i=In(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return Cn(f),n;if(m===c)return Cn(f),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=m;else{for(var w=!1,C=f.child;C;){if(C===a){w=!0,a=f,c=m;break}if(C===c){w=!0,c=f,a=m;break}C=C.sibling}if(!w){for(C=m.child;C;){if(C===a){w=!0,a=m,c=f;break}if(C===c){w=!0,c=m,a=f;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Lo(n){return n=Ka(n),n!==null?ps(n):null}function ps(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=ps(n);if(i!==null)return i;n=n.sibling}return null}var ms=e.unstable_scheduleCallback,Mo=e.unstable_cancelCallback,qa=e.unstable_shouldYield,dc=e.unstable_requestPaint,$e=e.unstable_now,Ga=e.unstable_getCurrentPriorityLevel,Ei=e.unstable_ImmediatePriority,Nr=e.unstable_UserBlockingPriority,hn=e.unstable_NormalPriority,Fo=e.unstable_LowPriority,Qa=e.unstable_IdlePriority,Ti=null,en=null;function Xa(n){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Ti,n,void 0,(n.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Za,Uo=Math.log,Ya=Math.LN2;function Za(n){return n>>>=0,n===0?32:31-(Uo(n)/Ya|0)|0}var gs=64,ys=4194304;function Dr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Si(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~f;C!==0?c=Dr(C):(m&=w,m!==0&&(c=Dr(m)))}else w=a&~f,w!==0?c=Dr(w):m!==0&&(c=Dr(m));if(c===0)return 0;if(i!==0&&i!==c&&!(i&f)&&(f=c&-c,m=i&-i,f>=m||f===16&&(m&4194240)!==0))return i;if(c&4&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-zt(i),f=1<<a,c|=n[a],i&=~f;return c}function pc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ur(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-zt(m),C=1<<w,x=f[w];x===-1?(!(C&a)||C&c)&&(f[w]=pc(C,i)):x<=i&&(n.expiredLanes|=C),m&=~C}}function tn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ii(){var n=gs;return gs<<=1,!(gs&4194240)&&(gs=64),n}function Vr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Or(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-zt(i),n[i]=a}function je(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-zt(a),m=1<<f;i[f]=0,c[f]=-1,n[f]=-1,a&=~m}}function br(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-zt(a),f=1<<c;f&i|n[c]&i&&(n[c]|=i),a&=~f}}var Re=0;function Lr(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Ja,_s,eu,tu,nu,zo=!1,Bn=[],Tt=null,An=null,kn=null,Mr=new Map,fn=new Map,$n=[],mc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ru(n,i){switch(n){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":Mr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(i.pointerId)}}function Ht(n,i,a,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=ta(i),i!==null&&_s(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function gc(n,i,a,c,f){switch(i){case"focusin":return Tt=Ht(Tt,n,i,a,c,f),!0;case"dragenter":return An=Ht(An,n,i,a,c,f),!0;case"mouseover":return kn=Ht(kn,n,i,a,c,f),!0;case"pointerover":var m=f.pointerId;return Mr.set(m,Ht(Mr.get(m)||null,n,i,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,fn.set(m,Ht(fn.get(m)||null,n,i,a,c,f)),!0}return!1}function iu(n){var i=Pi(n.target);if(i!==null){var a=In(i);if(a!==null){if(i=a.tag,i===13){if(i=wi(a),i!==null){n.blockedOn=i,nu(n.priority,function(){eu(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=vs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);gi=c,a.target.dispatchEvent(c),gi=null}else return i=ta(a),i!==null&&_s(i),n.blockedOn=a,!1;i.shift()}return!0}function Ci(n,i,a){lr(n)&&a.delete(i)}function su(){zo=!1,Tt!==null&&lr(Tt)&&(Tt=null),An!==null&&lr(An)&&(An=null),kn!==null&&lr(kn)&&(kn=null),Mr.forEach(Ci),fn.forEach(Ci)}function Rn(n,i){n.blockedOn===i&&(n.blockedOn=null,zo||(zo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,su)))}function Pn(n){function i(f){return Rn(f,n)}if(0<Bn.length){Rn(Bn[0],n);for(var a=1;a<Bn.length;a++){var c=Bn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Tt!==null&&Rn(Tt,n),An!==null&&Rn(An,n),kn!==null&&Rn(kn,n),Mr.forEach(i),fn.forEach(i),a=0;a<$n.length;a++)c=$n[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<$n.length&&(a=$n[0],a.blockedOn===null);)iu(a),a.blockedOn===null&&$n.shift()}var cr=W.ReactCurrentBatchConfig,Fr=!0;function Ge(n,i,a,c){var f=Re,m=cr.transition;cr.transition=null;try{Re=1,jo(n,i,a,c)}finally{Re=f,cr.transition=m}}function yc(n,i,a,c){var f=Re,m=cr.transition;cr.transition=null;try{Re=4,jo(n,i,a,c)}finally{Re=f,cr.transition=m}}function jo(n,i,a,c){if(Fr){var f=vs(n,i,a,c);if(f===null)Rc(n,i,c,Ai,a),ru(n,c);else if(gc(f,n,i,a,c))c.stopPropagation();else if(ru(n,c),i&4&&-1<mc.indexOf(n)){for(;f!==null;){var m=ta(f);if(m!==null&&Ja(m),m=vs(n,i,a,c),m===null&&Rc(n,i,c,Ai,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else Rc(n,i,c,null,a)}}var Ai=null;function vs(n,i,a,c){if(Ai=null,n=us(c),n=Pi(n),n!==null)if(i=In(n),i===null)n=null;else if(a=i.tag,a===13){if(n=wi(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Ai=n,null}function Bo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ga()){case Ei:return 1;case Nr:return 4;case hn:case Fo:return 16;case Qa:return 536870912;default:return 16}default:return 16}}var nn=null,ws=null,Kt=null;function $o(){if(Kt)return Kt;var n,i=ws,a=i.length,c,f="value"in nn?nn.value:nn.textContent,m=f.length;for(n=0;n<a&&i[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===f[m-c];c++);return Kt=f.slice(n,1<c?1-c:void 0)}function Es(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Wn(){return!0}function Wo(){return!1}function St(n){function i(a,c,f,m,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Wn:Wo,this.isPropagationStopped=Wo,this}return se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=St(xn),Hn=se({},xn,{view:0,detail:0}),_c=St(Hn),Ss,hr,Ur,ki=se({},Hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ur&&(Ur&&n.type==="mousemove"?(Ss=n.screenX-Ur.screenX,hr=n.screenY-Ur.screenY):hr=Ss=0,Ur=n),Ss)},movementY:function(n){return"movementY"in n?n.movementY:hr}}),Is=St(ki),Ho=se({},ki,{dataTransfer:0}),ou=St(Ho),Cs=se({},Hn,{relatedTarget:0}),As=St(Cs),au=se({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),fr=St(au),uu=se({},xn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),lu=St(uu),cu=se({},xn,{data:0}),Ko=St(cu),ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=hu[n])?!!i[n]:!1}function Kn(){return fu}var l=se({},Hn,{key:function(n){if(n.key){var i=ks[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Es(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kn,charCode:function(n){return n.type==="keypress"?Es(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Es(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=St(l),_=se({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=St(_),L=se({},Hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kn}),B=St(L),te=se({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=St(te),ct=se({},ki,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=St(ct),gt=[9,13,27,32],it=d&&"CompositionEvent"in window,dn=null;d&&"documentMode"in document&&(dn=document.documentMode);var rn=d&&"TextEvent"in window&&!dn,Ri=d&&(!it||dn&&8<dn&&11>=dn),Rs=" ",Fd=!1;function Ud(n,i){switch(n){case"keyup":return gt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ps=!1;function Zv(n,i){switch(n){case"compositionend":return zd(i);case"keypress":return i.which!==32?null:(Fd=!0,Rs);case"textInput":return n=i.data,n===Rs&&Fd?null:n;default:return null}}function Jv(n,i){if(Ps)return n==="compositionend"||!it&&Ud(n,i)?(n=$o(),Kt=ws=nn=null,Ps=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!ew[n.type]:i==="textarea"}function Bd(n,i,a,c){jn(c),i=yu(i,"onChange"),0<i.length&&(a=new Ts("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var qo=null,Go=null;function tw(n){op(n,0)}function du(n){var i=Os(n);if(rs(i))return n}function nw(n,i){if(n==="change")return i}var $d=!1;if(d){var vc;if(d){var wc="oninput"in document;if(!wc){var Wd=document.createElement("div");Wd.setAttribute("oninput","return;"),wc=typeof Wd.oninput=="function"}vc=wc}else vc=!1;$d=vc&&(!document.documentMode||9<document.documentMode)}function Hd(){qo&&(qo.detachEvent("onpropertychange",Kd),Go=qo=null)}function Kd(n){if(n.propertyName==="value"&&du(Go)){var i=[];Bd(i,Go,n,us(n)),Oo(tw,i)}}function rw(n,i,a){n==="focusin"?(Hd(),qo=i,Go=a,qo.attachEvent("onpropertychange",Kd)):n==="focusout"&&Hd()}function iw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return du(Go)}function sw(n,i){if(n==="click")return du(i)}function ow(n,i){if(n==="input"||n==="change")return du(i)}function aw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Nn=typeof Object.is=="function"?Object.is:aw;function Qo(n,i){if(Nn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!g.call(i,f)||!Nn(n[f],i[f]))return!1}return!0}function qd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gd(n,i){var a=qd(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qd(a)}}function Qd(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Qd(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Xd(){for(var n=window,i=Pr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Pr(n.document)}return i}function Ec(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function uw(n){var i=Xd(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Qd(a.ownerDocument.documentElement,a)){if(c!==null&&Ec(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!n.extend&&m>c&&(f=c,c=m,m=f),f=Gd(a,m);var w=Gd(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var lw=d&&"documentMode"in document&&11>=document.documentMode,xs=null,Tc=null,Xo=null,Sc=!1;function Yd(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sc||xs==null||xs!==Pr(c)||(c=xs,"selectionStart"in c&&Ec(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Xo&&Qo(Xo,c)||(Xo=c,c=yu(Tc,"onSelect"),0<c.length&&(i=new Ts("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=xs)))}function pu(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ns={animationend:pu("Animation","AnimationEnd"),animationiteration:pu("Animation","AnimationIteration"),animationstart:pu("Animation","AnimationStart"),transitionend:pu("Transition","TransitionEnd")},Ic={},Zd={};d&&(Zd=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function mu(n){if(Ic[n])return Ic[n];if(!Ns[n])return n;var i=Ns[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Zd)return Ic[n]=i[a];return n}var Jd=mu("animationend"),ep=mu("animationiteration"),tp=mu("animationstart"),np=mu("transitionend"),rp=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(n,i){rp.set(n,i),u(i,[n])}for(var Cc=0;Cc<ip.length;Cc++){var Ac=ip[Cc],cw=Ac.toLowerCase(),hw=Ac[0].toUpperCase()+Ac.slice(1);zr(cw,"on"+hw)}zr(Jd,"onAnimationEnd"),zr(ep,"onAnimationIteration"),zr(tp,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(np,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function sp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Ha(c,i,void 0,n),n.currentTarget=null}function op(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var w=c.length-1;0<=w;w--){var C=c[w],x=C.instance,j=C.currentTarget;if(C=C.listener,x!==m&&f.isPropagationStopped())break e;sp(f,C,j),m=x}else for(w=0;w<c.length;w++){if(C=c[w],x=C.instance,j=C.currentTarget,C=C.listener,x!==m&&f.isPropagationStopped())break e;sp(f,C,j),m=x}}}if(Sn)throw n=bo,Sn=!1,bo=null,n}function He(n,i){var a=i[Oc];a===void 0&&(a=i[Oc]=new Set);var c=n+"__bubble";a.has(c)||(ap(i,n,2,!1),a.add(c))}function kc(n,i,a){var c=0;i&&(c|=4),ap(a,n,c,i)}var gu="_reactListening"+Math.random().toString(36).slice(2);function Zo(n){if(!n[gu]){n[gu]=!0,s.forEach(function(a){a!=="selectionchange"&&(fw.has(a)||kc(a,!1,n),kc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[gu]||(i[gu]=!0,kc("selectionchange",!1,i))}}function ap(n,i,a,c){switch(Bo(i)){case 1:var f=Ge;break;case 4:f=yc;break;default:f=jo}a=f.bind(null,i,a,n),f=void 0,!hs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Rc(n,i,a,c,f){var m=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var x=w.tag;if((x===3||x===4)&&(x=w.stateNode.containerInfo,x===f||x.nodeType===8&&x.parentNode===f))return;w=w.return}for(;C!==null;){if(w=Pi(C),w===null)return;if(x=w.tag,x===5||x===6){c=m=w;continue e}C=C.parentNode}}c=c.return}Oo(function(){var j=m,X=us(a),Y=[];e:{var Q=rp.get(n);if(Q!==void 0){var ie=Ts,ue=n;switch(n){case"keypress":if(Es(a)===0)break e;case"keydown":case"keyup":ie=p;break;case"focusin":ue="focus",ie=As;break;case"focusout":ue="blur",ie=As;break;case"beforeblur":case"afterblur":ie=As;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Is;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=B;break;case Jd:case ep:case tp:ie=fr;break;case np:ie=Ue;break;case"scroll":ie=_c;break;case"wheel":ie=Ne;break;case"copy":case"cut":case"paste":ie=lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=T}var he=(i&4)!==0,nt=!he&&n==="scroll",U=he?Q!==null?Q+"Capture":null:Q;he=[];for(var V=j,z;V!==null;){z=V;var J=z.stateNode;if(z.tag===5&&J!==null&&(z=J,U!==null&&(J=tt(V,U),J!=null&&he.push(Jo(V,J,z)))),nt)break;V=V.return}0<he.length&&(Q=new ie(Q,ue,null,a,X),Y.push({event:Q,listeners:he}))}}if(!(i&7)){e:{if(Q=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",Q&&a!==gi&&(ue=a.relatedTarget||a.fromElement)&&(Pi(ue)||ue[dr]))break e;if((ie||Q)&&(Q=X.window===X?X:(Q=X.ownerDocument)?Q.defaultView||Q.parentWindow:window,ie?(ue=a.relatedTarget||a.toElement,ie=j,ue=ue?Pi(ue):null,ue!==null&&(nt=In(ue),ue!==nt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=j),ie!==ue)){if(he=Is,J="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(he=T,J="onPointerLeave",U="onPointerEnter",V="pointer"),nt=ie==null?Q:Os(ie),z=ue==null?Q:Os(ue),Q=new he(J,V+"leave",ie,a,X),Q.target=nt,Q.relatedTarget=z,J=null,Pi(X)===j&&(he=new he(U,V+"enter",ue,a,X),he.target=z,he.relatedTarget=nt,J=he),nt=J,ie&&ue)t:{for(he=ie,U=ue,V=0,z=he;z;z=Ds(z))V++;for(z=0,J=U;J;J=Ds(J))z++;for(;0<V-z;)he=Ds(he),V--;for(;0<z-V;)U=Ds(U),z--;for(;V--;){if(he===U||U!==null&&he===U.alternate)break t;he=Ds(he),U=Ds(U)}he=null}else he=null;ie!==null&&up(Y,Q,ie,he,!1),ue!==null&&nt!==null&&up(Y,nt,ue,he,!0)}}e:{if(Q=j?Os(j):window,ie=Q.nodeName&&Q.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Q.type==="file")var fe=nw;else if(jd(Q))if($d)fe=ow;else{fe=iw;var ge=rw}else(ie=Q.nodeName)&&ie.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(fe=sw);if(fe&&(fe=fe(n,j))){Bd(Y,fe,a,X);break e}ge&&ge(n,Q,j),n==="focusout"&&(ge=Q._wrapperState)&&ge.controlled&&Q.type==="number"&&ss(Q,"number",Q.value)}switch(ge=j?Os(j):window,n){case"focusin":(jd(ge)||ge.contentEditable==="true")&&(xs=ge,Tc=j,Xo=null);break;case"focusout":Xo=Tc=xs=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,Yd(Y,a,X);break;case"selectionchange":if(lw)break;case"keydown":case"keyup":Yd(Y,a,X)}var ye;if(it)e:{switch(n){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Ps?Ud(n,a)&&(ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(Ri&&a.locale!=="ko"&&(Ps||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Ps&&(ye=$o()):(nn=X,ws="value"in nn?nn.value:nn.textContent,Ps=!0)),ge=yu(j,ve),0<ge.length&&(ve=new Ko(ve,n,null,a,X),Y.push({event:ve,listeners:ge}),ye?ve.data=ye:(ye=zd(a),ye!==null&&(ve.data=ye)))),(ye=rn?Zv(n,a):Jv(n,a))&&(j=yu(j,"onBeforeInput"),0<j.length&&(X=new Ko("onBeforeInput","beforeinput",null,a,X),Y.push({event:X,listeners:j}),X.data=ye))}op(Y,i)})}function Jo(n,i,a){return{instance:n,listener:i,currentTarget:a}}function yu(n,i){for(var a=i+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=tt(n,a),m!=null&&c.unshift(Jo(n,m,f)),m=tt(n,i),m!=null&&c.push(Jo(n,m,f))),n=n.return}return c}function Ds(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function up(n,i,a,c,f){for(var m=i._reactName,w=[];a!==null&&a!==c;){var C=a,x=C.alternate,j=C.stateNode;if(x!==null&&x===c)break;C.tag===5&&j!==null&&(C=j,f?(x=tt(a,m),x!=null&&w.unshift(Jo(a,x,C))):f||(x=tt(a,m),x!=null&&w.push(Jo(a,x,C)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var dw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function lp(n){return(typeof n=="string"?n:""+n).replace(dw,`
`).replace(pw,"")}function _u(n,i,a){if(i=lp(i),lp(n)!==i&&a)throw Error(t(425))}function vu(){}var Pc=null,xc=null;function Nc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Dc=typeof setTimeout=="function"?setTimeout:void 0,mw=typeof clearTimeout=="function"?clearTimeout:void 0,cp=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof cp<"u"?function(n){return cp.resolve(null).then(n).catch(yw)}:Dc;function yw(n){setTimeout(function(){throw n})}function Vc(n,i){var a=i,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Pn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Pn(i)}function jr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function hp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),qn="__reactFiber$"+Vs,ea="__reactProps$"+Vs,dr="__reactContainer$"+Vs,Oc="__reactEvents$"+Vs,_w="__reactListeners$"+Vs,vw="__reactHandles$"+Vs;function Pi(n){var i=n[qn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[dr]||a[qn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=hp(n);n!==null;){if(a=n[qn])return a;n=hp(n)}return i}n=a,a=n.parentNode}return null}function ta(n){return n=n[qn]||n[dr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Os(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function wu(n){return n[ea]||null}var bc=[],bs=-1;function Br(n){return{current:n}}function Ke(n){0>bs||(n.current=bc[bs],bc[bs]=null,bs--)}function We(n,i){bs++,bc[bs]=n.current,n.current=i}var $r={},Dt=Br($r),qt=Br(!1),xi=$r;function Ls(n,i){var a=n.type.contextTypes;if(!a)return $r;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=f),f}function Gt(n){return n=n.childContextTypes,n!=null}function Eu(){Ke(qt),Ke(Dt)}function fp(n,i,a){if(Dt.current!==$r)throw Error(t(168));We(Dt,i),We(qt,a)}function dp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in i))throw Error(t(108,Le(n)||"Unknown",f));return se({},a,c)}function Tu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$r,xi=Dt.current,We(Dt,n),We(qt,qt.current),!0}function pp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=dp(n,i,xi),c.__reactInternalMemoizedMergedChildContext=n,Ke(qt),Ke(Dt),We(Dt,n)):Ke(qt),We(qt,a)}var pr=null,Su=!1,Lc=!1;function mp(n){pr===null?pr=[n]:pr.push(n)}function ww(n){Su=!0,mp(n)}function Wr(){if(!Lc&&pr!==null){Lc=!0;var n=0,i=Re;try{var a=pr;for(Re=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}pr=null,Su=!1}catch(f){throw pr!==null&&(pr=pr.slice(n+1)),ms(Ei,Wr),f}finally{Re=i,Lc=!1}}return null}var Ms=[],Fs=0,Iu=null,Cu=0,pn=[],mn=0,Ni=null,mr=1,gr="";function Di(n,i){Ms[Fs++]=Cu,Ms[Fs++]=Iu,Iu=n,Cu=i}function gp(n,i,a){pn[mn++]=mr,pn[mn++]=gr,pn[mn++]=Ni,Ni=n;var c=mr;n=gr;var f=32-zt(c)-1;c&=~(1<<f),a+=1;var m=32-zt(i)+f;if(30<m){var w=f-f%5;m=(c&(1<<w)-1).toString(32),c>>=w,f-=w,mr=1<<32-zt(i)+f|a<<f|c,gr=m+n}else mr=1<<m|a<<f|c,gr=n}function Mc(n){n.return!==null&&(Di(n,1),gp(n,1,0))}function Fc(n){for(;n===Iu;)Iu=Ms[--Fs],Ms[Fs]=null,Cu=Ms[--Fs],Ms[Fs]=null;for(;n===Ni;)Ni=pn[--mn],pn[mn]=null,gr=pn[--mn],pn[mn]=null,mr=pn[--mn],pn[mn]=null}var sn=null,on=null,Qe=!1,Dn=null;function yp(n,i){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function _p(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,sn=n,on=jr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,sn=n,on=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Ni!==null?{id:mr,overflow:gr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,sn=n,on=null,!0):!1;default:return!1}}function Uc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function zc(n){if(Qe){var i=on;if(i){var a=i;if(!_p(n,i)){if(Uc(n))throw Error(t(418));i=jr(a.nextSibling);var c=sn;i&&_p(n,i)?yp(c,a):(n.flags=n.flags&-4097|2,Qe=!1,sn=n)}}else{if(Uc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Qe=!1,sn=n}}}function vp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;sn=n}function Au(n){if(n!==sn)return!1;if(!Qe)return vp(n),Qe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Nc(n.type,n.memoizedProps)),i&&(i=on)){if(Uc(n))throw wp(),Error(t(418));for(;i;)yp(n,i),i=jr(i.nextSibling)}if(vp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){on=jr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}on=null}}else on=sn?jr(n.stateNode.nextSibling):null;return!0}function wp(){for(var n=on;n;)n=jr(n.nextSibling)}function Us(){on=sn=null,Qe=!1}function jc(n){Dn===null?Dn=[n]:Dn.push(n)}var Ew=W.ReactCurrentBatchConfig;function na(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var C=f.refs;w===null?delete C[m]:C[m]=w},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ku(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Ep(n){var i=n._init;return i(n._payload)}function Tp(n){function i(U,V){if(n){var z=U.deletions;z===null?(U.deletions=[V],U.flags|=16):z.push(V)}}function a(U,V){if(!n)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function f(U,V){return U=Zr(U,V),U.index=0,U.sibling=null,U}function m(U,V,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<V?(U.flags|=2,V):z):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function C(U,V,z,J){return V===null||V.tag!==6?(V=Dh(z,U.mode,J),V.return=U,V):(V=f(V,z),V.return=U,V)}function x(U,V,z,J){var fe=z.type;return fe===R?X(U,V,z.props.children,J,z.key):V!==null&&(V.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Nt&&Ep(fe)===V.type)?(J=f(V,z.props),J.ref=na(U,V,z),J.return=U,J):(J=Yu(z.type,z.key,z.props,null,U.mode,J),J.ref=na(U,V,z),J.return=U,J)}function j(U,V,z,J){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Vh(z,U.mode,J),V.return=U,V):(V=f(V,z.children||[]),V.return=U,V)}function X(U,V,z,J,fe){return V===null||V.tag!==7?(V=zi(z,U.mode,J,fe),V.return=U,V):(V=f(V,z),V.return=U,V)}function Y(U,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Dh(""+V,U.mode,z),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ce:return z=Yu(V.type,V.key,V.props,null,U.mode,z),z.ref=na(U,null,V),z.return=U,z;case ne:return V=Vh(V,U.mode,z),V.return=U,V;case Nt:var J=V._init;return Y(U,J(V._payload),z)}if(ir(V)||me(V))return V=zi(V,U.mode,z,null),V.return=U,V;ku(U,V)}return null}function Q(U,V,z,J){var fe=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return fe!==null?null:C(U,V,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ce:return z.key===fe?x(U,V,z,J):null;case ne:return z.key===fe?j(U,V,z,J):null;case Nt:return fe=z._init,Q(U,V,fe(z._payload),J)}if(ir(z)||me(z))return fe!==null?null:X(U,V,z,J,null);ku(U,z)}return null}function ie(U,V,z,J,fe){if(typeof J=="string"&&J!==""||typeof J=="number")return U=U.get(z)||null,C(V,U,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case ce:return U=U.get(J.key===null?z:J.key)||null,x(V,U,J,fe);case ne:return U=U.get(J.key===null?z:J.key)||null,j(V,U,J,fe);case Nt:var ge=J._init;return ie(U,V,z,ge(J._payload),fe)}if(ir(J)||me(J))return U=U.get(z)||null,X(V,U,J,fe,null);ku(V,J)}return null}function ue(U,V,z,J){for(var fe=null,ge=null,ye=V,ve=V=0,vt=null;ye!==null&&ve<z.length;ve++){ye.index>ve?(vt=ye,ye=null):vt=ye.sibling;var be=Q(U,ye,z[ve],J);if(be===null){ye===null&&(ye=vt);break}n&&ye&&be.alternate===null&&i(U,ye),V=m(be,V,ve),ge===null?fe=be:ge.sibling=be,ge=be,ye=vt}if(ve===z.length)return a(U,ye),Qe&&Di(U,ve),fe;if(ye===null){for(;ve<z.length;ve++)ye=Y(U,z[ve],J),ye!==null&&(V=m(ye,V,ve),ge===null?fe=ye:ge.sibling=ye,ge=ye);return Qe&&Di(U,ve),fe}for(ye=c(U,ye);ve<z.length;ve++)vt=ie(ye,U,ve,z[ve],J),vt!==null&&(n&&vt.alternate!==null&&ye.delete(vt.key===null?ve:vt.key),V=m(vt,V,ve),ge===null?fe=vt:ge.sibling=vt,ge=vt);return n&&ye.forEach(function(Jr){return i(U,Jr)}),Qe&&Di(U,ve),fe}function he(U,V,z,J){var fe=me(z);if(typeof fe!="function")throw Error(t(150));if(z=fe.call(z),z==null)throw Error(t(151));for(var ge=fe=null,ye=V,ve=V=0,vt=null,be=z.next();ye!==null&&!be.done;ve++,be=z.next()){ye.index>ve?(vt=ye,ye=null):vt=ye.sibling;var Jr=Q(U,ye,be.value,J);if(Jr===null){ye===null&&(ye=vt);break}n&&ye&&Jr.alternate===null&&i(U,ye),V=m(Jr,V,ve),ge===null?fe=Jr:ge.sibling=Jr,ge=Jr,ye=vt}if(be.done)return a(U,ye),Qe&&Di(U,ve),fe;if(ye===null){for(;!be.done;ve++,be=z.next())be=Y(U,be.value,J),be!==null&&(V=m(be,V,ve),ge===null?fe=be:ge.sibling=be,ge=be);return Qe&&Di(U,ve),fe}for(ye=c(U,ye);!be.done;ve++,be=z.next())be=ie(ye,U,ve,be.value,J),be!==null&&(n&&be.alternate!==null&&ye.delete(be.key===null?ve:be.key),V=m(be,V,ve),ge===null?fe=be:ge.sibling=be,ge=be);return n&&ye.forEach(function(Jw){return i(U,Jw)}),Qe&&Di(U,ve),fe}function nt(U,V,z,J){if(typeof z=="object"&&z!==null&&z.type===R&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ce:e:{for(var fe=z.key,ge=V;ge!==null;){if(ge.key===fe){if(fe=z.type,fe===R){if(ge.tag===7){a(U,ge.sibling),V=f(ge,z.props.children),V.return=U,U=V;break e}}else if(ge.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Nt&&Ep(fe)===ge.type){a(U,ge.sibling),V=f(ge,z.props),V.ref=na(U,ge,z),V.return=U,U=V;break e}a(U,ge);break}else i(U,ge);ge=ge.sibling}z.type===R?(V=zi(z.props.children,U.mode,J,z.key),V.return=U,U=V):(J=Yu(z.type,z.key,z.props,null,U.mode,J),J.ref=na(U,V,z),J.return=U,U=J)}return w(U);case ne:e:{for(ge=z.key;V!==null;){if(V.key===ge)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(U,V.sibling),V=f(V,z.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else i(U,V);V=V.sibling}V=Vh(z,U.mode,J),V.return=U,U=V}return w(U);case Nt:return ge=z._init,nt(U,V,ge(z._payload),J)}if(ir(z))return ue(U,V,z,J);if(me(z))return he(U,V,z,J);ku(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(U,V.sibling),V=f(V,z),V.return=U,U=V):(a(U,V),V=Dh(z,U.mode,J),V.return=U,U=V),w(U)):a(U,V)}return nt}var zs=Tp(!0),Sp=Tp(!1),Ru=Br(null),Pu=null,js=null,Bc=null;function $c(){Bc=js=Pu=null}function Wc(n){var i=Ru.current;Ke(Ru),n._currentValue=i}function Hc(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Bs(n,i){Pu=n,Bc=js=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(Qt=!0),n.firstContext=null)}function gn(n){var i=n._currentValue;if(Bc!==n)if(n={context:n,memoizedValue:i,next:null},js===null){if(Pu===null)throw Error(t(308));js=n,Pu.dependencies={lanes:0,firstContext:n}}else js=js.next=n;return i}var Vi=null;function Kc(n){Vi===null?Vi=[n]:Vi.push(n)}function Ip(n,i,a,c){var f=i.interleaved;return f===null?(a.next=a,Kc(i)):(a.next=f.next,f.next=a),i.interleaved=a,yr(n,c)}function yr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Hr=!1;function qc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _r(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Kr(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Oe&2){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,yr(n,a)}return f=c.interleaved,f===null?(i.next=i,Kc(c)):(i.next=f.next,f.next=i),c.interleaved=i,yr(n,a)}function xu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,br(n,a)}}function Ap(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Nu(n,i,a,c){var f=n.updateQueue;Hr=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var x=C,j=x.next;x.next=null,w===null?m=j:w.next=j,w=x;var X=n.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==w&&(C===null?X.firstBaseUpdate=j:C.next=j,X.lastBaseUpdate=x))}if(m!==null){var Y=f.baseState;w=0,X=j=x=null,C=m;do{var Q=C.lane,ie=C.eventTime;if((c&Q)===Q){X!==null&&(X=X.next={eventTime:ie,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ue=n,he=C;switch(Q=i,ie=a,he.tag){case 1:if(ue=he.payload,typeof ue=="function"){Y=ue.call(ie,Y,Q);break e}Y=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=he.payload,Q=typeof ue=="function"?ue.call(ie,Y,Q):ue,Q==null)break e;Y=se({},Y,Q);break e;case 2:Hr=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,Q=f.effects,Q===null?f.effects=[C]:Q.push(C))}else ie={eventTime:ie,lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(j=X=ie,x=Y):X=X.next=ie,w|=Q;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;Q=C,C=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);if(X===null&&(x=Y),f.baseState=x,f.firstBaseUpdate=j,f.lastBaseUpdate=X,i=f.shared.interleaved,i!==null){f=i;do w|=f.lane,f=f.next;while(f!==i)}else m===null&&(f.shared.lanes=0);Li|=w,n.lanes=w,n.memoizedState=Y}}function kp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ra={},Gn=Br(ra),ia=Br(ra),sa=Br(ra);function Oi(n){if(n===ra)throw Error(t(174));return n}function Gc(n,i){switch(We(sa,i),We(ia,n),We(Gn,ra),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=lt(i,n)}Ke(Gn),We(Gn,i)}function $s(){Ke(Gn),Ke(ia),Ke(sa)}function Rp(n){Oi(sa.current);var i=Oi(Gn.current),a=lt(i,n.type);i!==a&&(We(ia,n),We(Gn,a))}function Qc(n){ia.current===n&&(Ke(Gn),Ke(ia))}var Xe=Br(0);function Du(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xc=[];function Yc(){for(var n=0;n<Xc.length;n++)Xc[n]._workInProgressVersionPrimary=null;Xc.length=0}var Vu=W.ReactCurrentDispatcher,Zc=W.ReactCurrentBatchConfig,bi=0,Ye=null,ht=null,yt=null,Ou=!1,oa=!1,aa=0,Tw=0;function Vt(){throw Error(t(321))}function Jc(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Nn(n[a],i[a]))return!1;return!0}function eh(n,i,a,c,f,m){if(bi=m,Ye=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Vu.current=n===null||n.memoizedState===null?Aw:kw,n=a(c,f),oa){m=0;do{if(oa=!1,aa=0,25<=m)throw Error(t(301));m+=1,yt=ht=null,i.updateQueue=null,Vu.current=Rw,n=a(c,f)}while(oa)}if(Vu.current=Mu,i=ht!==null&&ht.next!==null,bi=0,yt=ht=Ye=null,Ou=!1,i)throw Error(t(300));return n}function th(){var n=aa!==0;return aa=0,n}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ye.memoizedState=yt=n:yt=yt.next=n,yt}function yn(){if(ht===null){var n=Ye.alternate;n=n!==null?n.memoizedState:null}else n=ht.next;var i=yt===null?Ye.memoizedState:yt.next;if(i!==null)yt=i,ht=n;else{if(n===null)throw Error(t(310));ht=n,n={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},yt===null?Ye.memoizedState=yt=n:yt=yt.next=n}return yt}function ua(n,i){return typeof i=="function"?i(n):i}function nh(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=ht,f=c.baseQueue,m=a.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}c.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,c=c.baseState;var C=w=null,x=null,j=m;do{var X=j.lane;if((bi&X)===X)x!==null&&(x=x.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),c=j.hasEagerState?j.eagerState:n(c,j.action);else{var Y={lane:X,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};x===null?(C=x=Y,w=c):x=x.next=Y,Ye.lanes|=X,Li|=X}j=j.next}while(j!==null&&j!==m);x===null?w=c:x.next=C,Nn(c,i.memoizedState)||(Qt=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=x,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do m=f.lane,Ye.lanes|=m,Li|=m,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function rh(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do m=n(m,w.action),w=w.next;while(w!==f);Nn(m,i.memoizedState)||(Qt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function Pp(){}function xp(n,i){var a=Ye,c=yn(),f=i(),m=!Nn(c.memoizedState,f);if(m&&(c.memoizedState=f,Qt=!0),c=c.queue,ih(Vp.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||yt!==null&&yt.memoizedState.tag&1){if(a.flags|=2048,la(9,Dp.bind(null,a,c,f,i),void 0,null),_t===null)throw Error(t(349));bi&30||Np(a,i,f)}return f}function Np(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ye.updateQueue,i===null?(i={lastEffect:null,stores:null},Ye.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Dp(n,i,a,c){i.value=a,i.getSnapshot=c,Op(i)&&bp(n)}function Vp(n,i,a){return a(function(){Op(i)&&bp(n)})}function Op(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Nn(n,a)}catch{return!0}}function bp(n){var i=yr(n,1);i!==null&&Ln(i,n,1,-1)}function Lp(n){var i=Qn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:n},i.queue=n,n=n.dispatch=Cw.bind(null,Ye,n),[i.memoizedState,n]}function la(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=Ye.updateQueue,i===null?(i={lastEffect:null,stores:null},Ye.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Mp(){return yn().memoizedState}function bu(n,i,a,c){var f=Qn();Ye.flags|=n,f.memoizedState=la(1|i,a,void 0,c===void 0?null:c)}function Lu(n,i,a,c){var f=yn();c=c===void 0?null:c;var m=void 0;if(ht!==null){var w=ht.memoizedState;if(m=w.destroy,c!==null&&Jc(c,w.deps)){f.memoizedState=la(i,a,m,c);return}}Ye.flags|=n,f.memoizedState=la(1|i,a,m,c)}function Fp(n,i){return bu(8390656,8,n,i)}function ih(n,i){return Lu(2048,8,n,i)}function Up(n,i){return Lu(4,2,n,i)}function zp(n,i){return Lu(4,4,n,i)}function jp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Bp(n,i,a){return a=a!=null?a.concat([n]):null,Lu(4,4,jp.bind(null,i,n),a)}function sh(){}function $p(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Jc(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Wp(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Jc(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Hp(n,i,a){return bi&21?(Nn(a,i)||(a=Ii(),Ye.lanes|=a,Li|=a,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,Qt=!0),n.memoizedState=a)}function Sw(n,i){var a=Re;Re=a!==0&&4>a?a:4,n(!0);var c=Zc.transition;Zc.transition={};try{n(!1),i()}finally{Re=a,Zc.transition=c}}function Kp(){return yn().memoizedState}function Iw(n,i,a){var c=Xr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},qp(n))Gp(i,a);else if(a=Ip(n,i,a,c),a!==null){var f=$t();Ln(a,n,c,f),Qp(a,i,c)}}function Cw(n,i,a){var c=Xr(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(qp(n))Gp(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,C=m(w,a);if(f.hasEagerState=!0,f.eagerState=C,Nn(C,w)){var x=i.interleaved;x===null?(f.next=f,Kc(i)):(f.next=x.next,x.next=f),i.interleaved=f;return}}catch{}finally{}a=Ip(n,i,f,c),a!==null&&(f=$t(),Ln(a,n,c,f),Qp(a,i,c))}}function qp(n){var i=n.alternate;return n===Ye||i!==null&&i===Ye}function Gp(n,i){oa=Ou=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Qp(n,i,a){if(a&4194240){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,br(n,a)}}var Mu={readContext:gn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},Aw={readContext:gn,useCallback:function(n,i){return Qn().memoizedState=[n,i===void 0?null:i],n},useContext:gn,useEffect:Fp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,bu(4194308,4,jp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return bu(4194308,4,n,i)},useInsertionEffect:function(n,i){return bu(4,2,n,i)},useMemo:function(n,i){var a=Qn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Qn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=Iw.bind(null,Ye,n),[c.memoizedState,n]},useRef:function(n){var i=Qn();return n={current:n},i.memoizedState=n},useState:Lp,useDebugValue:sh,useDeferredValue:function(n){return Qn().memoizedState=n},useTransition:function(){var n=Lp(!1),i=n[0];return n=Sw.bind(null,n[1]),Qn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=Ye,f=Qn();if(Qe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),_t===null)throw Error(t(349));bi&30||Np(c,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,Fp(Vp.bind(null,c,m,n),[n]),c.flags|=2048,la(9,Dp.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=Qn(),i=_t.identifierPrefix;if(Qe){var a=gr,c=mr;a=(c&~(1<<32-zt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=aa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Tw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},kw={readContext:gn,useCallback:$p,useContext:gn,useEffect:ih,useImperativeHandle:Bp,useInsertionEffect:Up,useLayoutEffect:zp,useMemo:Wp,useReducer:nh,useRef:Mp,useState:function(){return nh(ua)},useDebugValue:sh,useDeferredValue:function(n){var i=yn();return Hp(i,ht.memoizedState,n)},useTransition:function(){var n=nh(ua)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Pp,useSyncExternalStore:xp,useId:Kp,unstable_isNewReconciler:!1},Rw={readContext:gn,useCallback:$p,useContext:gn,useEffect:ih,useImperativeHandle:Bp,useInsertionEffect:Up,useLayoutEffect:zp,useMemo:Wp,useReducer:rh,useRef:Mp,useState:function(){return rh(ua)},useDebugValue:sh,useDeferredValue:function(n){var i=yn();return ht===null?i.memoizedState=n:Hp(i,ht.memoizedState,n)},useTransition:function(){var n=rh(ua)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Pp,useSyncExternalStore:xp,useId:Kp,unstable_isNewReconciler:!1};function Vn(n,i){if(n&&n.defaultProps){i=se({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function oh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:se({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Fu={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=$t(),f=Xr(n),m=_r(c,f);m.payload=i,a!=null&&(m.callback=a),i=Kr(n,m,f),i!==null&&(Ln(i,n,f,c),xu(i,n,f))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=$t(),f=Xr(n),m=_r(c,f);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Kr(n,m,f),i!==null&&(Ln(i,n,f,c),xu(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=$t(),c=Xr(n),f=_r(a,c);f.tag=2,i!=null&&(f.callback=i),i=Kr(n,f,c),i!==null&&(Ln(i,n,c,a),xu(i,n,c))}};function Xp(n,i,a,c,f,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):i.prototype&&i.prototype.isPureReactComponent?!Qo(a,c)||!Qo(f,m):!0}function Yp(n,i,a){var c=!1,f=$r,m=i.contextType;return typeof m=="object"&&m!==null?m=gn(m):(f=Gt(i)?xi:Dt.current,c=i.contextTypes,m=(c=c!=null)?Ls(n,f):$r),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Fu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=m),i}function Zp(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Fu.enqueueReplaceState(i,i.state,null)}function ah(n,i,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},qc(n);var m=i.contextType;typeof m=="object"&&m!==null?f.context=gn(m):(m=Gt(i)?xi:Dt.current,f.context=Ls(n,m)),f.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(oh(n,i,m,a),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Fu.enqueueReplaceState(f,f.state,null),Nu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Ws(n,i){try{var a="",c=i;do a+=Ie(c),c=c.return;while(c);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:f,digest:null}}function uh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function lh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Pw=typeof WeakMap=="function"?WeakMap:Map;function Jp(n,i,a){a=_r(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Hu||(Hu=!0,Ih=c),lh(n,i)},a}function em(n,i,a){a=_r(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;a.payload=function(){return c(f)},a.callback=function(){lh(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){lh(n,i),typeof c!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function tm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Pw;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(f.add(a),n=$w.bind(null,n,i,a),i.then(n,n))}function nm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function rm(n,i,a,c,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=_r(-1,1),i.tag=2,Kr(a,i,1))),a.lanes|=1),n)}var xw=W.ReactCurrentOwner,Qt=!1;function Bt(n,i,a,c){i.child=n===null?Sp(i,null,a,c):zs(i,n.child,a,c)}function im(n,i,a,c,f){a=a.render;var m=i.ref;return Bs(i,f),c=eh(n,i,a,c,m,f),a=th(),n!==null&&!Qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,vr(n,i,f)):(Qe&&a&&Mc(i),i.flags|=1,Bt(n,i,c,f),i.child)}function sm(n,i,a,c,f){if(n===null){var m=a.type;return typeof m=="function"&&!Nh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,om(n,i,m,c,f)):(n=Yu(a.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!(n.lanes&f)){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Qo,a(w,c)&&n.ref===i.ref)return vr(n,i,f)}return i.flags|=1,n=Zr(m,c),n.ref=i.ref,n.return=i,i.child=n}function om(n,i,a,c,f){if(n!==null){var m=n.memoizedProps;if(Qo(m,c)&&n.ref===i.ref)if(Qt=!1,i.pendingProps=c=m,(n.lanes&f)!==0)n.flags&131072&&(Qt=!0);else return i.lanes=n.lanes,vr(n,i,f)}return ch(n,i,a,c,f)}function am(n,i,a){var c=i.pendingProps,f=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Ks,an),an|=a;else{if(!(a&1073741824))return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,We(Ks,an),an|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,We(Ks,an),an|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,We(Ks,an),an|=c;return Bt(n,i,f,a),i.child}function um(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function ch(n,i,a,c,f){var m=Gt(a)?xi:Dt.current;return m=Ls(i,m),Bs(i,f),a=eh(n,i,a,c,m,f),c=th(),n!==null&&!Qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,vr(n,i,f)):(Qe&&c&&Mc(i),i.flags|=1,Bt(n,i,a,f),i.child)}function lm(n,i,a,c,f){if(Gt(a)){var m=!0;Tu(i)}else m=!1;if(Bs(i,f),i.stateNode===null)zu(n,i),Yp(i,a,c),ah(i,a,c,f),c=!0;else if(n===null){var w=i.stateNode,C=i.memoizedProps;w.props=C;var x=w.context,j=a.contextType;typeof j=="object"&&j!==null?j=gn(j):(j=Gt(a)?xi:Dt.current,j=Ls(i,j));var X=a.getDerivedStateFromProps,Y=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";Y||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||x!==j)&&Zp(i,w,c,j),Hr=!1;var Q=i.memoizedState;w.state=Q,Nu(i,c,w,f),x=i.memoizedState,C!==c||Q!==x||qt.current||Hr?(typeof X=="function"&&(oh(i,a,X,c),x=i.memoizedState),(C=Hr||Xp(i,a,C,c,Q,x,j))?(Y||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=x),w.props=c,w.state=x,w.context=j,c=C):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,Cp(n,i),C=i.memoizedProps,j=i.type===i.elementType?C:Vn(i.type,C),w.props=j,Y=i.pendingProps,Q=w.context,x=a.contextType,typeof x=="object"&&x!==null?x=gn(x):(x=Gt(a)?xi:Dt.current,x=Ls(i,x));var ie=a.getDerivedStateFromProps;(X=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==Y||Q!==x)&&Zp(i,w,c,x),Hr=!1,Q=i.memoizedState,w.state=Q,Nu(i,c,w,f);var ue=i.memoizedState;C!==Y||Q!==ue||qt.current||Hr?(typeof ie=="function"&&(oh(i,a,ie,c),ue=i.memoizedState),(j=Hr||Xp(i,a,j,c,Q,ue,x)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ue,x),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ue,x)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ue),w.props=c,w.state=ue,w.context=x,c=j):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),c=!1)}return hh(n,i,a,c,m,f)}function hh(n,i,a,c,f,m){um(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return f&&pp(i,a,!1),vr(n,i,m);c=i.stateNode,xw.current=i;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=zs(i,n.child,null,m),i.child=zs(i,null,C,m)):Bt(n,i,C,m),i.memoizedState=c.state,f&&pp(i,a,!0),i.child}function cm(n){var i=n.stateNode;i.pendingContext?fp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&fp(n,i.context,!1),Gc(n,i.containerInfo)}function hm(n,i,a,c,f){return Us(),jc(f),i.flags|=256,Bt(n,i,a,c),i.child}var fh={dehydrated:null,treeContext:null,retryLane:0};function dh(n){return{baseLanes:n,cachePool:null,transitions:null}}function fm(n,i,a){var c=i.pendingProps,f=Xe.current,m=!1,w=(i.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),We(Xe,f&1),n===null)return zc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(w=c.children,n=c.fallback,m?(c=i.mode,m=i.child,w={mode:"hidden",children:w},!(c&1)&&m!==null?(m.childLanes=0,m.pendingProps=w):m=Zu(w,c,0,null),n=zi(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=dh(a),i.memoizedState=fh,n):ph(i,w));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return Nw(n,i,w,c,C,f,a);if(m){m=c.fallback,w=i.mode,f=n.child,C=f.sibling;var x={mode:"hidden",children:c.children};return!(w&1)&&i.child!==f?(c=i.child,c.childLanes=0,c.pendingProps=x,i.deletions=null):(c=Zr(f,x),c.subtreeFlags=f.subtreeFlags&14680064),C!==null?m=Zr(C,m):(m=zi(m,w,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,w=n.child.memoizedState,w=w===null?dh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,i.memoizedState=fh,c}return m=n.child,n=m.sibling,c=Zr(m,{mode:"visible",children:c.children}),!(i.mode&1)&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function ph(n,i){return i=Zu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Uu(n,i,a,c){return c!==null&&jc(c),zs(i,n.child,null,a),n=ph(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Nw(n,i,a,c,f,m,w){if(a)return i.flags&256?(i.flags&=-257,c=uh(Error(t(422))),Uu(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,f=i.mode,c=Zu({mode:"visible",children:c.children},f,0,null),m=zi(m,f,w,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,i.mode&1&&zs(i,n.child,null,w),i.child.memoizedState=dh(w),i.memoizedState=fh,m);if(!(i.mode&1))return Uu(n,i,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var C=c.dgst;return c=C,m=Error(t(419)),c=uh(m,c,void 0),Uu(n,i,w,c)}if(C=(w&n.childLanes)!==0,Qt||C){if(c=_t,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|w)?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,yr(n,f),Ln(c,n,f,-1))}return xh(),c=uh(Error(t(421))),Uu(n,i,w,c)}return f.data==="$?"?(i.flags|=128,i.child=n.child,i=Ww.bind(null,n),f._reactRetry=i,null):(n=m.treeContext,on=jr(f.nextSibling),sn=i,Qe=!0,Dn=null,n!==null&&(pn[mn++]=mr,pn[mn++]=gr,pn[mn++]=Ni,mr=n.id,gr=n.overflow,Ni=i),i=ph(i,c.children),i.flags|=4096,i)}function dm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Hc(n.return,i,a)}function mh(n,i,a,c,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=f)}function pm(n,i,a){var c=i.pendingProps,f=c.revealOrder,m=c.tail;if(Bt(n,i,c.children,a),c=Xe.current,c&2)c=c&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&dm(n,a,i);else if(n.tag===19)dm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(We(Xe,c),!(i.mode&1))i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Du(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),mh(i,!1,f,a,m);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Du(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}mh(i,!0,a,null,m);break;case"together":mh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function zu(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function vr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Li|=i.lanes,!(a&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Zr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Zr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Dw(n,i,a){switch(i.tag){case 3:cm(i),Us();break;case 5:Rp(i);break;case 1:Gt(i.type)&&Tu(i);break;case 4:Gc(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,f=i.memoizedProps.value;We(Ru,c._currentValue),c._currentValue=f;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(We(Xe,Xe.current&1),i.flags|=128,null):a&i.child.childLanes?fm(n,i,a):(We(Xe,Xe.current&1),n=vr(n,i,a),n!==null?n.sibling:null);We(Xe,Xe.current&1);break;case 19:if(c=(a&i.childLanes)!==0,n.flags&128){if(c)return pm(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(Xe,Xe.current),c)break;return null;case 22:case 23:return i.lanes=0,am(n,i,a)}return vr(n,i,a)}var mm,gh,gm,ym;mm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},gh=function(){},gm=function(n,i,a,c){var f=n.memoizedProps;if(f!==c){n=i.stateNode,Oi(Gn.current);var m=null;switch(a){case"input":f=di(n,f),c=di(n,c),m=[];break;case"select":f=se({},f,{value:void 0}),c=se({},c,{value:void 0}),m=[];break;case"textarea":f=Io(n,f),c=Io(n,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=vu)}xo(a,c);var w;a=null;for(j in f)if(!c.hasOwnProperty(j)&&f.hasOwnProperty(j)&&f[j]!=null)if(j==="style"){var C=f[j];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?m||(m=[]):(m=m||[]).push(j,null));for(j in c){var x=c[j];if(C=f!=null?f[j]:void 0,c.hasOwnProperty(j)&&x!==C&&(x!=null||C!=null))if(j==="style")if(C){for(w in C)!C.hasOwnProperty(w)||x&&x.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in x)x.hasOwnProperty(w)&&C[w]!==x[w]&&(a||(a={}),a[w]=x[w])}else a||(m||(m=[]),m.push(j,a)),a=x;else j==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,C=C?C.__html:void 0,x!=null&&C!==x&&(m=m||[]).push(j,x)):j==="children"?typeof x!="string"&&typeof x!="number"||(m=m||[]).push(j,""+x):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(x!=null&&j==="onScroll"&&He("scroll",n),m||C===x||(m=[])):(m=m||[]).push(j,x))}a&&(m=m||[]).push("style",a);var j=m;(i.updateQueue=j)&&(i.flags|=4)}},ym=function(n,i,a,c){a!==c&&(i.flags|=4)};function ca(n,i){if(!Qe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Vw(n,i,a){var c=i.pendingProps;switch(Fc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return Gt(i.type)&&Eu(),Ot(i),null;case 3:return c=i.stateNode,$s(),Ke(qt),Ke(Dt),Yc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Au(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Dn!==null&&(kh(Dn),Dn=null))),gh(n,i),Ot(i),null;case 5:Qc(i);var f=Oi(sa.current);if(a=i.type,n!==null&&i.stateNode!=null)gm(n,i,a,c,f),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Ot(i),null}if(n=Oi(Gn.current),Au(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[qn]=i,c[ea]=m,n=(i.mode&1)!==0,a){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(f=0;f<Yo.length;f++)He(Yo[f],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":is(c,m),He("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},He("invalid",c);break;case"textarea":os(c,m),He("invalid",c)}xo(a,m),f=null;for(var w in m)if(m.hasOwnProperty(w)){var C=m[w];w==="children"?typeof C=="string"?c.textContent!==C&&(m.suppressHydrationWarning!==!0&&_u(c.textContent,C,n),f=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&_u(c.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&He("scroll",c)}switch(a){case"input":rr(c),Wa(c,m,!0);break;case"textarea":rr(c),Co(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=vu)}c=f,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ut(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[qn]=i,n[ea]=c,mm(n,i,!1,!1),i.stateNode=n;e:{switch(w=No(a,c),a){case"dialog":He("cancel",n),He("close",n),f=c;break;case"iframe":case"object":case"embed":He("load",n),f=c;break;case"video":case"audio":for(f=0;f<Yo.length;f++)He(Yo[f],n);f=c;break;case"source":He("error",n),f=c;break;case"img":case"image":case"link":He("error",n),He("load",n),f=c;break;case"details":He("toggle",n),f=c;break;case"input":is(n,c),f=di(n,c),He("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=se({},c,{value:void 0}),He("invalid",n);break;case"textarea":os(n,c),f=Io(n,c),He("invalid",n);break;default:f=c}xo(a,f),C=f;for(m in C)if(C.hasOwnProperty(m)){var x=C[m];m==="style"?Ro(n,x):m==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Ao(n,x)):m==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&xr(n,x):typeof x=="number"&&xr(n,""+x):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?x!=null&&m==="onScroll"&&He("scroll",n):x!=null&&G(n,m,x,w))}switch(a){case"input":rr(n),Wa(n,c,!1);break;case"textarea":rr(n),Co(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Me(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?sr(n,!!c.multiple,m,!1):c.defaultValue!=null&&sr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=vu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ot(i),null;case 6:if(n&&i.stateNode!=null)ym(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Oi(sa.current),Oi(Gn.current),Au(i)){if(c=i.stateNode,a=i.memoizedProps,c[qn]=i,(m=c.nodeValue!==a)&&(n=sn,n!==null))switch(n.tag){case 3:_u(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&_u(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[qn]=i,i.stateNode=c}return Ot(i),null;case 13:if(Ke(Xe),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qe&&on!==null&&i.mode&1&&!(i.flags&128))wp(),Us(),i.flags|=98560,m=!1;else if(m=Au(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[qn]=i}else Us(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Ot(i),m=!1}else Dn!==null&&(kh(Dn),Dn=null),m=!0;if(!m)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,i.mode&1&&(n===null||Xe.current&1?ft===0&&(ft=3):xh())),i.updateQueue!==null&&(i.flags|=4),Ot(i),null);case 4:return $s(),gh(n,i),n===null&&Zo(i.stateNode.containerInfo),Ot(i),null;case 10:return Wc(i.type._context),Ot(i),null;case 17:return Gt(i.type)&&Eu(),Ot(i),null;case 19:if(Ke(Xe),m=i.memoizedState,m===null)return Ot(i),null;if(c=(i.flags&128)!==0,w=m.rendering,w===null)if(c)ca(m,!1);else{if(ft!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(w=Du(n),w!==null){for(i.flags|=128,ca(m,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Xe,Xe.current&1|2),i.child}n=n.sibling}m.tail!==null&&$e()>qs&&(i.flags|=128,c=!0,ca(m,!1),i.lanes=4194304)}else{if(!c)if(n=Du(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),ca(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Qe)return Ot(i),null}else 2*$e()-m.renderingStartTime>qs&&a!==1073741824&&(i.flags|=128,c=!0,ca(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(a=m.last,a!==null?a.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=$e(),i.sibling=null,a=Xe.current,We(Xe,c?a&1|2:a&1),i):(Ot(i),null);case 22:case 23:return Ph(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&i.mode&1?an&1073741824&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Ow(n,i){switch(Fc(i),i.tag){case 1:return Gt(i.type)&&Eu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return $s(),Ke(qt),Ke(Dt),Yc(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return Qc(i),null;case 13:if(Ke(Xe),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Us()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ke(Xe),null;case 4:return $s(),null;case 10:return Wc(i.type._context),null;case 22:case 23:return Ph(),null;case 24:return null;default:return null}}var ju=!1,bt=!1,bw=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Hs(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Je(n,i,c)}else a.current=null}function yh(n,i,a){try{a()}catch(c){Je(n,i,c)}}var _m=!1;function Lw(n,i){if(Pc=Fr,n=Xd(),Ec(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,C=-1,x=-1,j=0,X=0,Y=n,Q=null;t:for(;;){for(var ie;Y!==a||f!==0&&Y.nodeType!==3||(C=w+f),Y!==m||c!==0&&Y.nodeType!==3||(x=w+c),Y.nodeType===3&&(w+=Y.nodeValue.length),(ie=Y.firstChild)!==null;)Q=Y,Y=ie;for(;;){if(Y===n)break t;if(Q===a&&++j===f&&(C=w),Q===m&&++X===c&&(x=w),(ie=Y.nextSibling)!==null)break;Y=Q,Q=Y.parentNode}Y=ie}a=C===-1||x===-1?null:{start:C,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(xc={focusedElem:n,selectionRange:a},Fr=!1,ae=i;ae!==null;)if(i=ae,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ae=n;else for(;ae!==null;){i=ae;try{var ue=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var he=ue.memoizedProps,nt=ue.memoizedState,U=i.stateNode,V=U.getSnapshotBeforeUpdate(i.elementType===i.type?he:Vn(i.type,he),nt);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){Je(i,i.return,J)}if(n=i.sibling,n!==null){n.return=i.return,ae=n;break}ae=i.return}return ue=_m,_m=!1,ue}function ha(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var m=f.destroy;f.destroy=void 0,m!==void 0&&yh(i,a,m)}f=f.next}while(f!==c)}}function Bu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function _h(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function vm(n){var i=n.alternate;i!==null&&(n.alternate=null,vm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[qn],delete i[ea],delete i[Oc],delete i[_w],delete i[vw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function wm(n){return n.tag===5||n.tag===3||n.tag===4}function Em(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||wm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=vu));else if(c!==4&&(n=n.child,n!==null))for(vh(n,i,a),n=n.sibling;n!==null;)vh(n,i,a),n=n.sibling}function wh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(wh(n,i,a),n=n.sibling;n!==null;)wh(n,i,a),n=n.sibling}var It=null,On=!1;function qr(n,i,a){for(a=a.child;a!==null;)Tm(n,i,a),a=a.sibling}function Tm(n,i,a){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Ti,a)}catch{}switch(a.tag){case 5:bt||Hs(a,i);case 6:var c=It,f=On;It=null,qr(n,i,a),It=c,On=f,It!==null&&(On?(n=It,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):It.removeChild(a.stateNode));break;case 18:It!==null&&(On?(n=It,a=a.stateNode,n.nodeType===8?Vc(n.parentNode,a):n.nodeType===1&&Vc(n,a),Pn(n)):Vc(It,a.stateNode));break;case 4:c=It,f=On,It=a.stateNode.containerInfo,On=!0,qr(n,i,a),It=c,On=f;break;case 0:case 11:case 14:case 15:if(!bt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,w=m.destroy;m=m.tag,w!==void 0&&(m&2||m&4)&&yh(a,i,w),f=f.next}while(f!==c)}qr(n,i,a);break;case 1:if(!bt&&(Hs(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){Je(a,i,C)}qr(n,i,a);break;case 21:qr(n,i,a);break;case 22:a.mode&1?(bt=(c=bt)||a.memoizedState!==null,qr(n,i,a),bt=c):qr(n,i,a);break;default:qr(n,i,a)}}function Sm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new bw),i.forEach(function(c){var f=Hw.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function bn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var m=n,w=i,C=w;e:for(;C!==null;){switch(C.tag){case 5:It=C.stateNode,On=!1;break e;case 3:It=C.stateNode.containerInfo,On=!0;break e;case 4:It=C.stateNode.containerInfo,On=!0;break e}C=C.return}if(It===null)throw Error(t(160));Tm(m,w,f),It=null,On=!1;var x=f.alternate;x!==null&&(x.return=null),f.return=null}catch(j){Je(f,i,j)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Im(i,n),i=i.sibling}function Im(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bn(i,n),Xn(n),c&4){try{ha(3,n,n.return),Bu(3,n)}catch(he){Je(n,n.return,he)}try{ha(5,n,n.return)}catch(he){Je(n,n.return,he)}}break;case 1:bn(i,n),Xn(n),c&512&&a!==null&&Hs(a,a.return);break;case 5:if(bn(i,n),Xn(n),c&512&&a!==null&&Hs(a,a.return),n.flags&32){var f=n.stateNode;try{xr(f,"")}catch(he){Je(n,n.return,he)}}if(c&4&&(f=n.stateNode,f!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,C=n.type,x=n.updateQueue;if(n.updateQueue=null,x!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&To(f,m),No(C,w);var j=No(C,m);for(w=0;w<x.length;w+=2){var X=x[w],Y=x[w+1];X==="style"?Ro(f,Y):X==="dangerouslySetInnerHTML"?Ao(f,Y):X==="children"?xr(f,Y):G(f,X,Y,j)}switch(C){case"input":So(f,m);break;case"textarea":as(f,m);break;case"select":var Q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var ie=m.value;ie!=null?sr(f,!!m.multiple,ie,!1):Q!==!!m.multiple&&(m.defaultValue!=null?sr(f,!!m.multiple,m.defaultValue,!0):sr(f,!!m.multiple,m.multiple?[]:"",!1))}f[ea]=m}catch(he){Je(n,n.return,he)}}break;case 6:if(bn(i,n),Xn(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,m=n.memoizedProps;try{f.nodeValue=m}catch(he){Je(n,n.return,he)}}break;case 3:if(bn(i,n),Xn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Pn(i.containerInfo)}catch(he){Je(n,n.return,he)}break;case 4:bn(i,n),Xn(n);break;case 13:bn(i,n),Xn(n),f=n.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Sh=$e())),c&4&&Sm(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(bt=(j=bt)||X,bn(i,n),bt=j):bn(i,n),Xn(n),c&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!X&&n.mode&1)for(ae=n,X=n.child;X!==null;){for(Y=ae=X;ae!==null;){switch(Q=ae,ie=Q.child,Q.tag){case 0:case 11:case 14:case 15:ha(4,Q,Q.return);break;case 1:Hs(Q,Q.return);var ue=Q.stateNode;if(typeof ue.componentWillUnmount=="function"){c=Q,a=Q.return;try{i=c,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(he){Je(c,a,he)}}break;case 5:Hs(Q,Q.return);break;case 22:if(Q.memoizedState!==null){km(Y);continue}}ie!==null?(ie.return=Q,ae=ie):km(Y)}X=X.sibling}e:for(X=null,Y=n;;){if(Y.tag===5){if(X===null){X=Y;try{f=Y.stateNode,j?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=Y.stateNode,x=Y.memoizedProps.style,w=x!=null&&x.hasOwnProperty("display")?x.display:null,C.style.display=ko("display",w))}catch(he){Je(n,n.return,he)}}}else if(Y.tag===6){if(X===null)try{Y.stateNode.nodeValue=j?"":Y.memoizedProps}catch(he){Je(n,n.return,he)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;X===Y&&(X=null),Y=Y.return}X===Y&&(X=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:bn(i,n),Xn(n),c&4&&Sm(n);break;case 21:break;default:bn(i,n),Xn(n)}}function Xn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(wm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(xr(f,""),c.flags&=-33);var m=Em(n);wh(n,m,f);break;case 3:case 4:var w=c.stateNode.containerInfo,C=Em(n);vh(n,C,w);break;default:throw Error(t(161))}}catch(x){Je(n,n.return,x)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Mw(n,i,a){ae=n,Cm(n)}function Cm(n,i,a){for(var c=(n.mode&1)!==0;ae!==null;){var f=ae,m=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||ju;if(!w){var C=f.alternate,x=C!==null&&C.memoizedState!==null||bt;C=ju;var j=bt;if(ju=w,(bt=x)&&!j)for(ae=f;ae!==null;)w=ae,x=w.child,w.tag===22&&w.memoizedState!==null?Rm(f):x!==null?(x.return=w,ae=x):Rm(f);for(;m!==null;)ae=m,Cm(m),m=m.sibling;ae=f,ju=C,bt=j}Am(n)}else f.subtreeFlags&8772&&m!==null?(m.return=f,ae=m):Am(n)}}function Am(n){for(;ae!==null;){var i=ae;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:bt||Bu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!bt)if(a===null)c.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:Vn(i.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&kp(i,m,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}kp(i,w,a)}break;case 5:var C=i.stateNode;if(a===null&&i.flags&4){a=C;var x=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var j=i.alternate;if(j!==null){var X=j.memoizedState;if(X!==null){var Y=X.dehydrated;Y!==null&&Pn(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bt||i.flags&512&&_h(i)}catch(Q){Je(i,i.return,Q)}}if(i===n){ae=null;break}if(a=i.sibling,a!==null){a.return=i.return,ae=a;break}ae=i.return}}function km(n){for(;ae!==null;){var i=ae;if(i===n){ae=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ae=a;break}ae=i.return}}function Rm(n){for(;ae!==null;){var i=ae;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Bu(4,i)}catch(x){Je(i,a,x)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var f=i.return;try{c.componentDidMount()}catch(x){Je(i,f,x)}}var m=i.return;try{_h(i)}catch(x){Je(i,m,x)}break;case 5:var w=i.return;try{_h(i)}catch(x){Je(i,w,x)}}}catch(x){Je(i,i.return,x)}if(i===n){ae=null;break}var C=i.sibling;if(C!==null){C.return=i.return,ae=C;break}ae=i.return}}var Fw=Math.ceil,$u=W.ReactCurrentDispatcher,Eh=W.ReactCurrentOwner,_n=W.ReactCurrentBatchConfig,Oe=0,_t=null,st=null,Ct=0,an=0,Ks=Br(0),ft=0,fa=null,Li=0,Wu=0,Th=0,da=null,Xt=null,Sh=0,qs=1/0,wr=null,Hu=!1,Ih=null,Gr=null,Ku=!1,Qr=null,qu=0,pa=0,Ch=null,Gu=-1,Qu=0;function $t(){return Oe&6?$e():Gu!==-1?Gu:Gu=$e()}function Xr(n){return n.mode&1?Oe&2&&Ct!==0?Ct&-Ct:Ew.transition!==null?(Qu===0&&(Qu=Ii()),Qu):(n=Re,n!==0||(n=window.event,n=n===void 0?16:Bo(n.type)),n):1}function Ln(n,i,a,c){if(50<pa)throw pa=0,Ch=null,Error(t(185));Or(n,a,c),(!(Oe&2)||n!==_t)&&(n===_t&&(!(Oe&2)&&(Wu|=a),ft===4&&Yr(n,Ct)),Yt(n,c),a===1&&Oe===0&&!(i.mode&1)&&(qs=$e()+500,Su&&Wr()))}function Yt(n,i){var a=n.callbackNode;ur(n,i);var c=Si(n,n===_t?Ct:0);if(c===0)a!==null&&Mo(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Mo(a),i===1)n.tag===0?ww(xm.bind(null,n)):mp(xm.bind(null,n)),gw(function(){!(Oe&6)&&Wr()}),a=null;else{switch(Lr(c)){case 1:a=Ei;break;case 4:a=Nr;break;case 16:a=hn;break;case 536870912:a=Qa;break;default:a=hn}a=Fm(a,Pm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Pm(n,i){if(Gu=-1,Qu=0,Oe&6)throw Error(t(327));var a=n.callbackNode;if(Gs()&&n.callbackNode!==a)return null;var c=Si(n,n===_t?Ct:0);if(c===0)return null;if(c&30||c&n.expiredLanes||i)i=Xu(n,c);else{i=c;var f=Oe;Oe|=2;var m=Dm();(_t!==n||Ct!==i)&&(wr=null,qs=$e()+500,Fi(n,i));do try{jw();break}catch(C){Nm(n,C)}while(!0);$c(),$u.current=m,Oe=f,st!==null?i=0:(_t=null,Ct=0,i=ft)}if(i!==0){if(i===2&&(f=tn(n),f!==0&&(c=f,i=Ah(n,f))),i===1)throw a=fa,Fi(n,0),Yr(n,c),Yt(n,$e()),a;if(i===6)Yr(n,c);else{if(f=n.current.alternate,!(c&30)&&!Uw(f)&&(i=Xu(n,c),i===2&&(m=tn(n),m!==0&&(c=m,i=Ah(n,m))),i===1))throw a=fa,Fi(n,0),Yr(n,c),Yt(n,$e()),a;switch(n.finishedWork=f,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Ui(n,Xt,wr);break;case 3:if(Yr(n,c),(c&130023424)===c&&(i=Sh+500-$e(),10<i)){if(Si(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){$t(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Dc(Ui.bind(null,n,Xt,wr),i);break}Ui(n,Xt,wr);break;case 4:if(Yr(n,c),(c&4194240)===c)break;for(i=n.eventTimes,f=-1;0<c;){var w=31-zt(c);m=1<<w,w=i[w],w>f&&(f=w),c&=~m}if(c=f,c=$e()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Fw(c/1960))-c,10<c){n.timeoutHandle=Dc(Ui.bind(null,n,Xt,wr),c);break}Ui(n,Xt,wr);break;case 5:Ui(n,Xt,wr);break;default:throw Error(t(329))}}}return Yt(n,$e()),n.callbackNode===a?Pm.bind(null,n):null}function Ah(n,i){var a=da;return n.current.memoizedState.isDehydrated&&(Fi(n,i).flags|=256),n=Xu(n,i),n!==2&&(i=Xt,Xt=a,i!==null&&kh(i)),n}function kh(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function Uw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!Nn(m(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Yr(n,i){for(i&=~Th,i&=~Wu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-zt(i),c=1<<a;n[a]=-1,i&=~c}}function xm(n){if(Oe&6)throw Error(t(327));Gs();var i=Si(n,0);if(!(i&1))return Yt(n,$e()),null;var a=Xu(n,i);if(n.tag!==0&&a===2){var c=tn(n);c!==0&&(i=c,a=Ah(n,c))}if(a===1)throw a=fa,Fi(n,0),Yr(n,i),Yt(n,$e()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Ui(n,Xt,wr),Yt(n,$e()),null}function Rh(n,i){var a=Oe;Oe|=1;try{return n(i)}finally{Oe=a,Oe===0&&(qs=$e()+500,Su&&Wr())}}function Mi(n){Qr!==null&&Qr.tag===0&&!(Oe&6)&&Gs();var i=Oe;Oe|=1;var a=_n.transition,c=Re;try{if(_n.transition=null,Re=1,n)return n()}finally{Re=c,_n.transition=a,Oe=i,!(Oe&6)&&Wr()}}function Ph(){an=Ks.current,Ke(Ks)}function Fi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,mw(a)),st!==null)for(a=st.return;a!==null;){var c=a;switch(Fc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Eu();break;case 3:$s(),Ke(qt),Ke(Dt),Yc();break;case 5:Qc(c);break;case 4:$s();break;case 13:Ke(Xe);break;case 19:Ke(Xe);break;case 10:Wc(c.type._context);break;case 22:case 23:Ph()}a=a.return}if(_t=n,st=n=Zr(n.current,null),Ct=an=i,ft=0,fa=null,Th=Wu=Li=0,Xt=da=null,Vi!==null){for(i=0;i<Vi.length;i++)if(a=Vi[i],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=f,c.next=w}a.pending=c}Vi=null}return n}function Nm(n,i){do{var a=st;try{if($c(),Vu.current=Mu,Ou){for(var c=Ye.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Ou=!1}if(bi=0,yt=ht=Ye=null,oa=!1,aa=0,Eh.current=null,a===null||a.return===null){ft=1,fa=i,st=null;break}e:{var m=n,w=a.return,C=a,x=i;if(i=Ct,C.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var j=x,X=C,Y=X.tag;if(!(X.mode&1)&&(Y===0||Y===11||Y===15)){var Q=X.alternate;Q?(X.updateQueue=Q.updateQueue,X.memoizedState=Q.memoizedState,X.lanes=Q.lanes):(X.updateQueue=null,X.memoizedState=null)}var ie=nm(w);if(ie!==null){ie.flags&=-257,rm(ie,w,C,m,i),ie.mode&1&&tm(m,j,i),i=ie,x=j;var ue=i.updateQueue;if(ue===null){var he=new Set;he.add(x),i.updateQueue=he}else ue.add(x);break e}else{if(!(i&1)){tm(m,j,i),xh();break e}x=Error(t(426))}}else if(Qe&&C.mode&1){var nt=nm(w);if(nt!==null){!(nt.flags&65536)&&(nt.flags|=256),rm(nt,w,C,m,i),jc(Ws(x,C));break e}}m=x=Ws(x,C),ft!==4&&(ft=2),da===null?da=[m]:da.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var U=Jp(m,x,i);Ap(m,U);break e;case 1:C=x;var V=m.type,z=m.stateNode;if(!(m.flags&128)&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Gr===null||!Gr.has(z)))){m.flags|=65536,i&=-i,m.lanes|=i;var J=em(m,C,i);Ap(m,J);break e}}m=m.return}while(m!==null)}Om(a)}catch(fe){i=fe,st===a&&a!==null&&(st=a=a.return);continue}break}while(!0)}function Dm(){var n=$u.current;return $u.current=Mu,n===null?Mu:n}function xh(){(ft===0||ft===3||ft===2)&&(ft=4),_t===null||!(Li&268435455)&&!(Wu&268435455)||Yr(_t,Ct)}function Xu(n,i){var a=Oe;Oe|=2;var c=Dm();(_t!==n||Ct!==i)&&(wr=null,Fi(n,i));do try{zw();break}catch(f){Nm(n,f)}while(!0);if($c(),Oe=a,$u.current=c,st!==null)throw Error(t(261));return _t=null,Ct=0,ft}function zw(){for(;st!==null;)Vm(st)}function jw(){for(;st!==null&&!qa();)Vm(st)}function Vm(n){var i=Mm(n.alternate,n,an);n.memoizedProps=n.pendingProps,i===null?Om(n):st=i,Eh.current=null}function Om(n){var i=n;do{var a=i.alternate;if(n=i.return,i.flags&32768){if(a=Ow(a,i),a!==null){a.flags&=32767,st=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ft=6,st=null;return}}else if(a=Vw(a,i,an),a!==null){st=a;return}if(i=i.sibling,i!==null){st=i;return}st=i=n}while(i!==null);ft===0&&(ft=5)}function Ui(n,i,a){var c=Re,f=_n.transition;try{_n.transition=null,Re=1,Bw(n,i,a,c)}finally{_n.transition=f,Re=c}return null}function Bw(n,i,a,c){do Gs();while(Qr!==null);if(Oe&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(je(n,m),n===_t&&(st=_t=null,Ct=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Ku||(Ku=!0,Fm(hn,function(){return Gs(),null})),m=(a.flags&15990)!==0,a.subtreeFlags&15990||m){m=_n.transition,_n.transition=null;var w=Re;Re=1;var C=Oe;Oe|=4,Eh.current=null,Lw(n,a),Im(a,n),uw(xc),Fr=!!Pc,xc=Pc=null,n.current=a,Mw(a),dc(),Oe=C,Re=w,_n.transition=m}else n.current=a;if(Ku&&(Ku=!1,Qr=n,qu=f),m=n.pendingLanes,m===0&&(Gr=null),Xa(a.stateNode),Yt(n,$e()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)f=i[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Hu)throw Hu=!1,n=Ih,Ih=null,n;return qu&1&&n.tag!==0&&Gs(),m=n.pendingLanes,m&1?n===Ch?pa++:(pa=0,Ch=n):pa=0,Wr(),null}function Gs(){if(Qr!==null){var n=Lr(qu),i=_n.transition,a=Re;try{if(_n.transition=null,Re=16>n?16:n,Qr===null)var c=!1;else{if(n=Qr,Qr=null,qu=0,Oe&6)throw Error(t(331));var f=Oe;for(Oe|=4,ae=n.current;ae!==null;){var m=ae,w=m.child;if(ae.flags&16){var C=m.deletions;if(C!==null){for(var x=0;x<C.length;x++){var j=C[x];for(ae=j;ae!==null;){var X=ae;switch(X.tag){case 0:case 11:case 15:ha(8,X,m)}var Y=X.child;if(Y!==null)Y.return=X,ae=Y;else for(;ae!==null;){X=ae;var Q=X.sibling,ie=X.return;if(vm(X),X===j){ae=null;break}if(Q!==null){Q.return=ie,ae=Q;break}ae=ie}}}var ue=m.alternate;if(ue!==null){var he=ue.child;if(he!==null){ue.child=null;do{var nt=he.sibling;he.sibling=null,he=nt}while(he!==null)}}ae=m}}if(m.subtreeFlags&2064&&w!==null)w.return=m,ae=w;else e:for(;ae!==null;){if(m=ae,m.flags&2048)switch(m.tag){case 0:case 11:case 15:ha(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,ae=U;break e}ae=m.return}}var V=n.current;for(ae=V;ae!==null;){w=ae;var z=w.child;if(w.subtreeFlags&2064&&z!==null)z.return=w,ae=z;else e:for(w=V;ae!==null;){if(C=ae,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:Bu(9,C)}}catch(fe){Je(C,C.return,fe)}if(C===w){ae=null;break e}var J=C.sibling;if(J!==null){J.return=C.return,ae=J;break e}ae=C.return}}if(Oe=f,Wr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Ti,n)}catch{}c=!0}return c}finally{Re=a,_n.transition=i}}return!1}function bm(n,i,a){i=Ws(a,i),i=Jp(n,i,1),n=Kr(n,i,1),i=$t(),n!==null&&(Or(n,1,i),Yt(n,i))}function Je(n,i,a){if(n.tag===3)bm(n,n,a);else for(;i!==null;){if(i.tag===3){bm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gr===null||!Gr.has(c))){n=Ws(a,n),n=em(i,n,1),i=Kr(i,n,1),n=$t(),i!==null&&(Or(i,1,n),Yt(i,n));break}}i=i.return}}function $w(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=$t(),n.pingedLanes|=n.suspendedLanes&a,_t===n&&(Ct&a)===a&&(ft===4||ft===3&&(Ct&130023424)===Ct&&500>$e()-Sh?Fi(n,0):Th|=a),Yt(n,i)}function Lm(n,i){i===0&&(n.mode&1?(i=ys,ys<<=1,!(ys&130023424)&&(ys=4194304)):i=1);var a=$t();n=yr(n,i),n!==null&&(Or(n,i,a),Yt(n,a))}function Ww(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Lm(n,a)}function Hw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Lm(n,a)}var Mm;Mm=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||qt.current)Qt=!0;else{if(!(n.lanes&a)&&!(i.flags&128))return Qt=!1,Dw(n,i,a);Qt=!!(n.flags&131072)}else Qt=!1,Qe&&i.flags&1048576&&gp(i,Cu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;zu(n,i),n=i.pendingProps;var f=Ls(i,Dt.current);Bs(i,a),f=eh(null,i,c,n,f,a);var m=th();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Gt(c)?(m=!0,Tu(i)):m=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,qc(i),f.updater=Fu,i.stateNode=f,f._reactInternals=i,ah(i,c,n,a),i=hh(null,i,c,!0,m,a)):(i.tag=0,Qe&&m&&Mc(i),Bt(null,i,f,a),i=i.child),i;case 16:c=i.elementType;e:{switch(zu(n,i),n=i.pendingProps,f=c._init,c=f(c._payload),i.type=c,f=i.tag=qw(c),n=Vn(c,n),f){case 0:i=ch(null,i,c,n,a);break e;case 1:i=lm(null,i,c,n,a);break e;case 11:i=im(null,i,c,n,a);break e;case 14:i=sm(null,i,c,Vn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Vn(c,f),ch(n,i,c,f,a);case 1:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Vn(c,f),lm(n,i,c,f,a);case 3:e:{if(cm(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,f=m.element,Cp(n,i),Nu(i,c,null,a);var w=i.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){f=Ws(Error(t(423)),i),i=hm(n,i,c,a,f);break e}else if(c!==f){f=Ws(Error(t(424)),i),i=hm(n,i,c,a,f);break e}else for(on=jr(i.stateNode.containerInfo.firstChild),sn=i,Qe=!0,Dn=null,a=Sp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Us(),c===f){i=vr(n,i,a);break e}Bt(n,i,c,a)}i=i.child}return i;case 5:return Rp(i),n===null&&zc(i),c=i.type,f=i.pendingProps,m=n!==null?n.memoizedProps:null,w=f.children,Nc(c,f)?w=null:m!==null&&Nc(c,m)&&(i.flags|=32),um(n,i),Bt(n,i,w,a),i.child;case 6:return n===null&&zc(i),null;case 13:return fm(n,i,a);case 4:return Gc(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=zs(i,null,c,a):Bt(n,i,c,a),i.child;case 11:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Vn(c,f),im(n,i,c,f,a);case 7:return Bt(n,i,i.pendingProps,a),i.child;case 8:return Bt(n,i,i.pendingProps.children,a),i.child;case 12:return Bt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,f=i.pendingProps,m=i.memoizedProps,w=f.value,We(Ru,c._currentValue),c._currentValue=w,m!==null)if(Nn(m.value,w)){if(m.children===f.children&&!qt.current){i=vr(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var C=m.dependencies;if(C!==null){w=m.child;for(var x=C.firstContext;x!==null;){if(x.context===c){if(m.tag===1){x=_r(-1,a&-a),x.tag=2;var j=m.updateQueue;if(j!==null){j=j.shared;var X=j.pending;X===null?x.next=x:(x.next=X.next,X.next=x),j.pending=x}}m.lanes|=a,x=m.alternate,x!==null&&(x.lanes|=a),Hc(m.return,a,i),C.lanes|=a;break}x=x.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),Hc(w,a,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Bt(n,i,f.children,a),i=i.child}return i;case 9:return f=i.type,c=i.pendingProps.children,Bs(i,a),f=gn(f),c=c(f),i.flags|=1,Bt(n,i,c,a),i.child;case 14:return c=i.type,f=Vn(c,i.pendingProps),f=Vn(c.type,f),sm(n,i,c,f,a);case 15:return om(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Vn(c,f),zu(n,i),i.tag=1,Gt(c)?(n=!0,Tu(i)):n=!1,Bs(i,a),Yp(i,c,f),ah(i,c,f,a),hh(null,i,c,!0,n,a);case 19:return pm(n,i,a);case 22:return am(n,i,a)}throw Error(t(156,i.tag))};function Fm(n,i){return ms(n,i)}function Kw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,i,a,c){return new Kw(n,i,a,c)}function Nh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qw(n){if(typeof n=="function")return Nh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===xt)return 14}return 2}function Zr(n,i){var a=n.alternate;return a===null?(a=vn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Yu(n,i,a,c,f,m){var w=2;if(c=n,typeof n=="function")Nh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case R:return zi(a.children,f,m,i);case S:w=8,f|=8;break;case A:return n=vn(12,a,i,f|2),n.elementType=A,n.lanes=m,n;case k:return n=vn(13,a,i,f),n.elementType=k,n.lanes=m,n;case et:return n=vn(19,a,i,f),n.elementType=et,n.lanes=m,n;case ze:return Zu(a,f,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:w=10;break e;case D:w=9;break e;case O:w=11;break e;case xt:w=14;break e;case Nt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=vn(w,a,i,f),i.elementType=n,i.type=c,i.lanes=m,i}function zi(n,i,a,c){return n=vn(7,n,c,i),n.lanes=a,n}function Zu(n,i,a,c){return n=vn(22,n,c,i),n.elementType=ze,n.lanes=a,n.stateNode={isHidden:!1},n}function Dh(n,i,a){return n=vn(6,n,null,i),n.lanes=a,n}function Vh(n,i,a){return i=vn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Gw(n,i,a,c,f){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vr(0),this.expirationTimes=Vr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Oh(n,i,a,c,f,m,w,C,x){return n=new Gw(n,i,a,C,x),i===1?(i=1,m===!0&&(i|=8)):i=0,m=vn(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},qc(m),n}function Qw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Um(n){if(!n)return $r;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Gt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Gt(a))return dp(n,a,i)}return i}function zm(n,i,a,c,f,m,w,C,x){return n=Oh(a,c,!0,n,f,m,w,C,x),n.context=Um(null),a=n.current,c=$t(),f=Xr(a),m=_r(c,f),m.callback=i??null,Kr(a,m,f),n.current.lanes=f,Or(n,f,c),Yt(n,c),n}function Ju(n,i,a,c){var f=i.current,m=$t(),w=Xr(f);return a=Um(a),i.context===null?i.context=a:i.pendingContext=a,i=_r(m,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Kr(f,i,w),n!==null&&(Ln(n,f,w,m),xu(n,f,w)),w}function el(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function jm(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function bh(n,i){jm(n,i),(n=n.alternate)&&jm(n,i)}var Bm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Lh(n){this._internalRoot=n}tl.prototype.render=Lh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Ju(n,i,null,null)},tl.prototype.unmount=Lh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Mi(function(){Ju(null,n,null,null)}),i[dr]=null}};function tl(n){this._internalRoot=n}tl.prototype.unstable_scheduleHydration=function(n){if(n){var i=tu();n={blockedOn:null,target:n,priority:i};for(var a=0;a<$n.length&&i!==0&&i<$n[a].priority;a++);$n.splice(a,0,n),a===0&&iu(n)}};function Mh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function nl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $m(){}function Xw(n,i,a,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var j=el(w);m.call(j)}}var w=zm(i,c,n,0,null,!1,!1,"",$m);return n._reactRootContainer=w,n[dr]=w.current,Zo(n.nodeType===8?n.parentNode:n),Mi(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var C=c;c=function(){var j=el(x);C.call(j)}}var x=Oh(n,0,!1,null,null,!1,!1,"",$m);return n._reactRootContainer=x,n[dr]=x.current,Zo(n.nodeType===8?n.parentNode:n),Mi(function(){Ju(i,x,a,c)}),x}function rl(n,i,a,c,f){var m=a._reactRootContainer;if(m){var w=m;if(typeof f=="function"){var C=f;f=function(){var x=el(w);C.call(x)}}Ju(i,w,n,f)}else w=Xw(a,i,n,f,c);return el(w)}Ja=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Dr(i.pendingLanes);a!==0&&(br(i,a|1),Yt(i,$e()),!(Oe&6)&&(qs=$e()+500,Wr()))}break;case 13:Mi(function(){var c=yr(n,1);if(c!==null){var f=$t();Ln(c,n,1,f)}}),bh(n,1)}},_s=function(n){if(n.tag===13){var i=yr(n,134217728);if(i!==null){var a=$t();Ln(i,n,134217728,a)}bh(n,134217728)}},eu=function(n){if(n.tag===13){var i=Xr(n),a=yr(n,i);if(a!==null){var c=$t();Ln(a,n,i,c)}bh(n,i)}},tu=function(){return Re},nu=function(n,i){var a=Re;try{return Re=n,i()}finally{Re=a}},ls=function(n,i,a){switch(i){case"input":if(So(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var f=wu(c);if(!f)throw Error(t(90));rs(c),So(c,f)}}}break;case"textarea":as(n,a);break;case"select":i=a.value,i!=null&&sr(n,!!a.multiple,i,!1)}},yi=Rh,Vo=Mi;var Yw={usingClientEntryPoint:!1,Events:[ta,Os,wu,jn,Do,Rh]},ma={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zw={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Lo(n),n===null?null:n.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{Ti=il.inject(Zw),en=il}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yw,Zt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mh(i))throw Error(t(200));return Qw(n,i,null,a)},Zt.createRoot=function(n,i){if(!Mh(n))throw Error(t(299));var a=!1,c="",f=Bm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Oh(n,1,!1,null,null,a,!1,c,f),n[dr]=i.current,Zo(n.nodeType===8?n.parentNode:n),new Lh(i)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Lo(i),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return Mi(n)},Zt.hydrate=function(n,i,a){if(!nl(i))throw Error(t(200));return rl(null,n,i,!0,a)},Zt.hydrateRoot=function(n,i,a){if(!Mh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,m="",w=Bm;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=zm(i,null,n,1,a??null,f,!1,m,w),n[dr]=i.current,Zo(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new tl(i)},Zt.render=function(n,i,a){if(!nl(i))throw Error(t(200));return rl(null,n,i,!1,a)},Zt.unmountComponentAtNode=function(n){if(!nl(n))throw Error(t(40));return n._reactRootContainer?(Mi(function(){rl(null,null,n,!1,function(){n._reactRootContainer=null,n[dr]=null})}),!0):!1},Zt.unstable_batchedUpdates=Rh,Zt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!nl(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return rl(n,i,a,!1,c)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Ym;function by(){if(Ym)return zh.exports;Ym=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zh.exports=sE(),zh.exports}var Zm;function oE(){if(Zm)return sl;Zm=1;var r=by();return sl.createRoot=r.createRoot,sl.hydrateRoot=r.hydrateRoot,sl}var aE=oE(),Pe=Hl();const Wt=Oy(Pe);var $h={exports:{}},Wh={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function uE(){if(Jm)return Wh;Jm=1;var r=Hl();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,s=r.useSyncExternalStore,o=r.useRef,u=r.useEffect,h=r.useMemo,d=r.useDebugValue;return Wh.useSyncExternalStoreWithSelector=function(g,y,v,E,I){var N=o(null);if(N.current===null){var F={hasValue:!1,value:null};N.current=F}else F=N.current;N=h(function(){function M(ce){if(!Z){if(Z=!0,ee=ce,ce=E(ce),I!==void 0&&F.hasValue){var ne=F.value;if(I(ne,ce))return G=ne}return G=ce}if(ne=G,t(ee,ce))return ne;var R=E(ce);return I!==void 0&&I(ne,R)?(ee=ce,ne):(ee=ce,G=R)}var Z=!1,ee,G,W=v===void 0?null:v;return[function(){return M(y())},W===null?void 0:function(){return M(W())}]},[y,v,E,I]);var $=s(g,N[0],N[1]);return u(function(){F.hasValue=!0,F.value=$},[$]),d($),$},Wh}var eg;function lE(){return eg||(eg=1,$h.exports=uE()),$h.exports}var cE=lE();function hE(r){r()}function fE(){let r=null,e=null;return{clear(){r=null,e=null},notify(){hE(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let s=r;for(;s;)t.push(s),s=s.next;return t},subscribe(t){let s=!0;const o=e={callback:t,next:null,prev:e};return o.prev?o.prev.next=o:r=o,function(){!s||r===null||(s=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:r=o.next)}}}}var tg={notify(){},get:()=>[]};function dE(r,e){let t,s=tg,o=0,u=!1;function h($){v();const M=s.subscribe($);let Z=!1;return()=>{Z||(Z=!0,M(),E())}}function d(){s.notify()}function g(){F.onStateChange&&F.onStateChange()}function y(){return u}function v(){o++,t||(t=r.subscribe(g),s=fE())}function E(){o--,t&&o===0&&(t(),t=void 0,s.clear(),s=tg)}function I(){u||(u=!0,v())}function N(){u&&(u=!1,E())}const F={addNestedSub:h,notifyNestedSubs:d,handleChangeWrapper:g,isSubscribed:y,trySubscribe:I,tryUnsubscribe:N,getListeners:()=>s};return F}var pE=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mE=pE(),gE=()=>typeof navigator<"u"&&navigator.product==="ReactNative",yE=gE(),_E=()=>mE||yE?Pe.useLayoutEffect:Pe.useEffect,vE=_E(),Hh=Symbol.for("react-redux-context"),Kh=typeof globalThis<"u"?globalThis:{};function wE(){if(!Pe.createContext)return{};const r=Kh[Hh]??(Kh[Hh]=new Map);let e=r.get(Pe.createContext);return e||(e=Pe.createContext(null),r.set(Pe.createContext,e)),e}var oi=wE();function EE(r){const{children:e,context:t,serverState:s,store:o}=r,u=Pe.useMemo(()=>{const g=dE(o);return{store:o,subscription:g,getServerState:s?()=>s:void 0}},[o,s]),h=Pe.useMemo(()=>o.getState(),[o]);vE(()=>{const{subscription:g}=u;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),h!==o.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[u,h]);const d=t||oi;return Pe.createElement(d.Provider,{value:u},e)}var TE=EE;function Kf(r=oi){return function(){return Pe.useContext(r)}}var Ly=Kf();function My(r=oi){const e=r===oi?Ly:Kf(r),t=()=>{const{store:s}=e();return s};return Object.assign(t,{withTypes:()=>t}),t}var SE=My();function IE(r=oi){const e=r===oi?SE:My(r),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var qf=IE(),CE=(r,e)=>r===e;function AE(r=oi){const e=r===oi?Ly:Kf(r),t=(s,o={})=>{const{equalityFn:u=CE}=typeof o=="function"?{equalityFn:o}:o,h=e(),{store:d,subscription:g,getServerState:y}=h;Pe.useRef(!0);const v=Pe.useCallback({[s.name](I){return s(I)}}[s.name],[s]),E=cE.useSyncExternalStoreWithSelector(g.addNestedSub,d.getState,y||d.getState,v,u);return Pe.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var kE=AE();function At(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var RE=typeof Symbol=="function"&&Symbol.observable||"@@observable",ng=RE,qh=()=>Math.random().toString(36).substring(7).split("").join("."),PE={INIT:`@@redux/INIT${qh()}`,REPLACE:`@@redux/REPLACE${qh()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${qh()}`},Tl=PE;function Gf(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function Fy(r,e,t){if(typeof r!="function")throw new Error(At(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(At(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(At(1));return t(Fy)(r,e)}let s=r,o=e,u=new Map,h=u,d=0,g=!1;function y(){h===u&&(h=new Map,u.forEach((M,Z)=>{h.set(Z,M)}))}function v(){if(g)throw new Error(At(3));return o}function E(M){if(typeof M!="function")throw new Error(At(4));if(g)throw new Error(At(5));let Z=!0;y();const ee=d++;return h.set(ee,M),function(){if(Z){if(g)throw new Error(At(6));Z=!1,y(),h.delete(ee),u=null}}}function I(M){if(!Gf(M))throw new Error(At(7));if(typeof M.type>"u")throw new Error(At(8));if(typeof M.type!="string")throw new Error(At(17));if(g)throw new Error(At(9));try{g=!0,o=s(o,M)}finally{g=!1}return(u=h).forEach(ee=>{ee()}),M}function N(M){if(typeof M!="function")throw new Error(At(10));s=M,I({type:Tl.REPLACE})}function F(){const M=E;return{subscribe(Z){if(typeof Z!="object"||Z===null)throw new Error(At(11));function ee(){const W=Z;W.next&&W.next(v())}return ee(),{unsubscribe:M(ee)}},[ng](){return this}}}return I({type:Tl.INIT}),{dispatch:I,subscribe:E,getState:v,replaceReducer:N,[ng]:F}}function xE(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:Tl.INIT})>"u")throw new Error(At(12));if(typeof t(void 0,{type:Tl.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(At(13))})}function NE(r){const e=Object.keys(r),t={};for(let u=0;u<e.length;u++){const h=e[u];typeof r[h]=="function"&&(t[h]=r[h])}const s=Object.keys(t);let o;try{xE(t)}catch(u){o=u}return function(h={},d){if(o)throw o;let g=!1;const y={};for(let v=0;v<s.length;v++){const E=s[v],I=t[E],N=h[E],F=I(N,d);if(typeof F>"u")throw d&&d.type,new Error(At(14));y[E]=F,g=g||F!==N}return g=g||s.length!==Object.keys(h).length,g?y:h}}function Sl(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...s)=>e(t(...s)))}function DE(...r){return e=>(t,s)=>{const o=e(t,s);let u=()=>{throw new Error(At(15))};const h={getState:o.getState,dispatch:(g,...y)=>u(g,...y)},d=r.map(g=>g(h));return u=Sl(...d)(o.dispatch),{...o,dispatch:u}}}function VE(r){return Gf(r)&&"type"in r&&typeof r.type=="string"}var Uy=Symbol.for("immer-nothing"),rg=Symbol.for("immer-draftable"),un=Symbol.for("immer-state");function Mn(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var oo=Object.getPrototypeOf;function Qi(r){return!!r&&!!r[un]}function Ir(r){var e;return r?zy(r)||Array.isArray(r)||!!r[rg]||!!((e=r.constructor)!=null&&e[rg])||ql(r)||Gl(r):!1}var OE=Object.prototype.constructor.toString();function zy(r){if(!r||typeof r!="object")return!1;const e=oo(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===OE}function Il(r,e){Kl(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,s)=>e(s,t,r))}function Kl(r){const e=r[un];return e?e.type_:Array.isArray(r)?1:ql(r)?2:Gl(r)?3:0}function hf(r,e){return Kl(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function jy(r,e,t){const s=Kl(r);s===2?r.set(e,t):s===3?r.add(t):r[e]=t}function bE(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function ql(r){return r instanceof Map}function Gl(r){return r instanceof Set}function ji(r){return r.copy_||r.base_}function ff(r,e){if(ql(r))return new Map(r);if(Gl(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=zy(r);if(e===!0||e==="class_only"&&!t){const s=Object.getOwnPropertyDescriptors(r);delete s[un];let o=Reflect.ownKeys(s);for(let u=0;u<o.length;u++){const h=o[u],d=s[h];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(s[h]={configurable:!0,writable:!0,enumerable:d.enumerable,value:r[h]})}return Object.create(oo(r),s)}else{const s=oo(r);if(s!==null&&t)return{...r};const o=Object.create(s);return Object.assign(o,r)}}function Qf(r,e=!1){return Ql(r)||Qi(r)||!Ir(r)||(Kl(r)>1&&(r.set=r.add=r.clear=r.delete=LE),Object.freeze(r),e&&Object.entries(r).forEach(([t,s])=>Qf(s,!0))),r}function LE(){Mn(2)}function Ql(r){return Object.isFrozen(r)}var ME={};function Xi(r){const e=ME[r];return e||Mn(0,r),e}var ka;function By(){return ka}function FE(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ig(r,e){e&&(Xi("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function df(r){pf(r),r.drafts_.forEach(UE),r.drafts_=null}function pf(r){r===ka&&(ka=r.parent_)}function sg(r){return ka=FE(ka,r)}function UE(r){const e=r[un];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function og(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[un].modified_&&(df(e),Mn(4)),Ir(r)&&(r=Cl(e,r),e.parent_||Al(e,r)),e.patches_&&Xi("Patches").generateReplacementPatches_(t[un].base_,r,e.patches_,e.inversePatches_)):r=Cl(e,t,[]),df(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==Uy?r:void 0}function Cl(r,e,t){if(Ql(e))return e;const s=e[un];if(!s)return Il(e,(o,u)=>ag(r,s,e,o,u,t)),e;if(s.scope_!==r)return e;if(!s.modified_)return Al(r,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let u=o,h=!1;s.type_===3&&(u=new Set(o),o.clear(),h=!0),Il(u,(d,g)=>ag(r,s,o,d,g,t,h)),Al(r,o,!1),t&&r.patches_&&Xi("Patches").generatePatches_(s,t,r.patches_,r.inversePatches_)}return s.copy_}function ag(r,e,t,s,o,u,h){if(Qi(o)){const d=u&&e&&e.type_!==3&&!hf(e.assigned_,s)?u.concat(s):void 0,g=Cl(r,o,d);if(jy(t,s,g),Qi(g))r.canAutoFreeze_=!1;else return}else h&&t.add(o);if(Ir(o)&&!Ql(o)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;Cl(r,o),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,s)&&Al(r,o)}}function Al(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&Qf(e,t)}function zE(r,e){const t=Array.isArray(r),s={type_:t?1:0,scope_:e?e.scope_:By(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=s,u=Xf;t&&(o=[s],u=Ra);const{revoke:h,proxy:d}=Proxy.revocable(o,u);return s.draft_=d,s.revoke_=h,d}var Xf={get(r,e){if(e===un)return r;const t=ji(r);if(!hf(t,e))return jE(r,t,e);const s=t[e];return r.finalized_||!Ir(s)?s:s===Gh(r.base_,e)?(Qh(r),r.copy_[e]=gf(s,r)):s},has(r,e){return e in ji(r)},ownKeys(r){return Reflect.ownKeys(ji(r))},set(r,e,t){const s=$y(ji(r),e);if(s!=null&&s.set)return s.set.call(r.draft_,t),!0;if(!r.modified_){const o=Gh(ji(r),e),u=o==null?void 0:o[un];if(u&&u.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(bE(t,o)&&(t!==void 0||hf(r.base_,e)))return!0;Qh(r),mf(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return Gh(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,Qh(r),mf(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=ji(r),s=Reflect.getOwnPropertyDescriptor(t,e);return s&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:s.enumerable,value:t[e]}},defineProperty(){Mn(11)},getPrototypeOf(r){return oo(r.base_)},setPrototypeOf(){Mn(12)}},Ra={};Il(Xf,(r,e)=>{Ra[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ra.deleteProperty=function(r,e){return Ra.set.call(this,r,e,void 0)};Ra.set=function(r,e,t){return Xf.set.call(this,r[0],e,t,r[0])};function Gh(r,e){const t=r[un];return(t?ji(t):r)[e]}function jE(r,e,t){var o;const s=$y(e,t);return s?"value"in s?s.value:(o=s.get)==null?void 0:o.call(r.draft_):void 0}function $y(r,e){if(!(e in r))return;let t=oo(r);for(;t;){const s=Object.getOwnPropertyDescriptor(t,e);if(s)return s;t=oo(t)}}function mf(r){r.modified_||(r.modified_=!0,r.parent_&&mf(r.parent_))}function Qh(r){r.copy_||(r.copy_=ff(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var BE=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,s)=>{if(typeof e=="function"&&typeof t!="function"){const u=t;t=e;const h=this;return function(g=u,...y){return h.produce(g,v=>t.call(this,v,...y))}}typeof t!="function"&&Mn(6),s!==void 0&&typeof s!="function"&&Mn(7);let o;if(Ir(e)){const u=sg(this),h=gf(e,void 0);let d=!0;try{o=t(h),d=!1}finally{d?df(u):pf(u)}return ig(u,s),og(o,u)}else if(!e||typeof e!="object"){if(o=t(e),o===void 0&&(o=e),o===Uy&&(o=void 0),this.autoFreeze_&&Qf(o,!0),s){const u=[],h=[];Xi("Patches").generateReplacementPatches_(e,o,u,h),s(u,h)}return o}else Mn(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(h,...d)=>this.produceWithPatches(h,g=>e(g,...d));let s,o;return[this.produce(e,t,(h,d)=>{s=h,o=d}),s,o]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){Ir(r)||Mn(8),Qi(r)&&(r=$E(r));const e=sg(this),t=gf(r,void 0);return t[un].isManual_=!0,pf(e),t}finishDraft(r,e){const t=r&&r[un];(!t||!t.isManual_)&&Mn(9);const{scope_:s}=t;return ig(s,e),og(void 0,s)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const o=e[t];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}t>-1&&(e=e.slice(t+1));const s=Xi("Patches").applyPatches_;return Qi(r)?s(r,e):this.produce(r,o=>s(o,e))}};function gf(r,e){const t=ql(r)?Xi("MapSet").proxyMap_(r,e):Gl(r)?Xi("MapSet").proxySet_(r,e):zE(r,e);return(e?e.scope_:By()).drafts_.push(t),t}function $E(r){return Qi(r)||Mn(10,r),Wy(r)}function Wy(r){if(!Ir(r)||Ql(r))return r;const e=r[un];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ff(r,e.scope_.immer_.useStrictShallowCopy_)}else t=ff(r,!0);return Il(t,(s,o)=>{jy(t,s,Wy(o))}),e&&(e.finalized_=!1),t}var ln=new BE,Hy=ln.produce;ln.produceWithPatches.bind(ln);ln.setAutoFreeze.bind(ln);ln.setUseStrictShallowCopy.bind(ln);ln.applyPatches.bind(ln);ln.createDraft.bind(ln);ln.finishDraft.bind(ln);function Ky(r){return({dispatch:t,getState:s})=>o=>u=>typeof u=="function"?u(t,s,r):o(u)}var WE=Ky(),HE=Ky,KE=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Sl:Sl.apply(null,arguments)};function ug(r,e){function t(...s){if(e){let o=e(...s);if(!o)throw new Error(Tr(0));return{type:r,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:r,payload:s[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=s=>VE(s)&&s.type===r,t}var qy=class _a extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_a.prototype)}static get[Symbol.species](){return _a}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new _a(...e[0].concat(this)):new _a(...e.concat(this))}};function lg(r){return Ir(r)?Hy(r,()=>{}):r}function cg(r,e,t){return r.has(e)?r.get(e):r.set(e,t(e)).get(e)}function qE(r){return typeof r=="boolean"}var GE=()=>function(e){const{thunk:t=!0,immutableCheck:s=!0,serializableCheck:o=!0,actionCreatorCheck:u=!0}=e??{};let h=new qy;return t&&(qE(t)?h.push(WE):h.push(HE(t.extraArgument))),h},QE="RTK_autoBatch",hg=r=>e=>{setTimeout(e,r)},XE=(r={type:"raf"})=>e=>(...t)=>{const s=e(...t);let o=!0,u=!1,h=!1;const d=new Set,g=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:hg(10):r.type==="callback"?r.queueNotification:hg(r.timeout),y=()=>{h=!1,u&&(u=!1,d.forEach(v=>v()))};return Object.assign({},s,{subscribe(v){const E=()=>o&&v(),I=s.subscribe(E);return d.add(v),()=>{I(),d.delete(v)}},dispatch(v){var E;try{return o=!((E=v==null?void 0:v.meta)!=null&&E[QE]),u=!o,u&&(h||(h=!0,g(y))),s.dispatch(v)}finally{o=!0}}})},YE=r=>function(t){const{autoBatch:s=!0}=t??{};let o=new qy(r);return s&&o.push(XE(typeof s=="object"?s:void 0)),o};function ZE(r){const e=GE(),{reducer:t=void 0,middleware:s,devTools:o=!0,preloadedState:u=void 0,enhancers:h=void 0}=r;let d;if(typeof t=="function")d=t;else if(Gf(t))d=NE(t);else throw new Error(Tr(1));let g;typeof s=="function"?g=s(e):g=e();let y=Sl;o&&(y=KE({trace:!1,...typeof o=="object"&&o}));const v=DE(...g),E=YE(v);let I=typeof h=="function"?h(E):E();const N=y(...I);return Fy(d,u,N)}function Gy(r){const e={},t=[];let s;const o={addCase(u,h){const d=typeof u=="string"?u:u.type;if(!d)throw new Error(Tr(28));if(d in e)throw new Error(Tr(29));return e[d]=h,o},addMatcher(u,h){return t.push({matcher:u,reducer:h}),o},addDefaultCase(u){return s=u,o}};return r(o),[e,t,s]}function JE(r){return typeof r=="function"}function e0(r,e){let[t,s,o]=Gy(e),u;if(JE(r))u=()=>lg(r());else{const d=lg(r);u=()=>d}function h(d=u(),g){let y=[t[g.type],...s.filter(({matcher:v})=>v(g)).map(({reducer:v})=>v)];return y.filter(v=>!!v).length===0&&(y=[o]),y.reduce((v,E)=>{if(E)if(Qi(v)){const N=E(v,g);return N===void 0?v:N}else{if(Ir(v))return Hy(v,I=>E(I,g));{const I=E(v,g);if(I===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return I}}return v},d)}return h.getInitialState=u,h}var t0=Symbol.for("rtk-slice-createasyncthunk");function n0(r,e){return`${r}/${e}`}function r0({creators:r}={}){var t;const e=(t=r==null?void 0:r.asyncThunk)==null?void 0:t[t0];return function(o){const{name:u,reducerPath:h=u}=o;if(!u)throw new Error(Tr(11));const d=(typeof o.reducers=="function"?o.reducers(o0()):o.reducers)||{},g=Object.keys(d),y={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(G,W){const ce=typeof G=="string"?G:G.type;if(!ce)throw new Error(Tr(12));if(ce in y.sliceCaseReducersByType)throw new Error(Tr(13));return y.sliceCaseReducersByType[ce]=W,v},addMatcher(G,W){return y.sliceMatchers.push({matcher:G,reducer:W}),v},exposeAction(G,W){return y.actionCreators[G]=W,v},exposeCaseReducer(G,W){return y.sliceCaseReducersByName[G]=W,v}};g.forEach(G=>{const W=d[G],ce={reducerName:G,type:n0(u,G),createNotation:typeof o.reducers=="function"};u0(W)?c0(ce,W,v,e):a0(ce,W,v)});function E(){const[G={},W=[],ce=void 0]=typeof o.extraReducers=="function"?Gy(o.extraReducers):[o.extraReducers],ne={...G,...y.sliceCaseReducersByType};return e0(o.initialState,R=>{for(let S in ne)R.addCase(S,ne[S]);for(let S of y.sliceMatchers)R.addMatcher(S.matcher,S.reducer);for(let S of W)R.addMatcher(S.matcher,S.reducer);ce&&R.addDefaultCase(ce)})}const I=G=>G,N=new Map;let F;function $(G,W){return F||(F=E()),F(G,W)}function M(){return F||(F=E()),F.getInitialState()}function Z(G,W=!1){function ce(R){let S=R[G];return typeof S>"u"&&W&&(S=M()),S}function ne(R=I){const S=cg(N,W,()=>new WeakMap);return cg(S,R,()=>{const A={};for(const[P,D]of Object.entries(o.selectors??{}))A[P]=i0(D,R,M,W);return A})}return{reducerPath:G,getSelectors:ne,get selectors(){return ne(ce)},selectSlice:ce}}const ee={name:u,reducer:$,actions:y.actionCreators,caseReducers:y.sliceCaseReducersByName,getInitialState:M,...Z(h),injectInto(G,{reducerPath:W,...ce}={}){const ne=W??h;return G.inject({reducerPath:ne,reducer:$},ce),{...ee,...Z(ne,!0)}}};return ee}}function i0(r,e,t,s){function o(u,...h){let d=e(u);return typeof d>"u"&&s&&(d=t()),r(d,...h)}return o.unwrapped=r,o}var s0=r0();function o0(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function a0({type:r,reducerName:e,createNotation:t},s,o){let u,h;if("reducer"in s){if(t&&!l0(s))throw new Error(Tr(17));u=s.reducer,h=s.prepare}else u=s;o.addCase(r,u).exposeCaseReducer(e,u).exposeAction(e,h?ug(r,h):ug(r))}function u0(r){return r._reducerDefinitionType==="asyncThunk"}function l0(r){return r._reducerDefinitionType==="reducerWithPrepare"}function c0({type:r,reducerName:e},t,s,o){if(!o)throw new Error(Tr(18));const{payloadCreator:u,fulfilled:h,pending:d,rejected:g,settled:y,options:v}=t,E=o(r,u,v);s.exposeAction(e,E),h&&s.addCase(E.fulfilled,h),d&&s.addCase(E.pending,d),g&&s.addCase(E.rejected,g),y&&s.addMatcher(E.settled,y),s.exposeCaseReducer(e,{fulfilled:h||ol,pending:d||ol,rejected:g||ol,settled:y||ol})}function ol(){}function Tr(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}const h0={todos:[]},Qy=s0({name:"todo",initialState:h0,reducers:{createTodo:(r,e)=>{r.todos=[...r.todos,e.payload]},removeTodoById:(r,e)=>{r.todos=[...r.todos.filter(t=>t.id!==e.payload)]},updateTodo:(r,e)=>{r.todos=r.todos.map(t=>t.id!==e.payload.id?t:e.payload)},setTodos:(r,e)=>{r.todos=e.payload}}}),{createTodo:f0,removeTodoById:d0,updateTodo:p0,setTodos:m0}=Qy.actions,g0=Qy.reducer;function yf(){return yf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},yf.apply(null,arguments)}function Xy(r,e){if(r==null)return{};var t={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(e.indexOf(s)!==-1)continue;t[s]=r[s]}return t}function _f(r,e){return _f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},_f(r,e)}function Yy(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,_f(r,e)}function y0(r,e){return r.classList?!!e&&r.classList.contains(e):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+e+" ")!==-1}function _0(r,e){r.classList?r.classList.add(e):y0(r,e)||(typeof r.className=="string"?r.className=r.className+" "+e:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+e))}function fg(r,e){return r.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function v0(r,e){r.classList?r.classList.remove(e):typeof r.className=="string"?r.className=fg(r.className,e):r.setAttribute("class",fg(r.className&&r.className.baseVal||"",e))}var w0=by();const al=Oy(w0),dg={disabled:!1},Zy=Wt.createContext(null);var Jy=function(e){return e.scrollTop},va="unmounted",Bi="exited",$i="entering",Zs="entered",vf="exiting",Rr=function(r){Yy(e,r);function e(s,o){var u;u=r.call(this,s,o)||this;var h=o,d=h&&!h.isMounting?s.enter:s.appear,g;return u.appearStatus=null,s.in?d?(g=Bi,u.appearStatus=$i):g=Zs:s.unmountOnExit||s.mountOnEnter?g=va:g=Bi,u.state={status:g},u.nextCallback=null,u}e.getDerivedStateFromProps=function(o,u){var h=o.in;return h&&u.status===va?{status:Bi}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(o){var u=null;if(o!==this.props){var h=this.state.status;this.props.in?h!==$i&&h!==Zs&&(u=$i):(h===$i||h===Zs)&&(u=vf)}this.updateStatus(!1,u)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var o=this.props.timeout,u,h,d;return u=h=d=o,o!=null&&typeof o!="number"&&(u=o.exit,h=o.enter,d=o.appear!==void 0?o.appear:h),{exit:u,enter:h,appear:d}},t.updateStatus=function(o,u){if(o===void 0&&(o=!1),u!==null)if(this.cancelNextCallback(),u===$i){if(this.props.unmountOnExit||this.props.mountOnEnter){var h=this.props.nodeRef?this.props.nodeRef.current:al.findDOMNode(this);h&&Jy(h)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bi&&this.setState({status:va})},t.performEnter=function(o){var u=this,h=this.props.enter,d=this.context?this.context.isMounting:o,g=this.props.nodeRef?[d]:[al.findDOMNode(this),d],y=g[0],v=g[1],E=this.getTimeouts(),I=d?E.appear:E.enter;if(!o&&!h||dg.disabled){this.safeSetState({status:Zs},function(){u.props.onEntered(y)});return}this.props.onEnter(y,v),this.safeSetState({status:$i},function(){u.props.onEntering(y,v),u.onTransitionEnd(I,function(){u.safeSetState({status:Zs},function(){u.props.onEntered(y,v)})})})},t.performExit=function(){var o=this,u=this.props.exit,h=this.getTimeouts(),d=this.props.nodeRef?void 0:al.findDOMNode(this);if(!u||dg.disabled){this.safeSetState({status:Bi},function(){o.props.onExited(d)});return}this.props.onExit(d),this.safeSetState({status:vf},function(){o.props.onExiting(d),o.onTransitionEnd(h.exit,function(){o.safeSetState({status:Bi},function(){o.props.onExited(d)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(o,u){u=this.setNextCallback(u),this.setState(o,u)},t.setNextCallback=function(o){var u=this,h=!0;return this.nextCallback=function(d){h&&(h=!1,u.nextCallback=null,o(d))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},t.onTransitionEnd=function(o,u){this.setNextCallback(u);var h=this.props.nodeRef?this.props.nodeRef.current:al.findDOMNode(this),d=o==null&&!this.props.addEndListener;if(!h||d){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var g=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],y=g[0],v=g[1];this.props.addEndListener(y,v)}o!=null&&setTimeout(this.nextCallback,o)},t.render=function(){var o=this.state.status;if(o===va)return null;var u=this.props,h=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var d=Xy(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Wt.createElement(Zy.Provider,{value:null},typeof h=="function"?h(o,d):Wt.cloneElement(Wt.Children.only(h),d))},e}(Wt.Component);Rr.contextType=Zy;Rr.propTypes={};function Qs(){}Rr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Qs,onEntering:Qs,onEntered:Qs,onExit:Qs,onExiting:Qs,onExited:Qs};Rr.UNMOUNTED=va;Rr.EXITED=Bi;Rr.ENTERING=$i;Rr.ENTERED=Zs;Rr.EXITING=vf;var E0=function(e,t){return e&&t&&t.split(" ").forEach(function(s){return _0(e,s)})},Xh=function(e,t){return e&&t&&t.split(" ").forEach(function(s){return v0(e,s)})},Xl=function(r){Yy(e,r);function e(){for(var s,o=arguments.length,u=new Array(o),h=0;h<o;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(d,g){var y=s.resolveArguments(d,g),v=y[0],E=y[1];s.removeClasses(v,"exit"),s.addClass(v,E?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(d,g)},s.onEntering=function(d,g){var y=s.resolveArguments(d,g),v=y[0],E=y[1],I=E?"appear":"enter";s.addClass(v,I,"active"),s.props.onEntering&&s.props.onEntering(d,g)},s.onEntered=function(d,g){var y=s.resolveArguments(d,g),v=y[0],E=y[1],I=E?"appear":"enter";s.removeClasses(v,I),s.addClass(v,I,"done"),s.props.onEntered&&s.props.onEntered(d,g)},s.onExit=function(d){var g=s.resolveArguments(d),y=g[0];s.removeClasses(y,"appear"),s.removeClasses(y,"enter"),s.addClass(y,"exit","base"),s.props.onExit&&s.props.onExit(d)},s.onExiting=function(d){var g=s.resolveArguments(d),y=g[0];s.addClass(y,"exit","active"),s.props.onExiting&&s.props.onExiting(d)},s.onExited=function(d){var g=s.resolveArguments(d),y=g[0];s.removeClasses(y,"exit"),s.addClass(y,"exit","done"),s.props.onExited&&s.props.onExited(d)},s.resolveArguments=function(d,g){return s.props.nodeRef?[s.props.nodeRef.current,d]:[d,g]},s.getClassNames=function(d){var g=s.props.classNames,y=typeof g=="string",v=y&&g?g+"-":"",E=y?""+v+d:g[d],I=y?E+"-active":g[d+"Active"],N=y?E+"-done":g[d+"Done"];return{baseClassName:E,activeClassName:I,doneClassName:N}},s}var t=e.prototype;return t.addClass=function(o,u,h){var d=this.getClassNames(u)[h+"ClassName"],g=this.getClassNames("enter"),y=g.doneClassName;u==="appear"&&h==="done"&&y&&(d+=" "+y),h==="active"&&o&&Jy(o),d&&(this.appliedClasses[u][h]=d,E0(o,d))},t.removeClasses=function(o,u){var h=this.appliedClasses[u],d=h.base,g=h.active,y=h.done;this.appliedClasses[u]={},d&&Xh(o,d),g&&Xh(o,g),y&&Xh(o,y)},t.render=function(){var o=this.props;o.classNames;var u=Xy(o,["classNames"]);return Wt.createElement(Rr,yf({},u,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Wt.Component);Xl.defaultProps={classNames:""};Xl.propTypes={};var pg={NVM_INC:"/Users/annasvst/.nvm/versions/node/v23.6.1/include/node",TERM_PROGRAM:"vscode",NODE:"/Users/annasvst/.nvm/versions/node/v23.6.1/bin/node",NVM_CD_FLAGS:"-q",INIT_CWD:"/Users/annasvst/students/group4/deniz/redux-todo-app",SHELL:"/usr/local/bin/fish",TERM:"xterm-256color",TMPDIR:"/var/folders/9h/p0zbtbf1137117pmv95d1ryc0000gp/T/",npm_config_global_prefix:"/Users/annasvst/.nvm/versions/node/v23.6.1",TERM_PROGRAM_VERSION:"1.97.1",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/annasvst",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/annasvst/students/group4/deniz/redux-todo-app",USER:"annasvst",NVM_DIR:"/Users/annasvst/.nvm",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/annasvst/.nvm/versions/node/v23.6.1/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.pgWQm8Av44/Listeners",__CF_USER_TEXT_ENCODING:"0x1F6:0x0:0x0",VSCODE_PROFILE_INITIALIZED:"1",npm_execpath:"/Users/annasvst/.nvm/versions/node/v23.6.1/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/annasvst/students/group4/deniz/redux-todo-app/node_modules/.bin:/Users/annasvst/students/group4/deniz/node_modules/.bin:/Users/annasvst/students/group4/node_modules/.bin:/Users/annasvst/students/node_modules/.bin:/Users/annasvst/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/annasvst/.nvm/versions/node/v23.6.1/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/annasvst/students/group4/deniz/redux-todo-app/node_modules/.bin:/Users/annasvst/students/group4/deniz/node_modules/.bin:/Users/annasvst/students/group4/node_modules/.bin:/Users/annasvst/students/node_modules/.bin:/Users/annasvst/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/annasvst/.nvm/versions/node/v23.6.1/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/annasvst/.nvm/versions/node/v23.6.1/bin:/opt/homebrew/bin:/usr/local/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/opt/homebrew/bin:/Users/annasvst/Library/Application Support/Code/User/globalStorage/github.copilot-chat/debugCommand",npm_package_json:"/Users/annasvst/students/group4/deniz/redux-todo-app/package.json",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/annasvst",npm_config_init_module:"/Users/annasvst/.npm-init.js",npm_config_userconfig:"/Users/annasvst/.npmrc",PWD:"/Users/annasvst/students/group4/deniz/redux-todo-app",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"redux-todo",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",npm_config_npm_version:"10.9.2",npm_config_node_gyp:"/Users/annasvst/.nvm/versions/node/v23.6.1/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"0.0.0",VSCODE_INJECTION:"1",HOME:"/Users/annasvst",SHLVL:"4",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LOGNAME:"annasvst",npm_config_cache:"/Users/annasvst/.npm",npm_lifecycle_script:"tsc -b && vite build",LC_CTYPE:"en_US.UTF-8",VSCODE_GIT_IPC_HANDLE:"/var/folders/9h/p0zbtbf1137117pmv95d1ryc0000gp/T/vscode-git-3b6d040b35.sock",NVM_BIN:"/Users/annasvst/.nvm/versions/node/v23.6.1/bin",npm_config_user_agent:"npm/10.9.2 node/v23.6.1 darwin x64 workspaces/false",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",COLORTERM:"truecolor",npm_config_prefix:"/Users/annasvst/.nvm/versions/node/v23.6.1",npm_node_execpath:"/Users/annasvst/.nvm/versions/node/v23.6.1/bin/node",_:"/Users/annasvst/students/group4/deniz/redux-todo-app/node_modules/.bin/vite",NODE_ENV:"production"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},T0=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[t++],h=r[t++],d=r[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},t_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,d=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,v=u>>2,E=(u&3)<<4|d>>4;let I=(d&15)<<2|y>>6,N=y&63;g||(N=64,h||(I=64)),s.push(t[v],t[E],t[I],t[N])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(e_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):T0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,u==null||d==null||y==null||E==null)throw new S0;const I=u<<2|d>>4;if(s.push(I),y!==64){const N=d<<4&240|y>>2;if(s.push(N),E!==64){const F=y<<6&192|E;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class S0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I0=function(r){const e=e_(r);return t_.encodeByteArray(e,!0)},kl=function(r){return I0(r).replace(/\./g,"")},C0=function(r){try{return t_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=()=>A0().__FIREBASE_DEFAULTS__,R0=()=>{if(typeof process>"u"||typeof pg>"u")return;const r=pg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},P0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&C0(r[1]);return e&&JSON.parse(e)},Yf=()=>{try{return k0()||R0()||P0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},x0=r=>{var e,t;return(t=(e=Yf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},N0=r=>{const e=x0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},n_=()=>{var r;return(r=Yf())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[kl(JSON.stringify(t)),kl(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b0(){var r;const e=(r=Yf())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L0(){return!b0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M0(){try{return typeof indexedDB=="object"}catch{return!1}}function F0(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="FirebaseError";class go extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=U0,Object.setPrototypeOf(this,go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,r_.prototype.create)}}class r_{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?z0(u,s):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new go(o,d,s)}}function z0(r,e){return r.replace(j0,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const j0=/\{\$([^}]+)}/g;function wf(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=r[o],h=e[o];if(mg(u)&&mg(h)){if(!wf(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function mg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(r){return r&&r._delegate?r._delegate:r}class Pa{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new D0;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W0(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);s===d&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:$0(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $0(r){return r===Wi?void 0:r}function W0(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new B0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const K0={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},q0=Ve.INFO,G0={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Q0=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=G0[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class i_{constructor(e){this.name=e,this._logLevel=q0,this._logHandler=Q0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const X0=(r,e)=>e.some(t=>r instanceof t);let gg,yg;function Y0(){return gg||(gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z0(){return yg||(yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const s_=new WeakMap,Ef=new WeakMap,o_=new WeakMap,Yh=new WeakMap,Zf=new WeakMap;function J0(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{t(ti(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&s_.set(t,r)}).catch(()=>{}),Zf.set(e,r),e}function eT(r){if(Ef.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Ef.set(r,e)}let Tf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ef.get(r);if(e==="objectStoreNames")return r.objectStoreNames||o_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ti(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function tT(r){Tf=r(Tf)}function nT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Zh(this),e,...t);return o_.set(s,e.sort?e.sort():[e]),ti(s)}:Z0().includes(r)?function(...e){return r.apply(Zh(this),e),ti(s_.get(this))}:function(...e){return ti(r.apply(Zh(this),e))}}function rT(r){return typeof r=="function"?nT(r):(r instanceof IDBTransaction&&eT(r),X0(r,Y0())?new Proxy(r,Tf):r)}function ti(r){if(r instanceof IDBRequest)return J0(r);if(Yh.has(r))return Yh.get(r);const e=rT(r);return e!==r&&(Yh.set(r,e),Zf.set(e,r)),e}const Zh=r=>Zf.get(r);function iT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),d=ti(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ti(h.result),g.oldVersion,g.newVersion,ti(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const sT=["get","getKey","getAll","getAllKeys","count"],oT=["put","add","delete","clear"],Jh=new Map;function _g(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Jh.get(e))return Jh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=oT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||sT.includes(t)))return;const u=async function(h,...d){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&g.done]))[0]};return Jh.set(e,u),u}tT(r=>({...r,get:(e,t,s)=>_g(e,t)||r.get(e,t,s),has:(e,t)=>!!_g(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function uT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sf="@firebase/app",vg="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new i_("@firebase/app"),lT="@firebase/app-compat",cT="@firebase/analytics-compat",hT="@firebase/analytics",fT="@firebase/app-check-compat",dT="@firebase/app-check",pT="@firebase/auth",mT="@firebase/auth-compat",gT="@firebase/database",yT="@firebase/data-connect",_T="@firebase/database-compat",vT="@firebase/functions",wT="@firebase/functions-compat",ET="@firebase/installations",TT="@firebase/installations-compat",ST="@firebase/messaging",IT="@firebase/messaging-compat",CT="@firebase/performance",AT="@firebase/performance-compat",kT="@firebase/remote-config",RT="@firebase/remote-config-compat",PT="@firebase/storage",xT="@firebase/storage-compat",NT="@firebase/firestore",DT="@firebase/vertexai",VT="@firebase/firestore-compat",OT="firebase",bT="11.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="[DEFAULT]",LT={[Sf]:"fire-core",[lT]:"fire-core-compat",[hT]:"fire-analytics",[cT]:"fire-analytics-compat",[dT]:"fire-app-check",[fT]:"fire-app-check-compat",[pT]:"fire-auth",[mT]:"fire-auth-compat",[gT]:"fire-rtdb",[yT]:"fire-data-connect",[_T]:"fire-rtdb-compat",[vT]:"fire-fn",[wT]:"fire-fn-compat",[ET]:"fire-iid",[TT]:"fire-iid-compat",[ST]:"fire-fcm",[IT]:"fire-fcm-compat",[CT]:"fire-perf",[AT]:"fire-perf-compat",[kT]:"fire-rc",[RT]:"fire-rc-compat",[PT]:"fire-gcs",[xT]:"fire-gcs-compat",[NT]:"fire-fst",[VT]:"fire-fst-compat",[DT]:"fire-vertex","fire-js":"fire-js",[OT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=new Map,MT=new Map,Cf=new Map;function wg(r,e){try{r.container.addComponent(e)}catch(t){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Pl(r){const e=r.name;if(Cf.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,r);for(const t of Rl.values())wg(t,r);for(const t of MT.values())wg(t,r);return!0}function FT(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function UT(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ni=new r_("app","Firebase",zT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=bT;function a_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:If,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw ni.create("bad-app-name",{appName:String(o)});if(t||(t=n_()),!t)throw ni.create("no-options");const u=Rl.get(o);if(u){if(wf(t,u.options)&&wf(s,u.config))return u;throw ni.create("duplicate-app",{appName:o})}const h=new H0(o);for(const g of Cf.values())h.addComponent(g);const d=new jT(t,s,h);return Rl.set(o,d),d}function $T(r=If){const e=Rl.get(r);if(!e&&r===If&&n_())return a_();if(!e)throw ni.create("no-app",{appName:r});return e}function io(r,e,t){var s;let o=(s=LT[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const d=[`Unable to register library "${o}" with version "${e}":`];u&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(d.join(" "));return}Pl(new Pa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebase-heartbeat-database",HT=1,xa="firebase-heartbeat-store";let ef=null;function u_(){return ef||(ef=iT(WT,HT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(xa)}catch(t){console.warn(t)}}}}).catch(r=>{throw ni.create("idb-open",{originalErrorMessage:r.message})})),ef}async function KT(r){try{const t=(await u_()).transaction(xa),s=await t.objectStore(xa).get(l_(r));return await t.done,s}catch(e){if(e instanceof go)Cr.warn(e.message);else{const t=ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cr.warn(t.message)}}}async function Eg(r,e){try{const s=(await u_()).transaction(xa,"readwrite");await s.objectStore(xa).put(e,l_(r)),await s.done}catch(t){if(t instanceof go)Cr.warn(t.message);else{const s=ni.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cr.warn(s.message)}}}function l_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=1024,GT=30;class QT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YT(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Tg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>GT){const h=ZT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Cr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tg(),{heartbeatsToSend:s,unsentEntries:o}=XT(this._heartbeatsCache.heartbeats),u=kl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return Cr.warn(t),""}}}function Tg(){return new Date().toISOString().substring(0,10)}function XT(r,e=qT){const t=[];let s=r.slice();for(const o of r){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Sg(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Sg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class YT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M0()?F0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await KT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Sg(r){return kl(JSON.stringify({version:2,heartbeats:r})).length}function ZT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r){Pl(new Pa("platform-logger",e=>new aT(e),"PRIVATE")),Pl(new Pa("heartbeat",e=>new QT(e),"PRIVATE")),io(Sf,vg,r),io(Sf,vg,"esm2017"),io("fire-js","")}JT("");var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,c_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function A(){}A.prototype=S.prototype,R.D=S.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(P,D,O){for(var k=Array(arguments.length-2),et=2;et<arguments.length;et++)k[et-2]=arguments[et];return S.prototype[D].apply(P,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,S,A){A||(A=0);var P=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)P[D]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(D=0;16>D;++D)P[D]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=R.g[0],A=R.g[1],D=R.g[2];var O=R.g[3],k=S+(O^A&(D^O))+P[0]+3614090360&4294967295;S=A+(k<<7&4294967295|k>>>25),k=O+(D^S&(A^D))+P[1]+3905402710&4294967295,O=S+(k<<12&4294967295|k>>>20),k=D+(A^O&(S^A))+P[2]+606105819&4294967295,D=O+(k<<17&4294967295|k>>>15),k=A+(S^D&(O^S))+P[3]+3250441966&4294967295,A=D+(k<<22&4294967295|k>>>10),k=S+(O^A&(D^O))+P[4]+4118548399&4294967295,S=A+(k<<7&4294967295|k>>>25),k=O+(D^S&(A^D))+P[5]+1200080426&4294967295,O=S+(k<<12&4294967295|k>>>20),k=D+(A^O&(S^A))+P[6]+2821735955&4294967295,D=O+(k<<17&4294967295|k>>>15),k=A+(S^D&(O^S))+P[7]+4249261313&4294967295,A=D+(k<<22&4294967295|k>>>10),k=S+(O^A&(D^O))+P[8]+1770035416&4294967295,S=A+(k<<7&4294967295|k>>>25),k=O+(D^S&(A^D))+P[9]+2336552879&4294967295,O=S+(k<<12&4294967295|k>>>20),k=D+(A^O&(S^A))+P[10]+4294925233&4294967295,D=O+(k<<17&4294967295|k>>>15),k=A+(S^D&(O^S))+P[11]+2304563134&4294967295,A=D+(k<<22&4294967295|k>>>10),k=S+(O^A&(D^O))+P[12]+1804603682&4294967295,S=A+(k<<7&4294967295|k>>>25),k=O+(D^S&(A^D))+P[13]+4254626195&4294967295,O=S+(k<<12&4294967295|k>>>20),k=D+(A^O&(S^A))+P[14]+2792965006&4294967295,D=O+(k<<17&4294967295|k>>>15),k=A+(S^D&(O^S))+P[15]+1236535329&4294967295,A=D+(k<<22&4294967295|k>>>10),k=S+(D^O&(A^D))+P[1]+4129170786&4294967295,S=A+(k<<5&4294967295|k>>>27),k=O+(A^D&(S^A))+P[6]+3225465664&4294967295,O=S+(k<<9&4294967295|k>>>23),k=D+(S^A&(O^S))+P[11]+643717713&4294967295,D=O+(k<<14&4294967295|k>>>18),k=A+(O^S&(D^O))+P[0]+3921069994&4294967295,A=D+(k<<20&4294967295|k>>>12),k=S+(D^O&(A^D))+P[5]+3593408605&4294967295,S=A+(k<<5&4294967295|k>>>27),k=O+(A^D&(S^A))+P[10]+38016083&4294967295,O=S+(k<<9&4294967295|k>>>23),k=D+(S^A&(O^S))+P[15]+3634488961&4294967295,D=O+(k<<14&4294967295|k>>>18),k=A+(O^S&(D^O))+P[4]+3889429448&4294967295,A=D+(k<<20&4294967295|k>>>12),k=S+(D^O&(A^D))+P[9]+568446438&4294967295,S=A+(k<<5&4294967295|k>>>27),k=O+(A^D&(S^A))+P[14]+3275163606&4294967295,O=S+(k<<9&4294967295|k>>>23),k=D+(S^A&(O^S))+P[3]+4107603335&4294967295,D=O+(k<<14&4294967295|k>>>18),k=A+(O^S&(D^O))+P[8]+1163531501&4294967295,A=D+(k<<20&4294967295|k>>>12),k=S+(D^O&(A^D))+P[13]+2850285829&4294967295,S=A+(k<<5&4294967295|k>>>27),k=O+(A^D&(S^A))+P[2]+4243563512&4294967295,O=S+(k<<9&4294967295|k>>>23),k=D+(S^A&(O^S))+P[7]+1735328473&4294967295,D=O+(k<<14&4294967295|k>>>18),k=A+(O^S&(D^O))+P[12]+2368359562&4294967295,A=D+(k<<20&4294967295|k>>>12),k=S+(A^D^O)+P[5]+4294588738&4294967295,S=A+(k<<4&4294967295|k>>>28),k=O+(S^A^D)+P[8]+2272392833&4294967295,O=S+(k<<11&4294967295|k>>>21),k=D+(O^S^A)+P[11]+1839030562&4294967295,D=O+(k<<16&4294967295|k>>>16),k=A+(D^O^S)+P[14]+4259657740&4294967295,A=D+(k<<23&4294967295|k>>>9),k=S+(A^D^O)+P[1]+2763975236&4294967295,S=A+(k<<4&4294967295|k>>>28),k=O+(S^A^D)+P[4]+1272893353&4294967295,O=S+(k<<11&4294967295|k>>>21),k=D+(O^S^A)+P[7]+4139469664&4294967295,D=O+(k<<16&4294967295|k>>>16),k=A+(D^O^S)+P[10]+3200236656&4294967295,A=D+(k<<23&4294967295|k>>>9),k=S+(A^D^O)+P[13]+681279174&4294967295,S=A+(k<<4&4294967295|k>>>28),k=O+(S^A^D)+P[0]+3936430074&4294967295,O=S+(k<<11&4294967295|k>>>21),k=D+(O^S^A)+P[3]+3572445317&4294967295,D=O+(k<<16&4294967295|k>>>16),k=A+(D^O^S)+P[6]+76029189&4294967295,A=D+(k<<23&4294967295|k>>>9),k=S+(A^D^O)+P[9]+3654602809&4294967295,S=A+(k<<4&4294967295|k>>>28),k=O+(S^A^D)+P[12]+3873151461&4294967295,O=S+(k<<11&4294967295|k>>>21),k=D+(O^S^A)+P[15]+530742520&4294967295,D=O+(k<<16&4294967295|k>>>16),k=A+(D^O^S)+P[2]+3299628645&4294967295,A=D+(k<<23&4294967295|k>>>9),k=S+(D^(A|~O))+P[0]+4096336452&4294967295,S=A+(k<<6&4294967295|k>>>26),k=O+(A^(S|~D))+P[7]+1126891415&4294967295,O=S+(k<<10&4294967295|k>>>22),k=D+(S^(O|~A))+P[14]+2878612391&4294967295,D=O+(k<<15&4294967295|k>>>17),k=A+(O^(D|~S))+P[5]+4237533241&4294967295,A=D+(k<<21&4294967295|k>>>11),k=S+(D^(A|~O))+P[12]+1700485571&4294967295,S=A+(k<<6&4294967295|k>>>26),k=O+(A^(S|~D))+P[3]+2399980690&4294967295,O=S+(k<<10&4294967295|k>>>22),k=D+(S^(O|~A))+P[10]+4293915773&4294967295,D=O+(k<<15&4294967295|k>>>17),k=A+(O^(D|~S))+P[1]+2240044497&4294967295,A=D+(k<<21&4294967295|k>>>11),k=S+(D^(A|~O))+P[8]+1873313359&4294967295,S=A+(k<<6&4294967295|k>>>26),k=O+(A^(S|~D))+P[15]+4264355552&4294967295,O=S+(k<<10&4294967295|k>>>22),k=D+(S^(O|~A))+P[6]+2734768916&4294967295,D=O+(k<<15&4294967295|k>>>17),k=A+(O^(D|~S))+P[13]+1309151649&4294967295,A=D+(k<<21&4294967295|k>>>11),k=S+(D^(A|~O))+P[4]+4149444226&4294967295,S=A+(k<<6&4294967295|k>>>26),k=O+(A^(S|~D))+P[11]+3174756917&4294967295,O=S+(k<<10&4294967295|k>>>22),k=D+(S^(O|~A))+P[2]+718787259&4294967295,D=O+(k<<15&4294967295|k>>>17),k=A+(O^(D|~S))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+O&4294967295}s.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var A=S-this.blockSize,P=this.B,D=this.h,O=0;O<S;){if(D==0)for(;O<=A;)o(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<S;)if(P[D++]=R.charCodeAt(O++),D==this.blockSize){o(this,P),D=0;break}}else for(;O<S;)if(P[D++]=R[O++],D==this.blockSize){o(this,P),D=0;break}}this.h=D,this.o+=S},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var A=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=A&255,A/=256;for(this.u(R),R=Array(16),S=A=0;4>S;++S)for(var P=0;32>P;P+=8)R[A++]=this.g[S]>>>P&255;return R};function u(R,S){var A=d;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=S(R)}function h(R,S){this.h=S;for(var A=[],P=!0,D=R.length-1;0<=D;D--){var O=R[D]|0;P&&O==S||(A[D]=O,P=!1)}this.g=A}var d={};function g(R){return-128<=R&&128>R?u(R,function(S){return new h([S|0],0>S?-1:0)}):new h([R|0],0>R?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(0>R)return M(y(-R));for(var S=[],A=1,P=0;R>=A;P++)S[P]=R/A|0,A*=4294967296;return new h(S,0)}function v(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return M(v(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(S,8)),P=E,D=0;D<R.length;D+=8){var O=Math.min(8,R.length-D),k=parseInt(R.substring(D,D+O),S);8>O?(O=y(Math.pow(S,O)),P=P.j(O).add(y(k))):(P=P.j(A),P=P.add(y(k)))}return P}var E=g(0),I=g(1),N=g(16777216);r=h.prototype,r.m=function(){if($(this))return-M(this).m();for(var R=0,S=1,A=0;A<this.g.length;A++){var P=this.i(A);R+=(0<=P?P:4294967296+P)*S,S*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(F(this))return"0";if($(this))return"-"+M(this).toString(R);for(var S=y(Math.pow(R,6)),A=this,P="";;){var D=W(A,S).g;A=Z(A,D.j(S));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=D,F(A))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function F(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function $(R){return R.h==-1}r.l=function(R){return R=Z(this,R),$(R)?-1:F(R)?0:1};function M(R){for(var S=R.g.length,A=[],P=0;P<S;P++)A[P]=~R.g[P];return new h(A,~R.h).add(I)}r.abs=function(){return $(this)?M(this):this},r.add=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],P=0,D=0;D<=S;D++){var O=P+(this.i(D)&65535)+(R.i(D)&65535),k=(O>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);P=k>>>16,O&=65535,k&=65535,A[D]=k<<16|O}return new h(A,A[A.length-1]&-2147483648?-1:0)};function Z(R,S){return R.add(M(S))}r.j=function(R){if(F(this)||F(R))return E;if($(this))return $(R)?M(this).j(M(R)):M(M(this).j(R));if($(R))return M(this.j(M(R)));if(0>this.l(N)&&0>R.l(N))return y(this.m()*R.m());for(var S=this.g.length+R.g.length,A=[],P=0;P<2*S;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<R.g.length;D++){var O=this.i(P)>>>16,k=this.i(P)&65535,et=R.i(D)>>>16,xt=R.i(D)&65535;A[2*P+2*D]+=k*xt,ee(A,2*P+2*D),A[2*P+2*D+1]+=O*xt,ee(A,2*P+2*D+1),A[2*P+2*D+1]+=k*et,ee(A,2*P+2*D+1),A[2*P+2*D+2]+=O*et,ee(A,2*P+2*D+2)}for(P=0;P<S;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=S;P<2*S;P++)A[P]=0;return new h(A,0)};function ee(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function G(R,S){this.g=R,this.h=S}function W(R,S){if(F(S))throw Error("division by zero");if(F(R))return new G(E,E);if($(R))return S=W(M(R),S),new G(M(S.g),M(S.h));if($(S))return S=W(R,M(S)),new G(M(S.g),S.h);if(30<R.g.length){if($(R)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var A=I,P=S;0>=P.l(R);)A=ce(A),P=ce(P);var D=ne(A,1),O=ne(P,1);for(P=ne(P,2),A=ne(A,2);!F(P);){var k=O.add(P);0>=k.l(R)&&(D=D.add(A),O=k),P=ne(P,1),A=ne(A,1)}return S=Z(R,D.j(S)),new G(D,S)}for(D=E;0<=R.l(S);){for(A=Math.max(1,Math.floor(R.m()/S.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=y(A),k=O.j(S);$(k)||0<k.l(R);)A-=P,O=y(A),k=O.j(S);F(O)&&(O=I),D=D.add(O),R=Z(R,k)}return new G(D,R)}r.A=function(R){return W(this,R).h},r.and=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)&R.i(P);return new h(A,this.h&R.h)},r.or=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)|R.i(P);return new h(A,this.h|R.h)},r.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)^R.i(P);return new h(A,this.h^R.h)};function ce(R){for(var S=R.g.length+1,A=[],P=0;P<S;P++)A[P]=R.i(P)<<1|R.i(P-1)>>>31;return new h(A,R.h)}function ne(R,S){var A=S>>5;S%=32;for(var P=R.g.length-A,D=[],O=0;O<P;O++)D[O]=0<S?R.i(O+A)>>>S|R.i(O+A+1)<<32-S:R.i(O+A);return new h(D,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,c_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,ri=h}).apply(typeof Ig<"u"?Ig:typeof self<"u"?self:typeof window<"u"?window:{});var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h_,wa,f_,ml,Af,d_,p_,m_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,_){return l==Array.prototype||l==Object.prototype||(l[p]=_.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ul=="object"&&ul];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(l,p){if(p)e:{var _=s;l=l.split(".");for(var T=0;T<l.length-1;T++){var L=l[T];if(!(L in _))break e;_=_[L]}l=l[l.length-1],T=_[l],p=p(T),p!=T&&p!=null&&e(_,l,{configurable:!0,writable:!0,value:p})}}function u(l,p){l instanceof String&&(l+="");var _=0,T=!1,L={next:function(){if(!T&&_<l.length){var B=_++;return{value:p(B,l[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(l){return l||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function g(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function y(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function v(l,p,_){return l.call.apply(l.bind,arguments)}function E(l,p,_){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),l.apply(p,L)}}return function(){return l.apply(p,arguments)}}function I(l,p,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,I.apply(null,arguments)}function N(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function F(l,p){function _(){}_.prototype=p.prototype,l.aa=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(T,L,B){for(var te=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)te[Ue-2]=arguments[Ue];return p.prototype[L].apply(T,te)}}function $(l){const p=l.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=l[T];return _}return[]}function M(l,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(g(T)){const L=l.length||0,B=T.length||0;l.length=L+B;for(let te=0;te<B;te++)l[L+te]=T[te]}else l.push(T)}}class Z{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ee(l){return/^[\s\xa0]*$/.test(l)}function G(){var l=d.navigator;return l&&(l=l.userAgent)?l:""}function W(l){return W[" "](l),l}W[" "]=function(){};var ce=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ne(l,p,_){for(const T in l)p.call(_,l[T],T,l)}function R(l,p){for(const _ in l)p.call(void 0,l[_],_,l)}function S(l){const p={};for(const _ in l)p[_]=l[_];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,p){let _,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(_ in T)l[_]=T[_];for(let B=0;B<A.length;B++)_=A[B],Object.prototype.hasOwnProperty.call(T,_)&&(l[_]=T[_])}}function D(l){var p=1;l=l.split(":");const _=[];for(;0<p&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function O(l){d.setTimeout(()=>{throw l},0)}function k(){var l=me;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class et{constructor(){this.h=this.g=null}add(p,_){const T=xt.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var xt=new Z(()=>new Nt,l=>l.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,re=!1,me=new et,se=()=>{const l=d.Promise.resolve(void 0);ze=()=>{l.then(b)}};var b=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(_){O(_)}var p=xt;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}re=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};d.addEventListener("test",_,p),d.removeEventListener("test",_,p)}catch{}return l}();function Ie(l,p){if(de.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(ce){e:{try{W(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else _=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:xe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ie.aa.h.call(this)}}F(Ie,de);var xe={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Me=0;function Be(l,p,_,T,L){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=L,this.key=++Me,this.da=this.fa=!1}function mt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function rr(l){this.src=l,this.g={},this.h=0}rr.prototype.add=function(l,p,_,T,L){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var te=Pr(l,p,T,L);return-1<te?(p=l[te],_||(p.fa=!1)):(p=new Be(p,this.src,B,!!T,L),p.fa=_,l.push(p)),p};function rs(l,p){var _=p.type;if(_ in l.g){var T=l.g[_],L=Array.prototype.indexOf.call(T,p,void 0),B;(B=0<=L)&&Array.prototype.splice.call(T,L,1),B&&(mt(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function Pr(l,p,_,T){for(var L=0;L<l.length;++L){var B=l[L];if(!B.da&&B.listener==p&&B.capture==!!_&&B.ha==T)return L}return-1}var di="closure_lm_"+(1e6*Math.random()|0),is={};function To(l,p,_,T,L){if(Array.isArray(p)){for(var B=0;B<p.length;B++)To(l,p[B],_,T,L);return null}return _=Co(_),l&&l[Le]?l.K(p,_,y(T)?!!T.capture:!1,L):So(l,p,_,!1,T,L)}function So(l,p,_,T,L,B){if(!p)throw Error("Invalid event type");var te=y(L)?!!L.capture:!!L,Ue=os(l);if(Ue||(l[di]=Ue=new rr(l)),_=Ue.add(p,_,T,te,B),_.proxy)return _;if(T=Wa(),_.proxy=T,T.src=l,T.listener=_,l.addEventListener)Te||(L=te),L===void 0&&(L=!1),l.addEventListener(p.toString(),T,L);else if(l.attachEvent)l.attachEvent(sr(p.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Wa(){function l(_){return p.call(l.src,l.listener,_)}const p=Io;return l}function ss(l,p,_,T,L){if(Array.isArray(p))for(var B=0;B<p.length;B++)ss(l,p[B],_,T,L);else T=y(T)?!!T.capture:!!T,_=Co(_),l&&l[Le]?(l=l.i,p=String(p).toString(),p in l.g&&(B=l.g[p],_=Pr(B,_,T,L),-1<_&&(mt(B[_]),Array.prototype.splice.call(B,_,1),B.length==0&&(delete l.g[p],l.h--)))):l&&(l=os(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Pr(p,_,T,L)),(_=-1<l?p[l]:null)&&ir(_))}function ir(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Le])rs(p.i,l);else{var _=l.type,T=l.proxy;p.removeEventListener?p.removeEventListener(_,T,l.capture):p.detachEvent?p.detachEvent(sr(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=os(p))?(rs(_,l),_.h==0&&(_.src=null,p[di]=null)):mt(l)}}}function sr(l){return l in is?is[l]:is[l]="on"+l}function Io(l,p){if(l.da)l=!0;else{p=new Ie(p,this);var _=l.listener,T=l.ha||l.src;l.fa&&ir(l),l=_.call(T,p)}return l}function os(l){return l=l[di],l instanceof rr?l:null}var as="__closure_events_fn_"+(1e9*Math.random()>>>0);function Co(l){return typeof l=="function"?l:(l[as]||(l[as]=function(p){return l.handleEvent(p)}),l[as])}function ut(){K.call(this),this.i=new rr(this),this.M=this,this.F=null}F(ut,K),ut.prototype[Le]=!0,ut.prototype.removeEventListener=function(l,p,_,T){ss(this,l,p,_,T)};function lt(l,p){var _,T=l.F;if(T)for(_=[];T;T=T.F)_.push(T);if(l=l.M,T=p.type||p,typeof p=="string")p=new de(p,l);else if(p instanceof de)p.target=p.target||l;else{var L=p;p=new de(T,l),P(p,L)}if(L=!0,_)for(var B=_.length-1;0<=B;B--){var te=p.g=_[B];L=or(te,T,!0,p)&&L}if(te=p.g=l,L=or(te,T,!0,p)&&L,L=or(te,T,!1,p)&&L,_)for(B=0;B<_.length;B++)te=p.g=_[B],L=or(te,T,!1,p)&&L}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var _=l.g[p],T=0;T<_.length;T++)mt(_[T]);delete l.g[p],l.h--}}this.F=null},ut.prototype.K=function(l,p,_,T){return this.i.add(String(l),p,!1,_,T)},ut.prototype.L=function(l,p,_,T){return this.i.add(String(l),p,!0,_,T)};function or(l,p,_,T){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,B=0;B<p.length;++B){var te=p[B];if(te&&!te.da&&te.capture==_){var Ue=te.listener,ct=te.ha||te.src;te.fa&&rs(l.i,te),L=Ue.call(ct,T)!==!1&&L}}return L&&!T.defaultPrevented}function Ao(l,p,_){if(typeof l=="function")_&&(l=I(l,_));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:d.setTimeout(l,p||0)}function xr(l){l.g=Ao(()=>{l.g=null,l.i&&(l.i=!1,xr(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class pi extends K{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:xr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(l){K.call(this),this.h=l,this.g={}}F(mi,K);var ko=[];function Ro(l){ne(l.g,function(p,_){this.g.hasOwnProperty(_)&&ir(p)},l),l.g={}}mi.prototype.N=function(){mi.aa.N.call(this),Ro(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Po=d.JSON.stringify,xo=d.JSON.parse,No=class{stringify(l){return d.JSON.stringify(l,void 0)}parse(l){return d.JSON.parse(l,void 0)}};function gi(){}gi.prototype.h=null;function us(l){return l.h||(l.h=l.i())}function ls(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zn(){de.call(this,"d")}F(zn,de);function cs(){de.call(this,"c")}F(cs,de);var jn={},Do=null;function yi(){return Do=Do||new ut}jn.La="serverreachability";function Vo(l){de.call(this,jn.La,l)}F(Vo,de);function ar(l){const p=yi();lt(p,new Vo(p))}jn.STAT_EVENT="statevent";function Oo(l,p){de.call(this,jn.STAT_EVENT,l),this.stat=p}F(Oo,de);function tt(l){const p=yi();lt(p,new Oo(p,l))}jn.Ma="timingevent";function hs(l,p){de.call(this,jn.Ma,l),this.size=p}F(hs,de);function Tn(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){l()},p)}function _i(){this.g=!0}_i.prototype.xa=function(){this.g=!1};function vi(l,p,_,T,L,B){l.info(function(){if(l.g)if(B)for(var te="",Ue=B.split("&"),ct=0;ct<Ue.length;ct++){var Ne=Ue[ct].split("=");if(1<Ne.length){var gt=Ne[0];Ne=Ne[1];var it=gt.split("_");te=2<=it.length&&it[1]=="type"?te+(gt+"="+Ne+"&"):te+(gt+"=redacted&")}}else te=null;else te=B;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+p+`
`+_+`
`+te})}function fs(l,p,_,T,L,B,te){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+p+`
`+_+`
`+B+" "+te})}function Sn(l,p,_,T){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+fc(l,_)+(T?" "+T:"")})}function bo(l,p){l.info(function(){return"TIMEOUT: "+p})}_i.prototype.info=function(){};function fc(l,p){if(!l.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var T=_[l];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var te=1;te<L.length;te++)L[te]=""}}}}return Po(_)}catch{return p}}var ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ha={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},In;function wi(){}F(wi,gi),wi.prototype.g=function(){return new XMLHttpRequest},wi.prototype.i=function(){return{}},In=new wi;function Cn(l,p,_,T){this.j=l,this.i=p,this.l=_,this.R=T||1,this.U=new mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ka}function Ka(){this.i=null,this.g="",this.h=!1}var Lo={},ps={};function ms(l,p,_){l.L=1,l.v=br(tn(p)),l.m=_,l.P=!0,Mo(l,null)}function Mo(l,p){l.F=Date.now(),$e(l),l.A=tn(l.v);var _=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Mr(_.i,"t",T),l.C=0,_=l.j.J,l.h=new Ka,l.g=cu(l.j,_?p:null,!l.m),0<l.O&&(l.M=new pi(I(l.Y,l,l.g),l.O)),p=l.U,_=l.g,T=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(ko[0]=L.toString()),L=ko);for(var B=0;B<L.length;B++){var te=To(_,L[B],T||p.handleEvent,!1,p.h||p);if(!te)break;p.g[te.key]=te}p=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),ar(),vi(l.i,l.u,l.A,l.l,l.R,l.m)}Cn.prototype.ca=function(l){l=l.target;const p=this.M;p&&Kt(l)==3?p.j():this.Y(l)},Cn.prototype.Y=function(l){try{if(l==this.g)e:{const it=Kt(this.g);var p=this.g.Ba();const dn=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||$o(this.g)))){this.J||it!=4||p==7||(p==8||0>=dn?ar(3):ar(2)),Ei(this);var _=this.g.Z();this.X=_;t:if(qa(this)){var T=$o(this.g);l="";var L=T.length,B=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Nr(this);var te="";break t}this.h.i=new d.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,l+=this.h.i.decode(T[p],{stream:!(B&&p==L-1)});T.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,fs(this.i,this.u,this.A,this.l,this.R,it,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,ct=this.g;if((Ue=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Ue)){var Ne=Ue;break t}}Ne=null}if(_=Ne)Sn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fo(this,_);else{this.o=!1,this.s=3,tt(12),hn(this),Nr(this);break e}}if(this.P){_=!0;let rn;for(;!this.J&&this.C<te.length;)if(rn=dc(this,te),rn==ps){it==4&&(this.s=4,tt(14),_=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Lo){this.s=4,tt(15),Sn(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else Sn(this.i,this.l,rn,null),Fo(this,rn);if(qa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||te.length!=0||this.h.h||(this.s=1,tt(16),_=!1),this.o=this.o&&_,!_)Sn(this.i,this.l,te,"[Invalid Chunked Response]"),hn(this),Nr(this);else if(0<te.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Ho(gt),gt.M=!0,tt(11))}}else Sn(this.i,this.l,te,null),Fo(this,te);it==4&&hn(this),this.o&&!this.J&&(it==4?As(this.j,this):(this.o=!1,$e(this)))}else Es(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),hn(this),Nr(this)}}}catch{}finally{}};function qa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function dc(l,p){var _=l.C,T=p.indexOf(`
`,_);return T==-1?ps:(_=Number(p.substring(_,T)),isNaN(_)?Lo:(T+=1,T+_>p.length?ps:(p=p.slice(T,T+_),l.C=T+_,p)))}Cn.prototype.cancel=function(){this.J=!0,hn(this)};function $e(l){l.S=Date.now()+l.I,Ga(l,l.I)}function Ga(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Tn(I(l.ba,l),p)}function Ei(l){l.B&&(d.clearTimeout(l.B),l.B=null)}Cn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(bo(this.i,this.A),this.L!=2&&(ar(),tt(17)),hn(this),this.s=2,Nr(this)):Ga(this,this.S-l)};function Nr(l){l.j.G==0||l.J||As(l.j,l)}function hn(l){Ei(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Ro(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Fo(l,p){try{var _=l.j;if(_.G!=0&&(_.g==l||zt(_.h,l))){if(!l.K&&zt(_.h,l)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)Cs(_),xn(_);else break e;Is(_),tt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Tn(I(_.Za,_),6e3));if(1>=Xa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else fr(_,11)}else if((l.K||_.g==l)&&Cs(_),!ee(p))for(L=_.Da.g.parse(p),p=0;p<L.length;p++){let Ne=L[p];if(_.T=Ne[0],Ne=Ne[1],_.G==2)if(Ne[0]=="c"){_.K=Ne[1],_.ia=Ne[2];const gt=Ne[3];gt!=null&&(_.la=gt,_.j.info("VER="+_.la));const it=Ne[4];it!=null&&(_.Aa=it,_.j.info("SVER="+_.Aa));const dn=Ne[5];dn!=null&&typeof dn=="number"&&0<dn&&(T=1.5*dn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const rn=l.g;if(rn){const Ri=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ri){var B=T.h;B.g||Ri.indexOf("spdy")==-1&&Ri.indexOf("quic")==-1&&Ri.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Uo(B,B.h),B.h=null))}if(T.D){const Rs=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rs&&(T.ya=Rs,je(T.I,T.D,Rs))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var te=l;if(T.qa=lu(T,T.J?T.ia:null,T.W),te.K){Ya(T.h,te);var Ue=te,ct=T.L;ct&&(Ue.I=ct),Ue.B&&(Ei(Ue),$e(Ue)),T.g=te}else ki(T);0<_.i.length&&Hn(_)}else Ne[0]!="stop"&&Ne[0]!="close"||fr(_,7);else _.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?fr(_,7):St(_):Ne[0]!="noop"&&_.l&&_.l.ta(Ne),_.v=0)}}ar(4)}catch{}}var Qa=class{constructor(l,p){this.g=l,this.map=p}};function Ti(l){this.l=l||10,d.PerformanceNavigationTiming?(l=d.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Xa(l){return l.h?1:l.g?l.g.size:0}function zt(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Uo(l,p){l.g?l.g.add(p):l.h=p}function Ya(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Ti.prototype.cancel=function(){if(this.i=Za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Za(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const _ of l.g.values())p=p.concat(_.D);return p}return $(l.i)}function gs(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var p=[],_=l.length,T=0;T<_;T++)p.push(l[T]);return p}p=[],_=0;for(T in l)p[_++]=l[T];return p}function ys(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var p=[];l=l.length;for(var _=0;_<l;_++)p.push(_);return p}p=[],_=0;for(const T in l)p[_++]=T;return p}}}function Dr(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var _=ys(l),T=gs(l),L=T.length,B=0;B<L;B++)p.call(void 0,T[B],_&&_[B],l)}var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pc(l,p){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var T=l[_].indexOf("="),L=null;if(0<=T){var B=l[_].substring(0,T);L=l[_].substring(T+1)}else B=l[_];p(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ur(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ur){this.h=l.h,Ii(this,l.j),this.o=l.o,this.g=l.g,Vr(this,l.s),this.l=l.l;var p=l.i,_=new Bn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Or(this,_),this.m=l.m}else l&&(p=String(l).match(Si))?(this.h=!1,Ii(this,p[1]||"",!0),this.o=Re(p[2]||""),this.g=Re(p[3]||"",!0),Vr(this,p[4]),this.l=Re(p[5]||"",!0),Or(this,p[6]||"",!0),this.m=Re(p[7]||"")):(this.h=!1,this.i=new Bn(null,this.h))}ur.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Lr(p,_s,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Lr(p,_s,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Lr(_,_.charAt(0)=="/"?tu:eu,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Lr(_,zo)),l.join("")};function tn(l){return new ur(l)}function Ii(l,p,_){l.j=_?Re(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Vr(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Or(l,p,_){p instanceof Bn?(l.i=p,$n(l.i,l.h)):(_||(p=Lr(p,nu)),l.i=new Bn(p,l.h))}function je(l,p,_){l.i.set(p,_)}function br(l){return je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Re(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Lr(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,Ja),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ja(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var _s=/[#\/\?@]/g,eu=/[#\?:]/g,tu=/[#\?]/g,nu=/[#\?@]/g,zo=/#/g;function Bn(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Tt(l){l.g||(l.g=new Map,l.h=0,l.i&&pc(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Bn.prototype,r.add=function(l,p){Tt(this),this.i=null,l=fn(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function An(l,p){Tt(l),p=fn(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function kn(l,p){return Tt(l),p=fn(l,p),l.g.has(p)}r.forEach=function(l,p){Tt(this),this.g.forEach(function(_,T){_.forEach(function(L){l.call(p,L,T,this)},this)},this)},r.na=function(){Tt(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const L=l[T];for(let B=0;B<L.length;B++)_.push(p[T])}return _},r.V=function(l){Tt(this);let p=[];if(typeof l=="string")kn(this,l)&&(p=p.concat(this.g.get(fn(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)p=p.concat(l[_])}return p},r.set=function(l,p){return Tt(this),this.i=null,l=fn(this,l),kn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},r.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Mr(l,p,_){An(l,p),0<_.length&&(l.i=null,l.g.set(fn(l,p),$(_)),l.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const B=encodeURIComponent(String(T)),te=this.V(T);for(T=0;T<te.length;T++){var L=B;te[T]!==""&&(L+="="+encodeURIComponent(String(te[T]))),l.push(L)}}return this.i=l.join("&")};function fn(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function $n(l,p){p&&!l.j&&(Tt(l),l.i=null,l.g.forEach(function(_,T){var L=T.toLowerCase();T!=L&&(An(this,T),Mr(this,L,_))},l)),l.j=p}function mc(l,p){const _=new _i;if(d.Image){const T=new Image;T.onload=N(Ht,_,"TestLoadImage: loaded",!0,p,T),T.onerror=N(Ht,_,"TestLoadImage: error",!1,p,T),T.onabort=N(Ht,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=N(Ht,_,"TestLoadImage: timeout",!1,p,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else p(!1)}function ru(l,p){const _=new _i,T=new AbortController,L=setTimeout(()=>{T.abort(),Ht(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:T.signal}).then(B=>{clearTimeout(L),B.ok?Ht(_,"TestPingServer: ok",!0,p):Ht(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Ht(_,"TestPingServer: error",!1,p)})}function Ht(l,p,_,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(_)}catch{}}function gc(){this.g=new No}function iu(l,p,_){const T=_||"";try{Dr(l,function(L,B){let te=L;y(L)&&(te=Po(L)),p.push(T+B+"="+encodeURIComponent(te))})}catch(L){throw p.push(T+"type="+encodeURIComponent("_badmap")),L}}function lr(l){this.l=l.Ub||null,this.j=l.eb||!1}F(lr,gi),lr.prototype.g=function(){return new Ci(this.l,this.j)},lr.prototype.i=function(l){return function(){return l}}({});function Ci(l,p){ut.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Ci,ut),r=Ci.prototype,r.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Pn(this)},r.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||d).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},r.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;su(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function su(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}r.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Rn(this):Pn(this),this.readyState==3&&su(this)}},r.Ra=function(l){this.g&&(this.response=this.responseText=l,Rn(this))},r.Qa=function(l){this.g&&(this.response=l,Rn(this))},r.ga=function(){this.g&&Rn(this)};function Rn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pn(l)}r.setRequestHeader=function(l,p){this.u.append(l,p)},r.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function Pn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function cr(l){let p="";return ne(l,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Fr(l,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=cr(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):je(l,p,_))}function Ge(l){ut.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Ge,ut);var yc=/^https?$/i,jo=["POST","PUT"];r=Ge.prototype,r.Ha=function(l){this.J=l},r.ea=function(l,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():In.g(),this.v=this.o?us(this.o):us(In),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(B){Ai(this,B);return}if(l=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)_.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())_.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),L=d.FormData&&l instanceof d.FormData,!(0<=Array.prototype.indexOf.call(jo,p,void 0))||T||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of _)this.g.setRequestHeader(B,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ws(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Ai(this,B)}};function Ai(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,vs(l),nn(l)}function vs(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}r.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),nn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Ge.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Bo(this):this.bb())},r.bb=function(){Bo(this)};function Bo(l){if(l.h&&typeof h<"u"&&(!l.v[1]||Kt(l)!=4||l.Z()!=2)){if(l.u&&Kt(l)==4)Ao(l.Ea,0,l);else if(lt(l,"readystatechange"),Kt(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=te===0){var L=String(l.D).match(Si)[1]||null;!L&&d.self&&d.self.location&&(L=d.self.location.protocol.slice(0,-1)),T=!yc.test(L?L.toLowerCase():"")}_=T}if(_)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var B=2<Kt(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",vs(l)}}finally{nn(l)}}}}function nn(l,p){if(l.g){ws(l);const _=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||lt(l,"ready");try{_.onreadystatechange=T}catch{}}}function ws(l){l.I&&(d.clearTimeout(l.I),l.I=null)}r.isActive=function(){return!!this.g};function Kt(l){return l.g?l.g.readyState:0}r.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),xo(p)}};function $o(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Es(l){const p={};l=(l.g&&2<=Kt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(ee(l[T]))continue;var _=D(l[T]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=p[L]||[];p[L]=B,B.push(_)}R(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function Wo(l){this.Aa=0,this.i=[],this.j=new _i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wn("baseRetryDelayMs",5e3,l),this.cb=Wn("retryDelaySeedMs",1e4,l),this.Wa=Wn("forwardChannelMaxRetries",2,l),this.wa=Wn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(l&&l.concurrentRequestLimit),this.Da=new gc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Wo.prototype,r.la=8,r.G=1,r.connect=function(l,p,_,T){tt(0),this.W=l,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=lu(this,null,this.W),Hn(this)};function St(l){if(Ts(l),l.G==3){var p=l.U++,_=tn(l.I);if(je(_,"SID",l.K),je(_,"RID",p),je(_,"TYPE","terminate"),hr(l,_),p=new Cn(l,l.j,p),p.L=2,p.v=br(tn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=p.v,_=!0),_||(p.g=cu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),$e(p)}uu(l)}function xn(l){l.g&&(Ho(l),l.g.cancel(),l.g=null)}function Ts(l){xn(l),l.u&&(d.clearTimeout(l.u),l.u=null),Cs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&d.clearTimeout(l.s),l.s=null)}function Hn(l){if(!en(l.h)&&!l.s){l.s=!0;var p=l.Ga;ze||se(),re||(ze(),re=!0),me.add(p,l),l.B=0}}function _c(l,p){return Xa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Tn(I(l.Ga,l,p),au(l,l.B)),l.B++,!0)}r.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Cn(this,this.j,l);let B=this.o;if(this.S&&(B?(B=S(B),P(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Ur(this,L,p),_=tn(this.I),je(_,"RID",l),je(_,"CVER",22),this.D&&je(_,"X-HTTP-Session-Id",this.D),hr(this,_),B&&(this.O?p="headers="+encodeURIComponent(String(cr(B)))+"&"+p:this.m&&Fr(_,this.m,B)),Uo(this.h,L),this.Ua&&je(_,"TYPE","init"),this.P?(je(_,"$req",p),je(_,"SID","null"),L.T=!0,ms(L,_,null)):ms(L,_,p),this.G=2}}else this.G==3&&(l?Ss(this,l):this.i.length==0||en(this.h)||Ss(this))};function Ss(l,p){var _;p?_=p.l:_=l.U++;const T=tn(l.I);je(T,"SID",l.K),je(T,"RID",_),je(T,"AID",l.T),hr(l,T),l.m&&l.o&&Fr(T,l.m,l.o),_=new Cn(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),p&&(l.i=p.D.concat(l.i)),p=Ur(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Uo(l.h,_),ms(_,T,p)}function hr(l,p){l.H&&ne(l.H,function(_,T){je(p,T,_)}),l.l&&Dr({},function(_,T){je(p,T,_)})}function Ur(l,p,_){_=Math.min(l.i.length,_);var T=l.l?I(l.l.Na,l.l,l):null;e:{var L=l.i;let B=-1;for(;;){const te=["count="+_];B==-1?0<_?(B=L[0].g,te.push("ofs="+B)):B=0:te.push("ofs="+B);let Ue=!0;for(let ct=0;ct<_;ct++){let Ne=L[ct].g;const gt=L[ct].map;if(Ne-=B,0>Ne)B=Math.max(0,L[ct].g-100),Ue=!1;else try{iu(gt,te,"req"+Ne+"_")}catch{T&&T(gt)}}if(Ue){T=te.join("&");break e}}}return l=l.i.splice(0,_),p.D=l,T}function ki(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;ze||se(),re||(ze(),re=!0),me.add(p,l),l.v=0}}function Is(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Tn(I(l.Fa,l),au(l,l.v)),l.v++,!0)}r.Fa=function(){if(this.u=null,ou(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tn(I(this.ab,this),l)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),xn(this),ou(this))};function Ho(l){l.A!=null&&(d.clearTimeout(l.A),l.A=null)}function ou(l){l.g=new Cn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=tn(l.qa);je(p,"RID","rpc"),je(p,"SID",l.K),je(p,"AID",l.T),je(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&je(p,"TO",l.ja),je(p,"TYPE","xmlhttp"),hr(l,p),l.m&&l.o&&Fr(p,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=br(tn(p)),_.m=null,_.P=!0,Mo(_,l)}r.Za=function(){this.C!=null&&(this.C=null,xn(this),Is(this),tt(19))};function Cs(l){l.C!=null&&(d.clearTimeout(l.C),l.C=null)}function As(l,p){var _=null;if(l.g==p){Cs(l),Ho(l),l.g=null;var T=2}else if(zt(l.h,p))_=p.D,Ya(l.h,p),T=1;else return;if(l.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var L=l.B;T=yi(),lt(T,new hs(T,_)),Hn(l)}else ki(l);else if(L=p.s,L==3||L==0&&0<p.X||!(T==1&&_c(l,p)||T==2&&Is(l)))switch(_&&0<_.length&&(p=l.h,p.i=p.i.concat(_)),L){case 1:fr(l,5);break;case 4:fr(l,10);break;case 3:fr(l,6);break;default:fr(l,2)}}}function au(l,p){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*p}function fr(l,p){if(l.j.info("Error code "+p),p==2){var _=I(l.fb,l),T=l.Xa;const L=!T;T=new ur(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ii(T,"https"),br(T),L?mc(T.toString(),_):ru(T.toString(),_)}else tt(2);l.G=0,l.l&&l.l.sa(p),uu(l),Ts(l)}r.fb=function(l){l?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function uu(l){if(l.G=0,l.ka=[],l.l){const p=Za(l.h);(p.length!=0||l.i.length!=0)&&(M(l.ka,p),M(l.ka,l.i),l.h.i.length=0,$(l.i),l.i.length=0),l.l.ra()}}function lu(l,p,_){var T=_ instanceof ur?tn(_):new ur(_);if(T.g!="")p&&(T.g=p+"."+T.g),Vr(T,T.s);else{var L=d.location;T=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var B=new ur(null);T&&Ii(B,T),p&&(B.g=p),L&&Vr(B,L),_&&(B.l=_),T=B}return _=l.D,p=l.ya,_&&p&&je(T,_,p),je(T,"VER",l.la),hr(l,T),T}function cu(l,p,_){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new Ge(new lr({eb:_})):new Ge(l.pa),p.Ha(l.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ko(){}r=Ko.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ks(){}ks.prototype.g=function(l,p){return new jt(l,p)};function jt(l,p){ut.call(this),this.g=new Wo(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!ee(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ee(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Kn(this)}F(jt,ut),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){St(this.g)},jt.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=Po(l),l=_);p.i.push(new Qa(p.Ya++,l)),p.G==3&&Hn(p)},jt.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,jt.aa.N.call(this)};function hu(l){zn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const _ in p){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}F(hu,zn);function fu(){cs.call(this),this.status=1}F(fu,cs);function Kn(l){this.g=l}F(Kn,Ko),Kn.prototype.ua=function(){lt(this.g,"a")},Kn.prototype.ta=function(l){lt(this.g,new hu(l))},Kn.prototype.sa=function(l){lt(this.g,new fu)},Kn.prototype.ra=function(){lt(this.g,"b")},ks.prototype.createWebChannel=ks.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,m_=function(){return new ks},p_=function(){return yi()},d_=jn,Af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,ml=ds,Ha.COMPLETE="complete",f_=Ha,ls.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",ut.prototype.listen=ut.prototype.K,wa=ls,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,h_=Ge}).apply(typeof ul<"u"?ul:typeof self<"u"?self:typeof window<"u"?window:{});const Cg="@firebase/firestore",Ag="4.7.7";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo="11.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new i_("@firebase/firestore");function Js(){return Yi.logLevel}function oe(r,...e){if(Yi.logLevel<=Ve.DEBUG){const t=e.map(Jf);Yi.debug(`Firestore (${yo}): ${r}`,...t)}}function Ar(r,...e){if(Yi.logLevel<=Ve.ERROR){const t=e.map(Jf);Yi.error(`Firestore (${yo}): ${r}`,...t)}}function uo(r,...e){if(Yi.logLevel<=Ve.WARN){const t=e.map(Jf);Yi.warn(`Firestore (${yo}): ${r}`,...t)}}function Jf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(r="Unexpected state"){const e=`FIRESTORE (${yo}) INTERNAL ASSERTION FAILED: `+r;throw Ar(e),new Error(e)}function Fe(r,e){r||_e()}function Ee(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends go{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class e1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mt.UNAUTHENTICATED))}shutdown(){}}class t1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class n1{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ii,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},d=g=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ii)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string"),new g_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new Mt(e)}}class r1{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class i1{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new r1(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s1{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,UT(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0);const s=u=>{u.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new kg(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe(typeof t.token=="string"),this.R=t.token,new kg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=o1(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Ae(r,e){return r<e?-1:r>e?1:0}function Rf(r,e){const t=kf().encode(r),s=kf().encode(e);for(let o=0;o<Math.min(t.length,s.length);o++){const u=Ae(t[o],s[o]);if(u!==0)return u}return Ae(t.length,s.length)}function lo(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=-62135596800,Pg=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Pg);return new dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Rg)throw new le(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pg}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Rg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new dt(0,0))}static max(){return new we(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="__name__";class Yn{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(),s===void 0?s=e.length-t:s>e.length-t&&_e(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=Yn.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Ae(e.length,t.length)}static compareSegments(e,t){const s=Yn.isNumericId(e),o=Yn.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Yn.extractNumericId(e).compare(Yn.extractNumericId(t)):Rf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ri.fromString(e.substring(4,e.length-2))}}class qe extends Yn{construct(e,t,s){return new qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new qe(t)}static emptyPath(){return new qe([])}}const a1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Yn{construct(e,t,s){return new Rt(e,t,s)}static isValidIdentifier(e){return a1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xg}static keyField(){return new Rt([xg])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new le(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new le(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(s+=d,o++):(u(),o++)}if(u(),h)throw new le(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(qe.fromString(e))}static fromName(e){return new pe(qe.fromString(e).popFirst(5))}static empty(){return new pe(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new qe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=-1;function u1(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=we.fromTimestamp(s===1e9?new dt(t+1,0):new dt(t,s));return new ai(o,pe.empty(),e)}function l1(r){return new ai(r.readTime,r.key,Na)}class ai{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ai(we.min(),pe.empty(),Na)}static max(){return new ai(we.max(),pe.empty(),Na)}}function c1(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(r.documentKey,e.documentKey),t!==0?t:Ae(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(r){if(r.code!==q.FAILED_PRECONDITION||r.message!==h1)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):H.reject(t)}static resolve(e){return new H((t,s)=>{t(e)})}static reject(e){return new H((t,s)=>{s(e)})}static waitFor(e){return new H((t,s)=>{let o=0,u=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++u,h&&u===o&&t()},g=>s(g))}),h=!0,u===o&&t()})}static or(e){let t=H.resolve(!1);for(const s of e)t=t.next(o=>o?H.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,u)=>{s.push(t.call(this,o,u))}),this.waitFor(s)}static mapArray(e,t){return new H((s,o)=>{const u=e.length,h=new Array(u);let d=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next(v=>{h[y]=v,++d,d===u&&s(h)},v=>o(v))}})}static doWhile(e,t){return new H((s,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):s()};u()})}}function d1(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.oe(s),this._e=s=>t.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Yl.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=-1;function Zl(r){return r==null}function xl(r){return r===0&&1/r==-1/0}function p1(r){return typeof r=="number"&&Number.isInteger(r)&&!xl(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="";function m1(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ng(e)),e=g1(r.get(t),e);return Ng(e)}function g1(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":t+="";break;case __:t+="";break;default:t+=u}}return t}function Ng(r){return r+__+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ji(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function v_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,t){this.comparator=e,this.root=t||kt.EMPTY}insert(e,t){return new Ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ll(this.root,e,this.comparator,!0)}}class ll{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??kt.RED,this.left=o??kt.EMPTY,this.right=u??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new kt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return kt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,t,s,o,u){return this}insert(e,t,s){return new kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vg(this.data.getIterator())}getIteratorFrom(e){return new Vg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pt(this.comparator);return t.data=e,t}}class Vg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new Fn([])}unionWith(e){let t=new pt(Rt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new w_("Invalid base64 string: "+u):u}}(e);return new Pt(t)}static fromUint8Array(e){const t=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const y1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(r){if(Fe(!!r),typeof r=="string"){let e=0;const t=y1.exec(r);if(Fe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:rt(r.seconds),nanos:rt(r.nanos)}}function rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function li(r){return typeof r=="string"?Pt.fromBase64String(r):Pt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="server_timestamp",T_="__type__",S_="__previous_value__",I_="__local_write_time__";function td(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[T_])===null||t===void 0?void 0:t.stringValue)===E_}function Jl(r){const e=r.mapValue.fields[S_];return td(e)?Jl(e):e}function Da(r){const e=ui(r.mapValue.fields[I_].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t,s,o,u,h,d,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=y}}const Nl="(default)";class Va{constructor(e,t){this.projectId=e,this.database=t||Nl}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===Nl}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="__type__",A_="__max__",cl={mapValue:{fields:{__type__:{stringValue:A_}}}},k_="__vector__",Dl="value";function ci(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?td(r)?4:w1(r)?9007199254740991:v1(r)?10:11:_e()}function nr(r,e){if(r===e)return!0;const t=ci(r);if(t!==ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Da(r).isEqual(Da(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ui(o.timestampValue),d=ui(u.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return li(o.bytesValue).isEqual(li(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return rt(o.geoPointValue.latitude)===rt(u.geoPointValue.latitude)&&rt(o.geoPointValue.longitude)===rt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return rt(o.integerValue)===rt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=rt(o.doubleValue),d=rt(u.doubleValue);return h===d?xl(h)===xl(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return lo(r.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},d=u.mapValue.fields||{};if(Dg(h)!==Dg(d))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(d[g]===void 0||!nr(h[g],d[g])))return!1;return!0}(r,e);default:return _e()}}function Oa(r,e){return(r.values||[]).find(t=>nr(t,e))!==void 0}function co(r,e){if(r===e)return 0;const t=ci(r),s=ci(e);if(t!==s)return Ae(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(r.booleanValue,e.booleanValue);case 2:return function(u,h){const d=rt(u.integerValue||u.doubleValue),g=rt(h.integerValue||h.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(r,e);case 3:return Og(r.timestampValue,e.timestampValue);case 4:return Og(Da(r),Da(e));case 5:return Rf(r.stringValue,e.stringValue);case 6:return function(u,h){const d=li(u),g=li(h);return d.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(u,h){const d=u.split("/"),g=h.split("/");for(let y=0;y<d.length&&y<g.length;y++){const v=Ae(d[y],g[y]);if(v!==0)return v}return Ae(d.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,h){const d=Ae(rt(u.latitude),rt(h.latitude));return d!==0?d:Ae(rt(u.longitude),rt(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return bg(r.arrayValue,e.arrayValue);case 10:return function(u,h){var d,g,y,v;const E=u.fields||{},I=h.fields||{},N=(d=E[Dl])===null||d===void 0?void 0:d.arrayValue,F=(g=I[Dl])===null||g===void 0?void 0:g.arrayValue,$=Ae(((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0,((v=F==null?void 0:F.values)===null||v===void 0?void 0:v.length)||0);return $!==0?$:bg(N,F)}(r.mapValue,e.mapValue);case 11:return function(u,h){if(u===cl.mapValue&&h===cl.mapValue)return 0;if(u===cl.mapValue)return 1;if(h===cl.mapValue)return-1;const d=u.fields||{},g=Object.keys(d),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const I=Rf(g[E],v[E]);if(I!==0)return I;const N=co(d[g[E]],y[v[E]]);if(N!==0)return N}return Ae(g.length,v.length)}(r.mapValue,e.mapValue);default:throw _e()}}function Og(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ae(r,e);const t=ui(r),s=ui(e),o=Ae(t.seconds,s.seconds);return o!==0?o:Ae(t.nanos,s.nanos)}function bg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=co(t[o],s[o]);if(u)return u}return Ae(t.length,s.length)}function ho(r){return Pf(r)}function Pf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=ui(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return li(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return pe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=Pf(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Pf(t.fields[h])}`;return o+"}"}(r.mapValue):_e()}function gl(r){switch(ci(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jl(r);return e?16+gl(e):16;case 5:return 2*r.stringValue.length;case 6:return li(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+gl(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ji(s.fields,(u,h)=>{o+=u.length+gl(h)}),o}(r.mapValue);default:throw _e()}}function Lg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function xf(r){return!!r&&"integerValue"in r}function nd(r){return!!r&&"arrayValue"in r}function Mg(r){return!!r&&"nullValue"in r}function Fg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function yl(r){return!!r&&"mapValue"in r}function v1(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[C_])===null||t===void 0?void 0:t.stringValue)===k_}function Sa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ji(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Sa(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function w1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===A_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!yl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sa(t)}setAll(e){let t=Rt.emptyPath(),s={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=d.popLast()}h?s[d.lastSegment()]=Sa(h):o.push(d.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());yl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];yl(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ji(t,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new wn(Sa(this.value))}}function R_(r){const e=[];return Ji(r.fields,(t,s)=>{const o=new Rt([t]);if(yl(s)){const u=R_(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,s,o,u,h,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=d}static newInvalidDocument(e){return new Ut(e,0,we.min(),we.min(),we.min(),wn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ut(e,1,t,we.min(),s,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,we.min(),we.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,we.min(),we.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t){this.position=e,this.inclusive=t}}function Ug(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?s=pe.comparator(pe.fromName(h.referenceValue),t.key):s=co(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function zg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!nr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t="asc"){this.field=e,this.dir=t}}function E1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{}class at extends P_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new S1(e,t,s):t==="array-contains"?new A1(e,s):t==="in"?new k1(e,s):t==="not-in"?new R1(e,s):t==="array-contains-any"?new P1(e,s):new at(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new I1(e,s):new C1(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(co(t,this.value)):t!==null&&ci(this.value)===ci(t)&&this.matchesComparison(co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends P_{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Un(e,t)}matches(e){return x_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function x_(r){return r.op==="and"}function N_(r){return T1(r)&&x_(r)}function T1(r){for(const e of r.filters)if(e instanceof Un)return!1;return!0}function Nf(r){if(r instanceof at)return r.field.canonicalString()+r.op.toString()+ho(r.value);if(N_(r))return r.filters.map(e=>Nf(e)).join(",");{const e=r.filters.map(t=>Nf(t)).join(",");return`${r.op}(${e})`}}function D_(r,e){return r instanceof at?function(s,o){return o instanceof at&&s.op===o.op&&s.field.isEqual(o.field)&&nr(s.value,o.value)}(r,e):r instanceof Un?function(s,o){return o instanceof Un&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,h,d)=>u&&D_(h,o.filters[d]),!0):!1}(r,e):void _e()}function V_(r){return r instanceof at?function(t){return`${t.field.canonicalString()} ${t.op} ${ho(t.value)}`}(r):r instanceof Un?function(t){return t.op.toString()+" {"+t.getFilters().map(V_).join(" ,")+"}"}(r):"Filter"}class S1 extends at{constructor(e,t,s){super(e,t,s),this.key=pe.fromName(s.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class I1 extends at{constructor(e,t){super(e,"in",t),this.keys=O_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class C1 extends at{constructor(e,t){super(e,"not-in",t),this.keys=O_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function O_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>pe.fromName(s.referenceValue))}class A1 extends at{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nd(t)&&Oa(t.arrayValue,this.value)}}class k1 extends at{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Oa(this.value.arrayValue,t)}}class R1 extends at{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Oa(this.value.arrayValue,t)}}class P1 extends at{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Oa(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t=null,s=[],o=[],u=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=d,this.le=null}}function jg(r,e=null,t=[],s=[],o=null,u=null,h=null){return new x1(r,e,t,s,o,u,h)}function rd(r){const e=Ee(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Nf(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Zl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ho(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ho(s)).join(",")),e.le=t}return e.le}function id(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!E1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!D_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zg(r.startAt,e.startAt)&&zg(r.endAt,e.endAt)}function Df(r){return pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t=null,s=[],o=[],u=null,h="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=d,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function N1(r,e,t,s,o,u,h,d){return new Fa(r,e,t,s,o,u,h,d)}function b_(r){return new Fa(r)}function Bg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function L_(r){return r.collectionGroup!==null}function Ia(r){const e=Ee(r);if(e.he===null){e.he=[];const t=new Set;for(const u of e.explicitOrderBy)e.he.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new pt(Rt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.he.push(new Ol(u,s))}),t.has(Rt.keyField().canonicalString())||e.he.push(new Ol(Rt.keyField(),s))}return e.he}function er(r){const e=Ee(r);return e.Pe||(e.Pe=D1(e,Ia(r))),e.Pe}function D1(r,e){if(r.limitType==="F")return jg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Ol(o.field,u)});const t=r.endAt?new Vl(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Vl(r.startAt.position,r.startAt.inclusive):null;return jg(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Vf(r,e){const t=r.filters.concat([e]);return new Fa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Of(r,e,t){return new Fa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ec(r,e){return id(er(r),er(e))&&r.limitType===e.limitType}function M_(r){return`${rd(er(r))}|lt:${r.limitType}`}function eo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>V_(o)).join(", ")}]`),Zl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>ho(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>ho(o)).join(",")),`Target(${s})`}(er(r))}; limitType=${r.limitType})`}function tc(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):pe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Ia(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,d,g){const y=Ug(h,d,g);return h.inclusive?y<=0:y<0}(s.startAt,Ia(s),o)||s.endAt&&!function(h,d,g){const y=Ug(h,d,g);return h.inclusive?y>=0:y>0}(s.endAt,Ia(s),o))}(r,e)}function V1(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function F_(r){return(e,t)=>{let s=!1;for(const o of Ia(r)){const u=O1(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function O1(r,e,t){const s=r.field.isKeyField()?pe.comparator(e.key,t.key):function(u,h,d){const g=h.data.field(u),y=d.data.field(u);return g!==null&&y!==null?co(g,y):_e()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(t,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return v_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new Ze(pe.comparator);function kr(){return b1}const U_=new Ze(pe.comparator);function Ea(...r){let e=U_;for(const t of r)e=e.insert(t.key,t);return e}function z_(r){let e=U_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function qi(){return Ca()}function j_(){return Ca()}function Ca(){return new es(r=>r.toString(),(r,e)=>r.isEqual(e))}const L1=new Ze(pe.comparator),M1=new pt(pe.comparator);function ke(...r){let e=M1;for(const t of r)e=e.add(t);return e}const F1=new pt(Ae);function U1(){return F1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xl(e)?"-0":e}}function B_(r){return{integerValue:""+r}}function z1(r,e){return p1(e)?B_(e):sd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this._=void 0}}function j1(r,e,t){return r instanceof bl?function(o,u){const h={fields:{[T_]:{stringValue:E_},[I_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&td(u)&&(u=Jl(u)),u&&(h.fields[S_]=u),{mapValue:h}}(t,e):r instanceof ba?W_(r,e):r instanceof La?H_(r,e):function(o,u){const h=$_(o,u),d=$g(h)+$g(o.Ie);return xf(h)&&xf(o.Ie)?B_(d):sd(o.serializer,d)}(r,e)}function B1(r,e,t){return r instanceof ba?W_(r,e):r instanceof La?H_(r,e):t}function $_(r,e){return r instanceof Ll?function(s){return xf(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class bl extends nc{}class ba extends nc{constructor(e){super(),this.elements=e}}function W_(r,e){const t=K_(e);for(const s of r.elements)t.some(o=>nr(o,s))||t.push(s);return{arrayValue:{values:t}}}class La extends nc{constructor(e){super(),this.elements=e}}function H_(r,e){let t=K_(e);for(const s of r.elements)t=t.filter(o=>!nr(o,s));return{arrayValue:{values:t}}}class Ll extends nc{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function $g(r){return rt(r.integerValue||r.doubleValue)}function K_(r){return nd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function $1(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof ba&&o instanceof ba||s instanceof La&&o instanceof La?lo(s.elements,o.elements,nr):s instanceof Ll&&o instanceof Ll?nr(s.Ie,o.Ie):s instanceof bl&&o instanceof bl}(r.transform,e.transform)}class W1{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _l(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class rc{}function q_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Q_(r.key,Sr.none()):new Ua(r.key,r.data,Sr.none());{const t=r.data,s=wn.empty();let o=new pt(Rt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ts(r.key,s,new Fn(o.toArray()),Sr.none())}}function H1(r,e,t){r instanceof Ua?function(o,u,h){const d=o.value.clone(),g=Hg(o.fieldTransforms,u,h.transformResults);d.setAll(g),u.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof ts?function(o,u,h){if(!_l(o.precondition,u))return void u.convertToUnknownDocument(h.version);const d=Hg(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(G_(o)),g.setAll(d),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Aa(r,e,t,s){return r instanceof Ua?function(u,h,d,g){if(!_l(u.precondition,h))return d;const y=u.value.clone(),v=Kg(u.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof ts?function(u,h,d,g){if(!_l(u.precondition,h))return d;const y=Kg(u.fieldTransforms,g,h),v=h.data;return v.setAll(G_(u)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(E=>E.field))}(r,e,t,s):function(u,h,d){return _l(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function K1(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=$_(s.transform,o||null);u!=null&&(t===null&&(t=wn.empty()),t.set(s.field,u))}return t||null}function Wg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&lo(s,o,(u,h)=>$1(u,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ua extends rc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ts extends rc{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function G_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Hg(r,e,t){const s=new Map;Fe(r.length===t.length);for(let o=0;o<t.length;o++){const u=r[o],h=u.transform,d=e.data.field(u.field);s.set(u.field,B1(h,d,t[o]))}return s}function Kg(r,e,t){const s=new Map;for(const o of r){const u=o.transform,h=t.data.field(o.field);s.set(o.field,j1(u,h,e))}return s}class Q_ extends rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q1 extends rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&H1(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Aa(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Aa(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=j_();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let d=this.applyToLocalView(h,u.mutatedFields);d=t.has(o.key)?null:d;const g=q_(h,d);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(we.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(t,s)=>Wg(t,s))&&lo(this.baseMutations,e.baseMutations,(t,s)=>Wg(t,s))}}class od{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Fe(e.mutations.length===s.length);let o=function(){return L1}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new od(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,De;function Y1(r){switch(r){case q.OK:return _e();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return _e()}}function X_(r){if(r===void 0)return Ar("GRPC error has no .code"),q.UNKNOWN;switch(r){case ot.OK:return q.OK;case ot.CANCELLED:return q.CANCELLED;case ot.UNKNOWN:return q.UNKNOWN;case ot.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case ot.INTERNAL:return q.INTERNAL;case ot.UNAVAILABLE:return q.UNAVAILABLE;case ot.UNAUTHENTICATED:return q.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case ot.NOT_FOUND:return q.NOT_FOUND;case ot.ALREADY_EXISTS:return q.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return q.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case ot.ABORTED:return q.ABORTED;case ot.OUT_OF_RANGE:return q.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return q.UNIMPLEMENTED;case ot.DATA_LOSS:return q.DATA_LOSS;default:return _e()}}(De=ot||(ot={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new ri([4294967295,4294967295],0);function qg(r){const e=kf().encode(r),t=new c_;return t.update(e),new Uint8Array(t.digest())}function Gg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ri([t,s],0),new ri([o,u],0)]}class ad{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ta(`Invalid padding: ${t}`);if(s<0)throw new Ta(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ta(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ta(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ri.fromNumber(this.Ee)}Ae(e,t,s){let o=e.add(t.multiply(ri.fromNumber(s)));return o.compare(Z1)===1&&(o=new ri([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=qg(e),[s,o]=Gg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ae(s,o,u);if(!this.Re(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ad(u,o,t);return s.forEach(d=>h.insert(d)),h}insert(e){if(this.Ee===0)return;const t=qg(e),[s,o]=Gg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ae(s,o,u);this.Ve(h)}}Ve(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,za.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ic(we.min(),o,new Ze(Ae),kr(),ke())}}class za{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new za(s,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t,s,o){this.me=e,this.removedTargetIds=t,this.key=s,this.fe=o}}class Y_{constructor(e,t){this.targetId=e,this.ge=t}}class Z_{constructor(e,t,s=Pt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Qg{constructor(){this.pe=0,this.ye=Xg(),this.we=Pt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ke(),t=ke(),s=ke();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e()}}),new za(this.we,this.Se,e,t,s)}Me(){this.be=!1,this.ye=Xg()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Fe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class J1{constructor(e){this.ke=e,this.qe=new Map,this.Qe=kr(),this.$e=hl(),this.Ue=hl(),this.Ke=new Ze(Ae)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const s=this.He(t);switch(e.state){case 0:this.Je(t)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(t);break;case 3:this.Je(t)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),s.Ce(e.resumeToken));break;default:_e()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((s,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,s=e.ge.count,o=this.Xe(t);if(o){const u=o.target;if(Df(u))if(s===0){const h=new pe(u.path);this.ze(t,h,Ut.newNoDocument(h,we.min()))}else Fe(s===1);else{const h=this.et(t);if(h!==s){const d=this.tt(e),g=d?this.nt(d,e,h):1;if(g!==0){this.Ye(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,d;try{h=li(s).toUint8Array()}catch(g){if(g instanceof w_)return uo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new ad(h,o,u)}catch(g){return uo(g instanceof Ta?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.Ee===0?null:d}nt(e,t,s){return t.ge.count===s-this.st(e,t.targetId)?0:2}st(e,t){const s=this.ke.getRemoteKeysForTarget(t);let o=0;return s.forEach(u=>{const h=this.ke.it(),d=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,u,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((u,h)=>{const d=this.Xe(h);if(d){if(u.current&&Df(d.target)){const g=new pe(d.target.path);this._t(g).has(h)||this.ut(h,g)||this.ze(h,g,Ut.newNoDocument(g,e))}u.ve&&(t.set(h,u.Fe()),u.Me())}});let s=ke();this.Ue.forEach((u,h)=>{let d=!0;h.forEachWhile(g=>{const y=this.Xe(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(u))}),this.Qe.forEach((u,h)=>h.setReadTime(e));const o=new ic(e,t,this.Ke,this.Qe,s);return this.Qe=kr(),this.$e=hl(),this.Ue=hl(),this.Ke=new Ze(Ae),o}Ge(e,t){if(!this.Je(e))return;const s=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,s),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),s&&(this.Qe=this.Qe.insert(t,s))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Qg,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new pt(Ae),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new pt(Ae),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Qg),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function hl(){return new Ze(pe.comparator)}function Xg(){return new Ze(pe.comparator)}const eS={asc:"ASCENDING",desc:"DESCENDING"},tS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nS={and:"AND",or:"OR"};class rS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bf(r,e){return r.useProto3Json||Zl(e)?e:{value:e}}function Ml(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function iS(r,e){return Ml(r,e.toTimestamp())}function tr(r){return Fe(!!r),we.fromTimestamp(function(t){const s=ui(t);return new dt(s.seconds,s.nanos)}(r))}function ud(r,e){return Lf(r,e).canonicalString()}function Lf(r,e){const t=function(o){return new qe(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function ev(r){const e=qe.fromString(r);return Fe(sv(e)),e}function Mf(r,e){return ud(r.databaseId,e.path)}function tf(r,e){const t=ev(e);if(t.get(1)!==r.databaseId.projectId)throw new le(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new le(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new pe(nv(t))}function tv(r,e){return ud(r.databaseId,e)}function sS(r){const e=ev(r);return e.length===4?qe.emptyPath():nv(e)}function Ff(r){return new qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function nv(r){return Fe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Yg(r,e,t){return{name:Mf(r,e),fields:t.value.mapValue.fields}}function oS(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,v){return y.useProto3Json?(Fe(v===void 0||typeof v=="string"),Pt.fromBase64String(v||"")):(Fe(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Pt.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(y){const v=y.code===void 0?q.UNKNOWN:X_(y.code);return new le(v,y.message||"")}(h);t=new Z_(s,o,u,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=tf(r,s.document.name),u=tr(s.document.updateTime),h=s.document.createTime?tr(s.document.createTime):we.min(),d=new wn({mapValue:{fields:s.document.fields}}),g=Ut.newFoundDocument(o,u,h,d),y=s.targetIds||[],v=s.removedTargetIds||[];t=new vl(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=tf(r,s.document),u=s.readTime?tr(s.readTime):we.min(),h=Ut.newNoDocument(o,u),d=s.removedTargetIds||[];t=new vl([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=tf(r,s.document),u=s.removedTargetIds||[];t=new vl([],u,o,null)}else{if(!("filter"in e))return _e();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new X1(o,u),d=s.targetId;t=new Y_(d,h)}}return t}function aS(r,e){let t;if(e instanceof Ua)t={update:Yg(r,e.key,e.value)};else if(e instanceof Q_)t={delete:Mf(r,e.key)};else if(e instanceof ts)t={update:Yg(r,e.key,e.data),updateMask:gS(e.fieldMask)};else{if(!(e instanceof q1))return _e();t={verify:Mf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const d=h.transform;if(d instanceof bl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ba)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof La)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ll)return{fieldPath:h.field.canonicalString(),increment:d.Ie};throw _e()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:iS(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:_e()}(r,e.precondition)),t}function uS(r,e){return r&&r.length>0?(Fe(e!==void 0),r.map(t=>function(o,u){let h=o.updateTime?tr(o.updateTime):tr(u);return h.isEqual(we.min())&&(h=tr(u)),new W1(h,o.transformResults||[])}(t,e))):[]}function lS(r,e){return{documents:[tv(r,e.path)]}}function cS(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=tv(r,o);const u=function(y){if(y.length!==0)return iv(Un.create(y,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const h=function(y){if(y.length!==0)return y.map(v=>function(I){return{field:to(I.field),direction:dS(I.dir)}}(v))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=bf(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ht:t,parent:o}}function hS(r){let e=sS(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Fe(s===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];t.where&&(u=function(E){const I=rv(E);return I instanceof Un&&N_(I)?I.getFilters():[I]}(t.where));let h=[];t.orderBy&&(h=function(E){return E.map(I=>function(F){return new Ol(no(F.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(E){let I;return I=typeof E=="object"?E.value:E,Zl(I)?null:I}(t.limit));let g=null;t.startAt&&(g=function(E){const I=!!E.before,N=E.values||[];return new Vl(N,I)}(t.startAt));let y=null;return t.endAt&&(y=function(E){const I=!E.before,N=E.values||[];return new Vl(N,I)}(t.endAt)),N1(e,o,h,u,d,"F",g,y)}function fS(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=no(t.unaryFilter.field);return at.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=no(t.unaryFilter.field);return at.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=no(t.unaryFilter.field);return at.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=no(t.unaryFilter.field);return at.create(h,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(r):r.fieldFilter!==void 0?function(t){return at.create(no(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Un.create(t.compositeFilter.filters.map(s=>rv(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e()}}(t.compositeFilter.op))}(r):_e()}function dS(r){return eS[r]}function pS(r){return tS[r]}function mS(r){return nS[r]}function to(r){return{fieldPath:r.canonicalString()}}function no(r){return Rt.fromServerFormat(r.fieldPath)}function iv(r){return r instanceof at?function(t){if(t.op==="=="){if(Fg(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NAN"}};if(Mg(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fg(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NOT_NAN"}};if(Mg(t.value))return{unaryFilter:{field:to(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(t.field),op:pS(t.op),value:t.value}}}(r):r instanceof Un?function(t){const s=t.getFilters().map(o=>iv(o));return s.length===1?s[0]:{compositeFilter:{op:mS(t.op),filters:s}}}(r):_e()}function gS(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t,s,o,u=we.min(),h=we.min(),d=Pt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.Tt=e}}function _S(r){const e=hS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Of(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.Tn=new wS}addToCollectionParentIndex(e,t){return this.Tn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(ai.min())}updateCollectionGroup(e,t,s){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class wS{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new pt(qe.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new pt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ov=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(ov,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new fo(0)}static Kn(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="LruGarbageCollector",ES=1048576;function ey([r,e],[t,s]){const o=Ae(r,t);return o===0?Ae(e,s):o}class TS{constructor(e){this.Hn=e,this.buffer=new pt(ey),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ey(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SS{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){oe(Jg,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vo(t)?oe(Jg,"Ignoring IndexedDB error during garbage collection: ",t):await _o(t)}await this.er(3e5)})}}class IS{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Yl.ae);const s=new TS(t);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.tr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Zg)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zg):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let s,o,u,h,d,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(s=E,d=Date.now(),this.removeTargets(e,s,t))).next(E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(E=>(y=Date.now(),Js()<=Ve.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${u} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E})))}}function CS(r,e){return new IS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.changes=new es(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?H.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&Aa(s.mutation,o,Fn.empty(),dt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ke()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ke()){const o=qi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(u=>{let h=Ea();return u.forEach((d,g)=>{h=h.insert(d,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=qi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ke()))}populateOverlays(e,t,s){const o=[];return s.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,s,o){let u=kr();const h=Ca(),d=function(){return Ca()}();return t.forEach((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof ts)?u=u.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),Aa(v.mutation,y,v.mutation.getFieldMask(),dt.now())):h.set(y.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((y,v)=>h.set(y,v)),t.forEach((y,v)=>{var E;return d.set(y,new kS(v,(E=h.get(y))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,t){const s=Ca();let o=new Ze((h,d)=>h-d),u=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||Fn.empty();v=d.applyToLocalView(y,v),s.set(g,v);const E=(o.get(d.batchId)||ke()).add(g);o=o.insert(d.batchId,E)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),y=g.key,v=g.value,E=j_();v.forEach(I=>{if(!u.has(I)){const N=q_(t.get(I),s.get(I));N!==null&&E.set(I,N),u=u.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return H.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return pe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):L_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):H.resolve(qi());let d=Na,g=u;return h.next(y=>H.forEach(y,(v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),u.get(v)?H.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{g=g.insert(v,I)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,g,y,ke())).next(v=>({batchId:d,changes:z_(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(s=>{let o=Ea();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=Ea();return this.indexManager.getCollectionParents(e,u).next(d=>H.forEach(d,g=>{const y=function(E,I){return new Fa(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(v=>{v.forEach((E,I)=>{h=h.insert(E,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o))).next(h=>{u.forEach((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Ut.newInvalidDocument(v)))});let d=Ea();return h.forEach((g,y)=>{const v=u.get(g);v!==void 0&&Aa(v.mutation,y,Fn.empty(),dt.now()),tc(t,y)&&(d=d.insert(g,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return H.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:tr(o.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:_S(o.bundledQuery),readTime:tr(o.readTime)}}(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.overlays=new Ze(pe.comparator),this.Rr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const s=qi();return H.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,u)=>{this.Et(e,t,u)}),H.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),H.resolve()}getOverlaysForCollection(e,t,s){const o=qi(),u=t.length+1,h=new pe(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return H.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new Ze((y,v)=>y-v);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=u.get(y.largestBatchId);v===null&&(v=qi(),u=u.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const d=qi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,v)=>d.set(y,v)),!(d.size()>=o)););return H.resolve(d)}Et(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new Q1(t,s));let u=this.Rr.get(t);u===void 0&&(u=ke(),this.Rr.set(t,u)),this.Rr.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this.Vr=new pt(Et.mr),this.gr=new pt(Et.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const s=new Et(e,t);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.wr(new Et(e,t))}Sr(e,t){e.forEach(s=>this.removeReference(s,t))}br(e){const t=new pe(new qe([])),s=new Et(t,e),o=new Et(t,e+1),u=[];return this.gr.forEachInRange([s,o],h=>{this.wr(h),u.push(h.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new pe(new qe([])),s=new Et(t,e),o=new Et(t,e+1);let u=ke();return this.gr.forEachInRange([s,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Et(e,0),s=this.Vr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Et{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return pe.comparator(e.key,t.key)||Ae(e.Cr,t.Cr)}static pr(e,t){return Ae(e.Cr,t.Cr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new pt(Et.mr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new G1(u,t,s,o);this.mutationQueue.push(h);for(const d of o)this.Mr=this.Mr.add(new Et(d.key,u)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return H.resolve(h)}lookupMutationBatch(e,t){return H.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Nr(s),u=o<0?0:o;return H.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?ed:this.Fr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Et(t,0),o=new Et(t,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],h=>{const d=this.Or(h.Cr);u.push(d)}),H.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new pt(Ae);return t.forEach(o=>{const u=new Et(o,0),h=new Et(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,h],d=>{s=s.add(d.Cr)})}),H.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;pe.isDocumentKey(u)||(u=u.child(""));const h=new Et(new pe(u),0);let d=new pt(Ae);return this.Mr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(d=d.add(g.Cr)),!0)},h),H.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Fe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return H.forEach(t.mutations,o=>{const u=new Et(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,t){const s=new Et(t,0),o=this.Mr.firstAfterOrEqual(s);return H.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.kr=e,this.docs=function(){return new Ze(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.kr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return H.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let s=kr();return t.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Ut.newInvalidDocument(o))}),H.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=kr();const h=t.path,d=new pe(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||c1(l1(v),s)<=0||(o.has(v.key)||tc(t,v))&&(u=u.insert(v.key,v.mutableCopy()))}return H.resolve(u)}getAllFromCollectionGroup(e,t,s,o){_e()}qr(e,t){return H.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new OS(this)}getSize(e){return H.resolve(this.size)}}class OS extends AS{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),H.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.persistence=e,this.Qr=new es(t=>rd(t),id),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ld,this.targetCount=0,this.Kr=fo.Un()}forEachTarget(e,t){return this.Qr.forEach((s,o)=>t(o)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$r&&(this.$r=t),H.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new fo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.zn(t),H.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.Qr.forEach((h,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.Qr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),H.waitFor(u).next(()=>o)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const s=this.Qr.get(t)||null;return H.resolve(s)}addMatchingKeys(e,t,s){return this.Ur.yr(t,s),H.resolve()}removeMatchingKeys(e,t,s){this.Ur.Sr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),H.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),H.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ur.vr(t);return H.resolve(s)}containsKey(e,t){return H.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Yl(0),this.zr=!1,this.zr=!0,this.jr=new NS,this.referenceDelegate=e(this),this.Hr=new bS(this),this.indexManager=new vS,this.remoteDocumentCache=function(o){return new VS(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new yS(t),this.Yr=new PS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Wr[e.toKey()];return s||(s=new DS(t,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const o=new LS(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,t){return H.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,t)))}}class LS extends f1{constructor(e){super(),this.currentSequenceNumber=e}}class cd{constructor(e){this.persistence=e,this.ti=new ld,this.ni=null}static ri(e){return new cd(e)}get ii(){if(this.ni)return this.ni;throw _e()}addReference(e,t,s){return this.ti.addReference(s,t),this.ii.delete(s.toString()),H.resolve()}removeReference(e,t,s){return this.ti.removeReference(s,t),this.ii.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),H.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.ii,s=>{const o=pe.fromPath(s);return this.si(e,o).next(u=>{u||t.removeEntry(o,we.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(s=>{s?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return H.or([()=>H.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Fl{constructor(e,t){this.persistence=e,this.oi=new es(s=>m1(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=CS(this,t)}static ri(e,t){return new Fl(e,t)}Zr(){}Xr(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}sr(e){let t=0;return this.rr(e,s=>{t++}).next(()=>t)}rr(e,t){return H.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?H.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,h=>this.ar(e,h,t).next(d=>{d||(s++,u.removeEntry(h,we.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),H.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gl(e.data.value)),t}ar(e,t,s){return H.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return H.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Hi=s,this.Ji=o}static Yi(e,t){let s=ke(),o=ke();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new hd(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return L0()?8:d1(O0())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.rs(e,t).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ss(e,t,o,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new MS;return this._s(e,t,h).next(d=>{if(u.result=d,this.Xi)return this.us(e,t,h,d.size)})}).next(()=>u.result)}us(e,t,s,o){return s.documentReadCount<this.es?(Js()<=Ve.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),H.resolve()):(Js()<=Ve.DEBUG&&oe("QueryEngine","Query:",eo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(Js()<=Ve.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(t))):H.resolve())}rs(e,t){if(Bg(t))return H.resolve(null);let s=er(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Of(t,null,"F"),s=er(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=ke(...u);return this.ns.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.cs(t,d);return this.ls(t,y,h,g.readTime)?this.rs(e,Of(t,null,"F")):this.hs(e,y,t,g)}))})))}ss(e,t,s,o){return Bg(t)||o.isEqual(we.min())?H.resolve(null):this.ns.getDocuments(e,s).next(u=>{const h=this.cs(t,u);return this.ls(t,h,s,o)?H.resolve(null):(Js()<=Ve.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),eo(t)),this.hs(e,h,t,u1(o,Na)).next(d=>d))})}cs(e,t){let s=new pt(F_(e));return t.forEach((o,u)=>{tc(e,u)&&(s=s.add(u))}),s}ls(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,t,s){return Js()<=Ve.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",eo(t)),this.ns.getDocumentsMatchingQuery(e,t,ai.min(),s)}hs(e,t,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="LocalStore",US=3e8;class zS{constructor(e,t,s,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new Ze(Ae),this.Is=new es(u=>rd(u),id),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RS(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function jS(r,e,t,s){return new zS(r,e,t,s)}async function uv(r,e){const t=Ee(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,t.As(e),t.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],d=[];let g=ke();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of u){d.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next(y=>({Rs:y,removedBatchIds:h,addedBatchIds:d}))})})}function BS(r,e){const t=Ee(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,g,y,v){const E=y.batch,I=E.keys();let N=H.resolve();return I.forEach(F=>{N=N.next(()=>v.getEntry(g,F)).next($=>{const M=y.docVersions.get(F);Fe(M!==null),$.version.compareTo(M)<0&&(E.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),v.addEntry($)))})}),N.next(()=>d.mutationQueue.removeMutationBatch(g,E))}(t,s,e,u).next(()=>u.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let g=ke();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(g=g.add(d.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function lv(r){const e=Ee(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function $S(r,e){const t=Ee(r),s=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const d=[];e.targetChanges.forEach((v,E)=>{const I=o.get(E);if(!I)return;d.push(t.Hr.removeMatchingKeys(u,v.removedDocuments,E).next(()=>t.Hr.addMatchingKeys(u,v.addedDocuments,E)));let N=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?N=N.withResumeToken(Pt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,s)),o=o.insert(E,N),function($,M,Z){return $.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=US?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0}(I,N,v)&&d.push(t.Hr.updateTargetData(u,N))});let g=kr(),y=ke();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(u,v))}),d.push(WS(u,h,e.documentUpdates).next(v=>{g=v.Vs,y=v.fs})),!s.isEqual(we.min())){const v=t.Hr.getLastRemoteSnapshotVersion(u).next(E=>t.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));d.push(v)}return H.waitFor(d).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,g,y)).next(()=>g)}).then(u=>(t.Ts=o,u))}function WS(r,e,t){let s=ke(),o=ke();return t.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let h=kr();return t.forEach((d,g)=>{const y=u.get(d);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(d,g.readTime),h=h.insert(d,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(d,g)):oe(fd,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",g.version)}),{Vs:h,fs:o}})}function HS(r,e){const t=Ee(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ed),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function KS(r,e){const t=Ee(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Hr.getTargetData(s,e).next(u=>u?(o=u,H.resolve(o)):t.Hr.allocateTargetId(s).next(h=>(o=new ei(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(s.targetId,s),t.Is.set(e,s.targetId)),s})}async function Uf(r,e,t){const s=Ee(r),o=s.Ts.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!vo(h))throw h;oe(fd,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function ty(r,e,t){const s=Ee(r);let o=we.min(),u=ke();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,y,v){const E=Ee(g),I=E.Is.get(v);return I!==void 0?H.resolve(E.Ts.get(I)):E.Hr.getTargetData(y,v)}(s,h,er(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(h,d.targetId).next(g=>{u=g})}).next(()=>s.Ps.getDocumentsMatchingQuery(h,e,t?o:we.min(),t?u:ke())).next(d=>(qS(s,V1(e),d),{documents:d,gs:u})))}function qS(r,e,t){let s=r.Es.get(e)||we.min();t.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Es.set(e,s)}class ny{constructor(){this.activeTargetIds=U1()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GS{constructor(){this.ho=new ny,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,s){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new ny,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="ConnectivityMonitor";class iy{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){oe(ry,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){oe(ry,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl=null;function zf(){return fl===null?fl=function(){return 268435456+Math.round(2147483648*Math.random())}():fl++,"0x"+fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="RestConnection",XS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YS{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Nl?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,t,s,o,u){const h=zf(),d=this.bo(e,t.toUriEncodedString());oe(nf,`Sending RPC '${e}' ${h}:`,d,s);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,u),this.vo(e,d,g,s).then(y=>(oe(nf,`Received RPC '${e}' ${h}: `,y),y),y=>{throw uo(nf,`RPC '${e}' ${h} failed with error: `,y,"url: ",d,"request:",s),y})}Co(e,t,s,o,u,h){return this.So(e,t,s,o,u)}Do(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,t){const s=XS[e];return`${this.po}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class JS extends YS{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,s,o){const u=zf();return new Promise((h,d)=>{const g=new h_;g.setWithCredentials(!0),g.listenOnce(f_.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case ml.NO_ERROR:const v=g.getResponseJson();oe(Lt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),h(v);break;case ml.TIMEOUT:oe(Lt,`RPC '${e}' ${u} timed out`),d(new le(q.DEADLINE_EXCEEDED,"Request time out"));break;case ml.HTTP_ERROR:const E=g.getStatus();if(oe(Lt,`RPC '${e}' ${u} failed with status:`,E,"response text:",g.getResponseText()),E>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const N=I==null?void 0:I.error;if(N&&N.status&&N.message){const F=function(M){const Z=M.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(Z)>=0?Z:q.UNKNOWN}(N.status);d(new le(F,N.message))}else d(new le(q.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new le(q.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{oe(Lt,`RPC '${e}' ${u} completed.`)}});const y=JSON.stringify(o);oe(Lt,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",y,s,15)})}Wo(e,t,s){const o=zf(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=m_(),d=p_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=u.join("");oe(Lt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=h.createWebChannel(v,g);let I=!1,N=!1;const F=new ZS({Fo:M=>{N?oe(Lt,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(I||(oe(Lt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),oe(Lt,`RPC '${e}' stream ${o} sending:`,M),E.send(M))},Mo:()=>E.close()}),$=(M,Z,ee)=>{M.listen(Z,G=>{try{ee(G)}catch(W){setTimeout(()=>{throw W},0)}})};return $(E,wa.EventType.OPEN,()=>{N||(oe(Lt,`RPC '${e}' stream ${o} transport opened.`),F.Qo())}),$(E,wa.EventType.CLOSE,()=>{N||(N=!0,oe(Lt,`RPC '${e}' stream ${o} transport closed`),F.Uo())}),$(E,wa.EventType.ERROR,M=>{N||(N=!0,uo(Lt,`RPC '${e}' stream ${o} transport errored:`,M),F.Uo(new le(q.UNAVAILABLE,"The operation could not be completed")))}),$(E,wa.EventType.MESSAGE,M=>{var Z;if(!N){const ee=M.data[0];Fe(!!ee);const G=ee,W=(G==null?void 0:G.error)||((Z=G[0])===null||Z===void 0?void 0:Z.error);if(W){oe(Lt,`RPC '${e}' stream ${o} received error:`,W);const ce=W.status;let ne=function(A){const P=ot[A];if(P!==void 0)return X_(P)}(ce),R=W.message;ne===void 0&&(ne=q.INTERNAL,R="Unknown error status: "+ce+" with message "+W.message),N=!0,F.Uo(new le(ne,R)),E.close()}else oe(Lt,`RPC '${e}' stream ${o} received:`,ee),F.Ko(ee)}}),$(d,d_.STAT_EVENT,M=>{M.stat===Af.PROXY?oe(Lt,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===Af.NOPROXY&&oe(Lt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{F.$o()},0),F}}function rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(r){return new rS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=t,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="PersistentStream";class hv{constructor(e,t,s,o,u,h,d,g){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new cv(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Ar(t.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===t&&this.V_(s,o)},s=>{e(()=>{const o=new le(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,t){const s=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return oe(sy,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(oe(sy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eI extends hv{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=oS(this.serializer,e),s=function(u){if(!("targetChange"in u))return we.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?we.min():h.readTime?tr(h.readTime):we.min()}(e);return this.listener.p_(t,s)}y_(e){const t={};t.database=Ff(this.serializer),t.addTarget=function(u,h){let d;const g=h.target;if(d=Df(g)?{documents:lS(u,g)}:{query:cS(u,g).ht},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=J_(u,h.resumeToken);const y=bf(u,h.expectedCount);y!==null&&(d.expectedCount=y)}else if(h.snapshotVersion.compareTo(we.min())>0){d.readTime=Ml(u,h.snapshotVersion.toTimestamp());const y=bf(u,h.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const s=fS(this.serializer,e);s&&(t.labels=s),this.I_(t)}w_(e){const t={};t.database=Ff(this.serializer),t.removeTarget=e,this.I_(t)}}class tI extends hv{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=uS(e.writeResults,e.commitTime),s=tr(e.commitTime);return this.listener.v_(s,t)}C_(){const e={};e.database=Ff(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>aS(this.serializer,s))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{}class rI extends nI{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new le(q.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.So(e,Lf(t,s),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(q.UNKNOWN,u.toString())})}Co(e,t,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Co(e,Lf(t,s),o,h,d,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(q.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class iI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ar(t),this.N_=!1):oe("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="RemoteStore";class sI{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(h=>{s.enqueueAndForget(async()=>{ns(this)&&(oe(Zi,"Restarting streams for network reachability change."),await async function(g){const y=Ee(g);y.W_.add(4),await ja(y),y.j_.set("Unknown"),y.W_.delete(4),await oc(y)}(this))})}),this.j_=new iI(s,o)}}async function oc(r){if(ns(r))for(const e of r.G_)await e(!0)}async function ja(r){for(const e of r.G_)await e(!1)}function fv(r,e){const t=Ee(r);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),gd(t)?md(t):wo(t).c_()&&pd(t,e))}function dd(r,e){const t=Ee(r),s=wo(t);t.K_.delete(e),s.c_()&&dv(t,e),t.K_.size===0&&(s.c_()?s.P_():ns(t)&&t.j_.set("Unknown"))}function pd(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wo(r).y_(e)}function dv(r,e){r.H_.Ne(e),wo(r).w_(e)}function md(r){r.H_=new J1({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.K_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),wo(r).start(),r.j_.B_()}function gd(r){return ns(r)&&!wo(r).u_()&&r.K_.size>0}function ns(r){return Ee(r).W_.size===0}function pv(r){r.H_=void 0}async function oI(r){r.j_.set("Online")}async function aI(r){r.K_.forEach((e,t)=>{pd(r,e)})}async function uI(r,e){pv(r),gd(r)?(r.j_.q_(e),md(r)):r.j_.set("Unknown")}async function lI(r,e,t){if(r.j_.set("Online"),e instanceof Z_&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const d of u.targetIds)o.K_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.K_.delete(d),o.H_.removeTarget(d))}(r,e)}catch(s){oe(Zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ul(r,s)}else if(e instanceof vl?r.H_.We(e):e instanceof Y_?r.H_.Ze(e):r.H_.je(e),!t.isEqual(we.min()))try{const s=await lv(r.localStore);t.compareTo(s)>=0&&await function(u,h){const d=u.H_.ot(h);return d.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=u.K_.get(y);v&&u.K_.set(y,v.withResumeToken(g.resumeToken,h))}}),d.targetMismatches.forEach((g,y)=>{const v=u.K_.get(g);if(!v)return;u.K_.set(g,v.withResumeToken(Pt.EMPTY_BYTE_STRING,v.snapshotVersion)),dv(u,g);const E=new ei(v.target,g,y,v.sequenceNumber);pd(u,E)}),u.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(s){oe(Zi,"Failed to raise snapshot:",s),await Ul(r,s)}}async function Ul(r,e,t){if(!vo(e))throw e;r.W_.add(1),await ja(r),r.j_.set("Offline"),t||(t=()=>lv(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{oe(Zi,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await oc(r)})}function mv(r,e){return e().catch(t=>Ul(r,t,e))}async function ac(r){const e=Ee(r),t=hi(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:ed;for(;cI(e);)try{const o=await HS(e.localStore,s);if(o===null){e.U_.length===0&&t.P_();break}s=o.batchId,hI(e,o)}catch(o){await Ul(e,o)}gv(e)&&yv(e)}function cI(r){return ns(r)&&r.U_.length<10}function hI(r,e){r.U_.push(e);const t=hi(r);t.c_()&&t.S_&&t.b_(e.mutations)}function gv(r){return ns(r)&&!hi(r).u_()&&r.U_.length>0}function yv(r){hi(r).start()}async function fI(r){hi(r).C_()}async function dI(r){const e=hi(r);for(const t of r.U_)e.b_(t.mutations)}async function pI(r,e,t){const s=r.U_.shift(),o=od.from(s,e,t);await mv(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await ac(r)}async function mI(r,e){e&&hi(r).S_&&await async function(s,o){if(function(h){return Y1(h)&&h!==q.ABORTED}(o.code)){const u=s.U_.shift();hi(s).h_(),await mv(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await ac(s)}}(r,e),gv(r)&&yv(r)}async function oy(r,e){const t=Ee(r);t.asyncQueue.verifyOperationInProgress(),oe(Zi,"RemoteStore received new credentials");const s=ns(t);t.W_.add(3),await ja(t),s&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await oc(t)}async function gI(r,e){const t=Ee(r);e?(t.W_.delete(2),await oc(t)):e||(t.W_.add(2),await ja(t),t.j_.set("Unknown"))}function wo(r){return r.J_||(r.J_=function(t,s,o){const u=Ee(t);return u.M_(),new eI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{xo:oI.bind(null,r),No:aI.bind(null,r),Lo:uI.bind(null,r),p_:lI.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),gd(r)?md(r):r.j_.set("Unknown")):(await r.J_.stop(),pv(r))})),r.J_}function hi(r){return r.Y_||(r.Y_=function(t,s,o){const u=Ee(t);return u.M_(),new tI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:fI.bind(null,r),Lo:mI.bind(null,r),D_:dI.bind(null,r),v_:pI.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await ac(r)):(await r.Y_.stop(),r.U_.length>0&&(oe(Zi,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,d=new yd(e,t,h,o,u);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _d(r,e){if(Ar("AsyncQueue",`${e}: ${r}`),vo(r))return new le(q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{static emptySet(e){return new so(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||pe.comparator(t.key,s.key):(t,s)=>pe.comparator(t.key,s.key),this.keyedMap=Ea(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new so;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.Z_=new Ze(pe.comparator)}track(e){const t=e.doc.key,s=this.Z_.get(t);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(t):e.type===1&&s.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):_e():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class po{constructor(e,t,s,o,u,h,d,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new po(e,t,so.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ec(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class _I{constructor(){this.queries=uy(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,s){const o=Ee(t),u=o.queries;o.queries=uy(),u.forEach((h,d)=>{for(const g of d.ta)g.onError(s)})})(this,new le(q.ABORTED,"Firestore shutting down"))}}function uy(){return new es(r=>M_(r),ec)}async function vI(r,e){const t=Ee(r);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new yI,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await t.onListen(o,!0);break;case 1:u.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=_d(h,`Initialization of query '${eo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,u),u.ta.push(e),e.sa(t.onlineState),u.ea&&e.oa(u.ea)&&vd(t)}async function wI(r,e){const t=Ee(r),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.ta.indexOf(e);h>=0&&(u.ta.splice(h,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function EI(r,e){const t=Ee(r);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const d of h.ta)d.oa(o)&&(s=!0);h.ea=o}}s&&vd(t)}function TI(r,e,t){const s=Ee(r),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(t);s.queries.delete(e)}function vd(r){r.ia.forEach(e=>{e.next()})}var jf,ly;(ly=jf||(jf={}))._a="default",ly.Cache="cache";class SI{constructor(e,t,s){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new po(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const s=t!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==jf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.key=e}}class vv{constructor(e){this.key=e}}class II{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ke(),this.mutatedKeys=ke(),this.ya=F_(e),this.wa=new so(this.ya)}get Sa(){return this.fa}ba(e,t){const s=t?t.Da:new ay,o=t?t.wa:this.wa;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,E)=>{const I=o.get(v),N=tc(this.query,E)?E:null,F=!!I&&this.mutatedKeys.has(I.key),$=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let M=!1;I&&N?I.data.isEqual(N.data)?F!==$&&(s.track({type:3,doc:N}),M=!0):this.va(I,N)||(s.track({type:2,doc:N}),M=!0,(g&&this.ya(N,g)>0||y&&this.ya(N,y)<0)&&(d=!0)):!I&&N?(s.track({type:0,doc:N}),M=!0):I&&!N&&(s.track({type:1,doc:I}),M=!0,(g||y)&&(d=!0)),M&&(N?(h=h.add(N),u=$?u.add(v):u.delete(v)):(h=h.delete(v),u=u.delete(v)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{wa:h,Da:s,ls:d,mutatedKeys:u}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const h=e.Da.X_();h.sort((v,E)=>function(N,F){const $=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return $(N)-$(F)}(v.type,E.type)||this.ya(v.doc,E.doc)),this.Ca(s),o=o!=null&&o;const d=t&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,y=g!==this.ga;return this.ga=g,h.length!==0||y?{snapshot:new po(this.query,e.wa,u,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ay,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ke(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const t=[];return e.forEach(s=>{this.pa.has(s)||t.push(new vv(s))}),this.pa.forEach(s=>{e.has(s)||t.push(new _v(s))}),t}Oa(e){this.fa=e.gs,this.pa=ke();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return po.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const wd="SyncEngine";class CI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class AI{constructor(e){this.key=e,this.Ba=!1}}class kI{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new es(d=>M_(d),ec),this.qa=new Map,this.Qa=new Set,this.$a=new Ze(pe.comparator),this.Ua=new Map,this.Ka=new ld,this.Wa={},this.Ga=new Map,this.za=fo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function RI(r,e,t=!0){const s=Cv(r);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await wv(s,e,t,!0),o}async function PI(r,e){const t=Cv(r);await wv(t,e,!0,!1)}async function wv(r,e,t,s){const o=await KS(r.localStore,er(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,t);let d;return s&&(d=await xI(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&fv(r.remoteStore,o),d}async function xI(r,e,t,s,o){r.Ha=(E,I,N)=>async function($,M,Z,ee){let G=M.view.ba(Z);G.ls&&(G=await ty($.localStore,M.query,!1).then(({documents:R})=>M.view.ba(R,G)));const W=ee&&ee.targetChanges.get(M.targetId),ce=ee&&ee.targetMismatches.get(M.targetId)!=null,ne=M.view.applyChanges(G,$.isPrimaryClient,W,ce);return hy($,M.targetId,ne.Ma),ne.snapshot}(r,E,I,N);const u=await ty(r.localStore,e,!0),h=new II(e,u.gs),d=h.ba(u.documents),g=za.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(d,r.isPrimaryClient,g);hy(r,t,y.Ma);const v=new CI(e,t,h);return r.ka.set(e,v),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),y.snapshot}async function NI(r,e,t){const s=Ee(r),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(h=>!ec(h,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Uf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&dd(s.remoteStore,o.targetId),Bf(s,o.targetId)}).catch(_o)):(Bf(s,o.targetId),await Uf(s.localStore,o.targetId,!0))}async function DI(r,e){const t=Ee(r),s=t.ka.get(e),o=t.qa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),dd(t.remoteStore,s.targetId))}async function VI(r,e,t){const s=zI(r);try{const o=await function(h,d){const g=Ee(h),y=dt.now(),v=d.reduce((N,F)=>N.add(F.key),ke());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",N=>{let F=kr(),$=ke();return g.ds.getEntries(N,v).next(M=>{F=M,F.forEach((Z,ee)=>{ee.isValidDocument()||($=$.add(Z))})}).next(()=>g.localDocuments.getOverlayedDocuments(N,F)).next(M=>{E=M;const Z=[];for(const ee of d){const G=K1(ee,E.get(ee.key).overlayedDocument);G!=null&&Z.push(new ts(ee.key,G,R_(G.value.mapValue),Sr.exists(!0)))}return g.mutationQueue.addMutationBatch(N,y,Z,d)}).next(M=>{I=M;const Z=M.applyToLocalDocumentSet(E,$);return g.documentOverlayCache.saveOverlays(N,M.batchId,Z)})}).then(()=>({batchId:I.batchId,changes:z_(E)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,d,g){let y=h.Wa[h.currentUser.toKey()];y||(y=new Ze(Ae)),y=y.insert(d,g),h.Wa[h.currentUser.toKey()]=y}(s,o.batchId,t),await Ba(s,o.changes),await ac(s.remoteStore)}catch(o){const u=_d(o,"Failed to persist write");t.reject(u)}}async function Ev(r,e){const t=Ee(r);try{const s=await $S(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.Ua.get(u);h&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?Fe(h.Ba):o.removedDocuments.size>0&&(Fe(h.Ba),h.Ba=!1))}),await Ba(t,s,e)}catch(s){await _o(s)}}function cy(r,e,t){const s=Ee(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.ka.forEach((u,h)=>{const d=h.view.sa(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const g=Ee(h);g.onlineState=d;let y=!1;g.queries.forEach((v,E)=>{for(const I of E.ta)I.sa(d)&&(y=!0)}),y&&vd(g)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function OI(r,e,t){const s=Ee(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ua.get(e),u=o&&o.key;if(u){let h=new Ze(pe.comparator);h=h.insert(u,Ut.newNoDocument(u,we.min()));const d=ke().add(u),g=new ic(we.min(),new Map,new Ze(Ae),h,d);await Ev(s,g),s.$a=s.$a.remove(u),s.Ua.delete(e),Ed(s)}else await Uf(s.localStore,e,!1).then(()=>Bf(s,e,t)).catch(_o)}async function bI(r,e){const t=Ee(r),s=e.batch.batchId;try{const o=await BS(t.localStore,e);Sv(t,s,null),Tv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ba(t,o)}catch(o){await _o(o)}}async function LI(r,e,t){const s=Ee(r);try{const o=await function(h,d){const g=Ee(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return g.mutationQueue.lookupMutationBatch(y,d).next(E=>(Fe(E!==null),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>g.localDocuments.getDocuments(y,v))})}(s.localStore,e);Sv(s,e,t),Tv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ba(s,o)}catch(o){await _o(o)}}function Tv(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function Sv(r,e,t){const s=Ee(r);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function Bf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.qa.get(e))r.ka.delete(s),t&&r.La.Ja(s,t);r.qa.delete(e),r.isPrimaryClient&&r.Ka.br(e).forEach(s=>{r.Ka.containsKey(s)||Iv(r,s)})}function Iv(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(dd(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ua.delete(t),Ed(r))}function hy(r,e,t){for(const s of t)s instanceof _v?(r.Ka.addReference(s.key,e),MI(r,s)):s instanceof vv?(oe(wd,"Document no longer in limbo: "+s.key),r.Ka.removeReference(s.key,e),r.Ka.containsKey(s.key)||Iv(r,s.key)):_e()}function MI(r,e){const t=e.key,s=t.path.canonicalString();r.$a.get(t)||r.Qa.has(s)||(oe(wd,"New document in limbo: "+t),r.Qa.add(s),Ed(r))}function Ed(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new pe(qe.fromString(e)),s=r.za.next();r.Ua.set(s,new AI(t)),r.$a=r.$a.insert(t,s),fv(r.remoteStore,new ei(er(b_(t.path)),s,"TargetPurposeLimboResolution",Yl.ae))}}async function Ba(r,e,t){const s=Ee(r),o=[],u=[],h=[];s.ka.isEmpty()||(s.ka.forEach((d,g)=>{h.push(s.Ha(g,e,t).then(y=>{var v;if((y||t)&&s.isPrimaryClient){const E=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=hd.Yi(g.targetId,y);u.push(E)}}))}),await Promise.all(h),s.La.p_(o),await async function(g,y){const v=Ee(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>H.forEach(y,I=>H.forEach(I.Hi,N=>v.persistence.referenceDelegate.addReference(E,I.targetId,N)).next(()=>H.forEach(I.Ji,N=>v.persistence.referenceDelegate.removeReference(E,I.targetId,N)))))}catch(E){if(!vo(E))throw E;oe(fd,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const N=v.Ts.get(I),F=N.snapshotVersion,$=N.withLastLimboFreeSnapshotVersion(F);v.Ts=v.Ts.insert(I,$)}}}(s.localStore,u))}async function FI(r,e){const t=Ee(r);if(!t.currentUser.isEqual(e)){oe(wd,"User change. New user:",e.toKey());const s=await uv(t.localStore,e);t.currentUser=e,function(u,h){u.Ga.forEach(d=>{d.forEach(g=>{g.reject(new le(q.CANCELLED,h))})}),u.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ba(t,s.Rs)}}function UI(r,e){const t=Ee(r),s=t.Ua.get(e);if(s&&s.Ba)return ke().add(s.key);{let o=ke();const u=t.qa.get(e);if(!u)return o;for(const h of u){const d=t.ka.get(h);o=o.unionWith(d.view.Sa)}return o}}function Cv(r){const e=Ee(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ev.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OI.bind(null,e),e.La.p_=EI.bind(null,e.eventManager),e.La.Ja=TI.bind(null,e.eventManager),e}function zI(r){const e=Ee(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LI.bind(null,e),e}class zl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return jS(this.persistence,new FS,e.initialUser,this.serializer)}Xa(e){return new av(cd.ri,this.serializer)}Za(e){return new GS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zl.provider={build:()=>new zl};class jI extends zl{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Fe(this.persistence.referenceDelegate instanceof Fl);const s=this.persistence.referenceDelegate.garbageCollector;return new SS(s,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new av(s=>Fl.ri(s,t),this.serializer)}}class $f{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>cy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=FI.bind(null,this.syncEngine),await gI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _I}()}createDatastore(e){const t=sc(e.databaseInfo.databaseId),s=function(u){return new JS(u)}(e.databaseInfo);return function(u,h,d,g){return new rI(u,h,d,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,u,h,d){return new sI(s,o,u,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>cy(this.syncEngine,t,0),function(){return iy.D()?new iy:new QS}())}createSyncEngine(e,t){return function(o,u,h,d,g,y,v){const E=new kI(o,u,h,d,g,y);return v&&(E.ja=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const u=Ee(o);oe(Zi,"RemoteStore shutting down."),u.W_.add(5),await ja(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}$f.provider={build:()=>new $f};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="FirestoreClient";class $I{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Mt.UNAUTHENTICATED,this.clientId=y_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{oe(fi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(oe(fi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=_d(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function sf(r,e){r.asyncQueue.verifyOperationInProgress(),oe(fi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await uv(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function fy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await WI(r);oe(fi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>oy(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>oy(e.remoteStore,o)),r._onlineComponents=e}async function WI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe(fi,"Using user provided OfflineComponentProvider");try{await sf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===q.FAILED_PRECONDITION||o.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;uo("Error using user provided cache. Falling back to memory cache: "+t),await sf(r,new zl)}}else oe(fi,"Using default OfflineComponentProvider"),await sf(r,new jI(void 0));return r._offlineComponents}async function Av(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe(fi,"Using user provided OnlineComponentProvider"),await fy(r,r._uninitializedComponentsProvider._online)):(oe(fi,"Using default OnlineComponentProvider"),await fy(r,new $f))),r._onlineComponents}function HI(r){return Av(r).then(e=>e.syncEngine)}async function KI(r){const e=await Av(r),t=e.eventManager;return t.onListen=RI.bind(null,e.syncEngine),t.onUnlisten=NI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DI.bind(null,e.syncEngine),t}function qI(r,e,t={}){const s=new ii;return r.asyncQueue.enqueueAndForget(async()=>function(u,h,d,g,y){const v=new BI({next:I=>{v.su(),h.enqueueAndForget(()=>wI(u,E)),I.fromCache&&g.source==="server"?y.reject(new le(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new SI(d,v,{includeMetadataChanges:!0,Ta:!0});return vI(u,E)}(await KI(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(r,e,t){if(!t)throw new le(q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function GI(r,e,t,s){if(e===!0&&s===!0)throw new le(q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function py(r){if(!pe.isDocumentKey(r))throw new le(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function my(r){if(pe.isDocumentKey(r))throw new le(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function uc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":_e()}function jl(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uc(r);throw new le(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="firestore.googleapis.com",gy=!0;class yy{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new le(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pv,this.ssl=gy}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gy;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ov;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ES)throw new le(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kv((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new le(q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new le(q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new le(q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yy(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new e1;switch(s.type){case"firstParty":return new i1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=dy.get(t);s&&(oe("ComponentProvider","Removing Datastore"),dy.delete(t),s.terminate())}(this),Promise.resolve()}}function QI(r,e,t,s={}){var o;const u=(r=jl(r,lc))._getSettings(),h=`${e}:${t}`;if(u.host!==Pv&&u.host!==h&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let d,g;if(typeof s.mockUserToken=="string")d=s.mockUserToken,g=Mt.MOCK_USER;else{d=V0(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new le(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Mt(y)}r._authCredentials=new t1(new g_(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class En{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class si extends Eo{constructor(e,t,s){super(e,t,b_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new pe(e))}withConverter(e){return new si(this.firestore,e,this._path)}}function XI(r,e,...t){if(r=ao(r),Rv("collection","path",e),r instanceof lc){const s=qe.fromString(e,...t);return my(s),new si(r,null,s)}{if(!(r instanceof En||r instanceof si))throw new le(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(qe.fromString(e,...t));return my(s),new si(r.firestore,null,s)}}function YI(r,e,...t){if(r=ao(r),arguments.length===1&&(e=y_.newId()),Rv("doc","path",e),r instanceof lc){const s=qe.fromString(e,...t);return py(s),new En(r,null,new pe(s))}{if(!(r instanceof En||r instanceof si))throw new le(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(qe.fromString(e,...t));return py(s),new En(r.firestore,r instanceof si?r.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="AsyncQueue";class vy{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new cv(this,"async_queue_retry"),this.Su=()=>{const s=rf();s&&oe(_y,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const t=rf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=rf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new ii;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!vo(e))throw e;oe(_y,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(s);throw Ar("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=t,t}enqueueAfterDelay(e,t,s){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=yd.createAndSchedule(this,e,t,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&_e()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Td extends lc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new vy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vy(e),this._firestoreClient=void 0,await e}}}function ZI(r,e){const t=typeof r=="object"?r:$T(),s=typeof r=="string"?r:Nl,o=FT(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=N0("firestore");u&&QI(o,...u)}return o}function xv(r){if(r._terminated)throw new le(q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||JI(r),r._firestoreClient}function JI(r){var e,t,s;const o=r._freezeSettings(),u=function(d,g,y,v){return new _1(d,g,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,kv(v.experimentalLongPollingOptions),v.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new $I(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(Pt.fromBase64String(e))}catch(t){throw new le(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mo(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=/^__.*__$/;class tC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ua(e,this.data,t,this.fieldTransforms)}}function Dv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Ad{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Ad(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Bl(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Dv(this.Lu)&&eC.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class nC{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||sc(e)}ju(e,t,s,o=!1){return new Ad({Lu:e,methodName:t,zu:s,path:Rt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vv(r){const e=r._freezeSettings(),t=sc(r._databaseId);return new nC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function rC(r,e,t,s,o,u={}){const h=r.ju(u.merge||u.mergeFields?2:0,e,t,o);Lv("Data must be an object, but it was:",h,s);const d=Ov(s,h);let g,y;if(u.merge)g=new Fn(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const v=[];for(const E of u.mergeFields){const I=sC(e,E,t);if(!h.contains(I))throw new le(q.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);aC(v,I)||v.push(I)}g=new Fn(v),y=h.fieldTransforms.filter(E=>g.covers(E.field))}else g=null,y=h.fieldTransforms;return new tC(new wn(d),g,y)}function iC(r,e,t,s=!1){return kd(t,r.ju(s?4:3,e))}function kd(r,e){if(bv(r=ao(r)))return Lv("Unsupported field value:",e,r),Ov(r,e);if(r instanceof Nv)return function(s,o){if(!Dv(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let h=0;for(const d of s){let g=kd(d,o.Ku(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=ao(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return z1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=dt.fromDate(s);return{timestampValue:Ml(o.serializer,u)}}if(s instanceof dt){const u=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ml(o.serializer,u)}}if(s instanceof Id)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mo)return{bytesValue:J_(o.serializer,s._byteString)};if(s instanceof En){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ud(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Cd)return function(h,d){return{mapValue:{fields:{[C_]:{stringValue:k_},[Dl]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw d.Wu("VectorValues must only contain numeric values.");return sd(d.serializer,y)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${uc(s)}`)}(r,e)}function Ov(r,e){const t={};return v_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(r,(s,o)=>{const u=kd(o,e.qu(s));u!=null&&(t[s]=u)}),{mapValue:{fields:t}}}function bv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof Id||r instanceof mo||r instanceof En||r instanceof Nv||r instanceof Cd)}function Lv(r,e,t){if(!bv(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=uc(t);throw s==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+s)}}function sC(r,e,t){if((e=ao(e))instanceof Sd)return e._internalPath;if(typeof e=="string")return Mv(r,e);throw Bl("Field path arguments must be of type string or ",r,!1,void 0,t)}const oC=new RegExp("[~\\*/\\[\\]]");function Mv(r,e,t){if(e.search(oC)>=0)throw Bl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch{throw Bl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Bl(r,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new le(q.INVALID_ARGUMENT,d+r+g)}function aC(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uC extends Fv{data(){return super.data()}}function Rd(r,e){return typeof e=="string"?Mv(r,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pd{}class cC extends Pd{}function hC(r,e,...t){let s=[];e instanceof Pd&&s.push(e),s=s.concat(t),function(u){const h=u.filter(g=>g instanceof xd).length,d=u.filter(g=>g instanceof cc).length;if(h>1||h>0&&d>0)throw new le(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class cc extends cC{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new cc(e,t,s)}_apply(e){const t=this._parse(e);return Uv(e._query,t),new Eo(e.firestore,e.converter,Vf(e._query,t))}_parse(e){const t=Vv(e.firestore);return function(u,h,d,g,y,v,E){let I;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new le(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Ey(E,v);const F=[];for(const $ of E)F.push(wy(g,u,$));I={arrayValue:{values:F}}}else I=wy(g,u,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Ey(E,v),I=iC(d,h,E,v==="in"||v==="not-in");return at.create(y,v,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function fC(r,e,t){const s=e,o=Rd("where",r);return cc._create(o,s,t)}class xd extends Pd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xd(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let h=o;const d=u.getFlattenedFilters();for(const g of d)Uv(h,g),h=Vf(h,g)}(e._query,t),new Eo(e.firestore,e.converter,Vf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function wy(r,e,t){if(typeof(t=ao(t))=="string"){if(t==="")throw new le(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L_(e)&&t.indexOf("/")!==-1)throw new le(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(qe.fromString(t));if(!pe.isDocumentKey(s))throw new le(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Lg(r,new pe(s))}if(t instanceof En)return Lg(r,t._key);throw new le(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uc(t)}.`)}function Ey(r,e){if(!Array.isArray(r)||r.length===0)throw new le(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Uv(r,e){const t=function(o,u){for(const h of o)for(const d of h.getFlattenedFilters())if(u.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new le(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dC{convertValue(e,t="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ji(e,(o,u)=>{s[o]=this.convertValue(u,t)}),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Dl].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>rt(h.doubleValue));return new Cd(u)}convertGeoPoint(e){return new Id(rt(e.latitude),rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Jl(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){const t=ui(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=qe.fromString(e);Fe(sv(s));const o=new Va(s.get(1),s.get(3)),u=new pe(s.popFirst(5));return o.isEqual(t)||Ar(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mC extends Fv{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Rd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class wl extends mC{data(e={}){return super.data(e)}}class gC{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new dl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new wl(this._firestore,this._userDataWriter,s.key,s,new dl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const g=new wl(o._firestore,o._userDataWriter,d.doc.key,d.doc,new dl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>u||d.type!==3).map(d=>{const g=new wl(o._firestore,o._userDataWriter,d.doc.key,d.doc,new dl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return d.type!==0&&(y=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),v=h.indexOf(d.doc.key)),{type:yC(d.type),doc:g,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}class _C extends dC{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function vC(r){r=jl(r,Eo);const e=jl(r.firestore,Td),t=xv(e),s=new _C(e);return lC(r._query),qI(t,r._query).then(o=>new gC(e,s,r,o))}function wC(r,e){const t=jl(r.firestore,Td),s=YI(r),o=pC(r.converter,e);return EC(t,[rC(Vv(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Sr.exists(!1))]).then(()=>s)}function EC(r,e){return function(s,o){const u=new ii;return s.asyncQueue.enqueueAndForget(async()=>VI(await HI(s),o,u)),u.promise}(xv(r),e)}(function(e,t=!0){(function(o){yo=o})(BT),Pl(new Pa("firestore",(s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),d=new Td(new n1(s.getProvider("auth-internal")),new s1(h,s.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new le(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(y.options.projectId,v)}(h,o),h);return u=Object.assign({useFetchStreams:t},u),d._setSettings(u),d},"PUBLIC").setMultipleInstances(!0)),io(Cg,Ag,e),io(Cg,Ag,"esm2017")})();var TC="firebase",SC="11.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */io(TC,SC,"app");const IC={apiKey:"AIzaSyDEwBtG6xPy7DjCidFqk-nNxeWNrHqV3qQ",authDomain:"my-last-todo.firebaseapp.com",projectId:"my-last-todo",storageBucket:"my-last-todo.firebasestorage.app",messagingSenderId:"885214813453",appId:"1:885214813453:web:1501069d7f1d7e9473e444"},CC=a_(IC),AC=ZI(CC),zv=XI(AC,"todos");var Wf=function(r,e){return Wf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},Wf(r,e)};function kC(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wf(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var wt=function(){return wt=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},wt.apply(this,arguments)};function RC(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Xs(r,e,t,s){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function d(v){try{y(s.next(v))}catch(E){h(E)}}function g(v){try{y(s.throw(v))}catch(E){h(E)}}function y(v){v.done?u(v.value):o(v.value).then(d,g)}y((s=s.apply(r,[])).next())})}function Ys(r,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,o,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=d(0),h.throw=d(1),h.return=d(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function d(y){return function(v){return g([y,v])}}function g(y){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(t=0)),t;)try{if(s=1,o&&(u=y[0]&2?o.return:y[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,y[1])).done)return u;switch(o=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,o=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){t.label=y[1];break}if(y[0]===6&&t.label<u[1]){t.label=u[1],u=y;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(y);break}u[2]&&t.ops.pop(),t.trys.pop();continue}y=e.call(r,t)}catch(v){y=[6,v],o=0}finally{s=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function Zn(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]])}return t}var Ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Dd(r,e){return r(e={exports:{}},e.exports),e.exports}var Hi=Dd(function(r,e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function s(){var o=this;this.locked=new Map,this.addToLocked=function(u,h){var d=o.locked.get(u);d===void 0?h===void 0?o.locked.set(u,[]):o.locked.set(u,[h]):h!==void 0&&(d.unshift(h),o.locked.set(u,d))},this.isLocked=function(u){return o.locked.has(u)},this.lock=function(u){return new Promise(function(h,d){o.isLocked(u)?o.addToLocked(u,h):(o.addToLocked(u),h())})},this.unlock=function(u){var h=o.locked.get(u);if(h!==void 0&&h.length!==0){var d=h.pop();o.locked.set(u,h),d!==void 0&&setTimeout(d,0)}else o.locked.delete(u)}}return s.getInstance=function(){return s.instance===void 0&&(s.instance=new s),s.instance},s}();e.default=function(){return t.getInstance()}});Nd(Hi);var PC=Nd(Dd(function(r,e){var t=Ki&&Ki.__awaiter||function(v,E,I,N){return new(I||(I=Promise))(function(F,$){function M(G){try{ee(N.next(G))}catch(W){$(W)}}function Z(G){try{ee(N.throw(G))}catch(W){$(W)}}function ee(G){G.done?F(G.value):new I(function(W){W(G.value)}).then(M,Z)}ee((N=N.apply(v,E||[])).next())})},s=Ki&&Ki.__generator||function(v,E){var I,N,F,$,M={label:0,sent:function(){if(1&F[0])throw F[1];return F[1]},trys:[],ops:[]};return $={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function Z(ee){return function(G){return function(W){if(I)throw new TypeError("Generator is already executing.");for(;M;)try{if(I=1,N&&(F=2&W[0]?N.return:W[0]?N.throw||((F=N.return)&&F.call(N),0):N.next)&&!(F=F.call(N,W[1])).done)return F;switch(N=0,F&&(W=[2&W[0],F.value]),W[0]){case 0:case 1:F=W;break;case 4:return M.label++,{value:W[1],done:!1};case 5:M.label++,N=W[1],W=[0];continue;case 7:W=M.ops.pop(),M.trys.pop();continue;default:if(F=M.trys,!((F=F.length>0&&F[F.length-1])||W[0]!==6&&W[0]!==2)){M=0;continue}if(W[0]===3&&(!F||W[1]>F[0]&&W[1]<F[3])){M.label=W[1];break}if(W[0]===6&&M.label<F[1]){M.label=F[1],F=W;break}if(F&&M.label<F[2]){M.label=F[2],M.ops.push(W);break}F[2]&&M.ops.pop(),M.trys.pop();continue}W=E.call(v,M)}catch(ce){W=[6,ce],N=0}finally{I=F=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([ee,G])}}},o=Ki;Object.defineProperty(e,"__esModule",{value:!0});var u="browser-tabs-lock-key",h={key:function(v){return t(o,void 0,void 0,function(){return s(this,function(E){throw new Error("Unsupported")})})},getItem:function(v){return t(o,void 0,void 0,function(){return s(this,function(E){throw new Error("Unsupported")})})},clear:function(){return t(o,void 0,void 0,function(){return s(this,function(v){return[2,window.localStorage.clear()]})})},removeItem:function(v){return t(o,void 0,void 0,function(){return s(this,function(E){throw new Error("Unsupported")})})},setItem:function(v,E){return t(o,void 0,void 0,function(){return s(this,function(I){throw new Error("Unsupported")})})},keySync:function(v){return window.localStorage.key(v)},getItemSync:function(v){return window.localStorage.getItem(v)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(v){return window.localStorage.removeItem(v)},setItemSync:function(v,E){return window.localStorage.setItem(v,E)}};function d(v){return new Promise(function(E){return setTimeout(E,v)})}function g(v){for(var E="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",I="",N=0;N<v;N++)I+=E[Math.floor(Math.random()*E.length)];return I}var y=function(){function v(E){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+g(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=E,v.waiters===void 0&&(v.waiters=[])}return v.prototype.acquireLock=function(E,I){return I===void 0&&(I=5e3),t(this,void 0,void 0,function(){var N,F,$,M,Z,ee,G;return s(this,function(W){switch(W.label){case 0:N=Date.now()+g(4),F=Date.now()+I,$=u+"-"+E,M=this.storageHandler===void 0?h:this.storageHandler,W.label=1;case 1:return Date.now()<F?[4,d(30)]:[3,8];case 2:return W.sent(),M.getItemSync($)!==null?[3,5]:(Z=this.id+"-"+E+"-"+N,[4,d(Math.floor(25*Math.random()))]);case 3:return W.sent(),M.setItemSync($,JSON.stringify({id:this.id,iat:N,timeoutKey:Z,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,d(30)];case 4:return W.sent(),(ee=M.getItemSync($))!==null&&(G=JSON.parse(ee)).id===this.id&&G.iat===N?(this.acquiredIatSet.add(N),this.refreshLockWhileAcquired($,N),[2,!0]):[3,7];case 5:return v.lockCorrector(this.storageHandler===void 0?h:this.storageHandler),[4,this.waitForSomethingToChange(F)];case 6:W.sent(),W.label=7;case 7:return N=Date.now()+g(4),[3,1];case 8:return[2,!1]}})})},v.prototype.refreshLockWhileAcquired=function(E,I){return t(this,void 0,void 0,function(){var N=this;return s(this,function(F){return setTimeout(function(){return t(N,void 0,void 0,function(){var $,M,Z;return s(this,function(ee){switch(ee.label){case 0:return[4,Hi.default().lock(I)];case 1:return ee.sent(),this.acquiredIatSet.has(I)?($=this.storageHandler===void 0?h:this.storageHandler,(M=$.getItemSync(E))===null?(Hi.default().unlock(I),[2]):((Z=JSON.parse(M)).timeRefreshed=Date.now(),$.setItemSync(E,JSON.stringify(Z)),Hi.default().unlock(I),this.refreshLockWhileAcquired(E,I),[2])):(Hi.default().unlock(I),[2])}})})},1e3),[2]})})},v.prototype.waitForSomethingToChange=function(E){return t(this,void 0,void 0,function(){return s(this,function(I){switch(I.label){case 0:return[4,new Promise(function(N){var F=!1,$=Date.now(),M=!1;function Z(){if(M||(window.removeEventListener("storage",Z),v.removeFromWaiting(Z),clearTimeout(ee),M=!0),!F){F=!0;var G=50-(Date.now()-$);G>0?setTimeout(N,G):N(null)}}window.addEventListener("storage",Z),v.addToWaiting(Z);var ee=setTimeout(Z,Math.max(0,E-Date.now()))})];case 1:return I.sent(),[2]}})})},v.addToWaiting=function(E){this.removeFromWaiting(E),v.waiters!==void 0&&v.waiters.push(E)},v.removeFromWaiting=function(E){v.waiters!==void 0&&(v.waiters=v.waiters.filter(function(I){return I!==E}))},v.notifyWaiters=function(){v.waiters!==void 0&&v.waiters.slice().forEach(function(E){return E()})},v.prototype.releaseLock=function(E){return t(this,void 0,void 0,function(){return s(this,function(I){switch(I.label){case 0:return[4,this.releaseLock__private__(E)];case 1:return[2,I.sent()]}})})},v.prototype.releaseLock__private__=function(E){return t(this,void 0,void 0,function(){var I,N,F,$;return s(this,function(M){switch(M.label){case 0:return I=this.storageHandler===void 0?h:this.storageHandler,N=u+"-"+E,(F=I.getItemSync(N))===null?[2]:($=JSON.parse(F)).id!==this.id?[3,2]:[4,Hi.default().lock($.iat)];case 1:M.sent(),this.acquiredIatSet.delete($.iat),I.removeItemSync(N),Hi.default().unlock($.iat),v.notifyWaiters(),M.label=2;case 2:return[2]}})})},v.lockCorrector=function(E){for(var I=Date.now()-5e3,N=E,F=[],$=0;;){var M=N.keySync($);if(M===null)break;F.push(M),$++}for(var Z=!1,ee=0;ee<F.length;ee++){var G=F[ee];if(G.includes(u)){var W=N.getItemSync(G);if(W!==null){var ce=JSON.parse(W);(ce.timeRefreshed===void 0&&ce.timeAcquired<I||ce.timeRefreshed!==void 0&&ce.timeRefreshed<I)&&(N.removeItemSync(G),Z=!0)}}}Z&&v.notifyWaiters()},v.waiters=void 0,v}();e.default=y}));const xC={timeoutInSeconds:60},jv={name:"auth0-spa-js",version:"2.1.3"},Bv=()=>Date.now();class Ft extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,Ft.prototype)}static fromPayload({error:e,error_description:t}){return new Ft(e,t)}}class Vd extends Ft{constructor(e,t,s,o=null){super(e,t),this.state=s,this.appState=o,Object.setPrototypeOf(this,Vd.prototype)}}class Ma extends Ft{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,Ma.prototype)}}class Od extends Ma{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,Od.prototype)}}class bd extends Ft{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,bd.prototype)}}class Ld extends Ft{constructor(e,t,s){super(e,t),this.mfa_token=s,Object.setPrototypeOf(this,Ld.prototype)}}class hc extends Ft{constructor(e,t){super("missing_refresh_token",`Missing Refresh Token (audience: '${Ty(e,["default"])}', scope: '${Ty(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,hc.prototype)}}function Ty(r,e=[]){return r&&!e.includes(r)?r:""}const El=()=>window.crypto,of=()=>{const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(El().getRandomValues(new Uint8Array(43))).forEach(t=>e+=r[t%r.length]),e},Sy=r=>btoa(r),Hf=r=>{var{clientId:e}=r,t=Zn(r,["clientId"]);return new URLSearchParams((s=>Object.keys(s).filter(o=>s[o]!==void 0).reduce((o,u)=>Object.assign(Object.assign({},o),{[u]:s[u]}),{}))(Object.assign({client_id:e},t))).toString()},Iy=r=>(e=>decodeURIComponent(atob(e).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")))(r.replace(/_/g,"/").replace(/-/g,"+")),NC=async(r,e)=>{const t=await fetch(r,e);return{ok:t.ok,json:await t.json()}},DC=async(r,e,t)=>{const s=new AbortController;let o;return e.signal=s.signal,Promise.race([NC(r,e),new Promise((u,h)=>{o=setTimeout(()=>{s.abort(),h(new Error("Timeout when executing 'fetch'"))},t)})]).finally(()=>{clearTimeout(o)})},VC=async(r,e,t,s,o,u,h)=>{return d={auth:{audience:e,scope:t},timeout:o,fetchUrl:r,fetchOptions:s,useFormData:h},g=u,new Promise(function(y,v){const E=new MessageChannel;E.port1.onmessage=function(I){I.data.error?v(new Error(I.data.error)):y(I.data),E.port1.close()},g.postMessage(d,[E.port2])});var d,g},OC=async(r,e,t,s,o,u,h=1e4)=>o?VC(r,e,t,s,h,o,u):DC(r,s,h);async function bC(r,e){var{baseUrl:t,timeout:s,audience:o,scope:u,auth0Client:h,useFormData:d}=r,g=Zn(r,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const y=d?Hf(g):JSON.stringify(g);return await async function(v,E,I,N,F,$,M){let Z,ee=null;for(let S=0;S<3;S++)try{Z=await OC(v,I,N,F,$,M,E),ee=null;break}catch(A){ee=A}if(ee)throw ee;const G=Z.json,{error:W,error_description:ce}=G,ne=Zn(G,["error","error_description"]),{ok:R}=Z;if(!R){const S=ce||`HTTP error. Unable to fetch ${v}`;throw W==="mfa_required"?new Ld(W,S,ne.mfa_token):W==="missing_refresh_token"?new hc(I,N):new Ft(W||"request_error",S)}return ne}(`${t}/oauth/token`,s,o||"default",u,{method:"POST",body:y,headers:{"Content-Type":d?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(h||jv))}},e,d)}const pl=(...r)=>{return(e=r.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};class Jn{constructor(e,t="@@auth0spajs@@",s){this.prefix=t,this.suffix=s,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[t,s,o,u]=e.split("::");return new Jn({clientId:s,scope:u,audience:o},t)}static fromCacheEntry(e){const{scope:t,audience:s,client_id:o}=e;return new Jn({scope:t,audience:s,clientId:o})}}class LC{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){const t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}}class $v{constructor(){this.enclosedCache=function(){let e={};return{set(t,s){e[t]=s},get(t){const s=e[t];if(s)return s},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}}class MC{constructor(e,t,s){this.cache=e,this.keyManifest=t,this.nowProvider=s||Bv}async setIdToken(e,t,s){var o;const u=this.getIdTokenCacheKey(e);await this.cache.set(u,{id_token:t,decodedToken:s}),await((o=this.keyManifest)===null||o===void 0?void 0:o.add(u))}async getIdToken(e){const t=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){const s=await this.get(e);return!s||!s.id_token||!s.decodedToken?void 0:{id_token:s.id_token,decodedToken:s.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}}async get(e,t=0){var s;let o=await this.cache.get(e.toKey());if(!o){const d=await this.getCacheKeys();if(!d)return;const g=this.matchExistingCacheKey(e,d);g&&(o=await this.cache.get(g))}if(!o)return;const u=await this.nowProvider(),h=Math.floor(u/1e3);return o.expiresAt-t<h?o.body.refresh_token?(o.body={refresh_token:o.body.refresh_token},await this.cache.set(e.toKey(),o),o.body):(await this.cache.remove(e.toKey()),void await((s=this.keyManifest)===null||s===void 0?void 0:s.remove(e.toKey()))):o.body}async set(e){var t;const s=new Jn({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(s.toKey(),o),await((t=this.keyManifest)===null||t===void 0?void 0:t.add(s.toKey()))}async clear(e){var t;const s=await this.getCacheKeys();s&&(await s.filter(o=>!e||o.includes(e)).reduce(async(o,u)=>{await o,await this.cache.remove(u)},Promise.resolve()),await((t=this.keyManifest)===null||t===void 0?void 0:t.clear()))}async wrapCacheEntry(e){const t=await this.nowProvider();return{body:e,expiresAt:Math.floor(t/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new Jn({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,t){return t.filter(s=>{var o;const u=Jn.fromKey(s),h=new Set(u.scope&&u.scope.split(" ")),d=((o=e.scope)===null||o===void 0?void 0:o.split(" "))||[],g=u.scope&&d.reduce((y,v)=>y&&h.has(v),!0);return u.prefix==="@@auth0spajs@@"&&u.clientId===e.clientId&&u.audience===e.audience&&g})[0]}}class FC{constructor(e,t,s){this.storage=e,this.clientId=t,this.cookieDomain=s,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const ya=r=>typeof r=="number",UC=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],zC=r=>{if(!r.id_token)throw new Error("ID token is required but missing");const e=(u=>{const h=u.split("."),[d,g,y]=h;if(h.length!==3||!d||!g||!y)throw new Error("ID token could not be decoded");const v=JSON.parse(Iy(g)),E={__raw:u},I={};return Object.keys(v).forEach(N=>{E[N]=v[N],UC.includes(N)||(I[N]=v[N])}),{encoded:{header:d,payload:g,signature:y},header:JSON.parse(Iy(d)),claims:E,user:I}})(r.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==r.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${r.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(r.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${r.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==r.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${r.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==r.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${r.aud}" but found "${e.claims.aud}"`);if(r.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==r.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${r.nonce}", found "${e.claims.nonce}"`)}if(r.max_age&&!ya(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!ya(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!ya(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const t=r.leeway||60,s=new Date(r.now||Date.now()),o=new Date(0);if(o.setUTCSeconds(e.claims.exp+t),s>o)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${s}) is after expiration time (${o})`);if(e.claims.nbf!=null&&ya(e.claims.nbf)){const u=new Date(0);if(u.setUTCSeconds(e.claims.nbf-t),s<u)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${s}) is before ${u}`)}if(e.claims.auth_time!=null&&ya(e.claims.auth_time)){const u=new Date(0);if(u.setUTCSeconds(parseInt(e.claims.auth_time)+r.max_age+t),s>u)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${s}) is after last auth at ${u}`)}if(r.organization){const u=r.organization.trim();if(u.startsWith("org_")){const h=u;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(h!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${h}", found "${e.claims.org_id}"`)}else{const h=u.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(h!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${h}", found "${e.claims.org_name}"`)}}return e};var Gi=Dd(function(r,e){var t=Ki&&Ki.__assign||function(){return t=Object.assign||function(g){for(var y,v=1,E=arguments.length;v<E;v++)for(var I in y=arguments[v])Object.prototype.hasOwnProperty.call(y,I)&&(g[I]=y[I]);return g},t.apply(this,arguments)};function s(g,y){if(!y)return"";var v="; "+g;return y===!0?v:v+"="+y}function o(g,y,v){return encodeURIComponent(g).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(y).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(E){if(typeof E.expires=="number"){var I=new Date;I.setMilliseconds(I.getMilliseconds()+864e5*E.expires),E.expires=I}return s("Expires",E.expires?E.expires.toUTCString():"")+s("Domain",E.domain)+s("Path",E.path)+s("Secure",E.secure)+s("SameSite",E.sameSite)}(v)}function u(g){for(var y={},v=g?g.split("; "):[],E=/(%[\dA-F]{2})+/gi,I=0;I<v.length;I++){var N=v[I].split("="),F=N.slice(1).join("=");F.charAt(0)==='"'&&(F=F.slice(1,-1));try{y[N[0].replace(E,decodeURIComponent)]=F.replace(E,decodeURIComponent)}catch{}}return y}function h(){return u(document.cookie)}function d(g,y,v){document.cookie=o(g,y,t({path:"/"},v))}e.__esModule=!0,e.encode=o,e.parse=u,e.getAll=h,e.get=function(g){return h()[g]},e.set=d,e.remove=function(g,y){d(g,"",t(t({},y),{expires:-1}))}});Nd(Gi),Gi.encode,Gi.parse,Gi.getAll;var jC=Gi.get,Wv=Gi.set,Hv=Gi.remove;const ro={get(r){const e=jC(r);if(e!==void 0)return JSON.parse(e)},save(r,e,t){let s={};window.location.protocol==="https:"&&(s={secure:!0,sameSite:"none"}),t!=null&&t.daysUntilExpire&&(s.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(s.domain=t.cookieDomain),Wv(r,JSON.stringify(e),s)},remove(r,e){let t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),Hv(r,t)}},BC={get(r){return ro.get(r)||ro.get(`_legacy_${r}`)},save(r,e,t){let s={};window.location.protocol==="https:"&&(s={secure:!0}),t!=null&&t.daysUntilExpire&&(s.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(s.domain=t.cookieDomain),Wv(`_legacy_${r}`,JSON.stringify(e),s),ro.save(r,e,t)},remove(r,e){let t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),Hv(r,t),ro.remove(r,e),ro.remove(`_legacy_${r}`,e)}},$C={get(r){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(r);return e!=null?JSON.parse(e):void 0},save(r,e){sessionStorage.setItem(r,JSON.stringify(e))},remove(r){sessionStorage.removeItem(r)}};function WC(r,e,t){var s=e===void 0?null:e,o=function(g,y){var v=atob(g);if(y){for(var E=new Uint8Array(v.length),I=0,N=v.length;I<N;++I)E[I]=v.charCodeAt(I);return String.fromCharCode.apply(null,new Uint16Array(E.buffer))}return v}(r,t!==void 0&&t),u=o.indexOf(`
`,10)+1,h=o.substring(u)+(s?"//# sourceMappingURL="+s:""),d=new Blob([h],{type:"application/javascript"});return URL.createObjectURL(d)}var Cy,Ay,ky,af,HC=(Cy="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",Ay=null,ky=!1,function(r){return af=af||WC(Cy,Ay,ky),new Worker(af,r)});const uf={};class KC{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var t;const s=new Set(((t=await this.cache.get(this.manifestKey))===null||t===void 0?void 0:t.keys)||[]);s.add(e),await this.cache.set(this.manifestKey,{keys:[...s]})}async remove(e){const t=await this.cache.get(this.manifestKey);if(t){const s=new Set(t.keys);return s.delete(e),s.size>0?await this.cache.set(this.manifestKey,{keys:[...s]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const qC={memory:()=>new $v().enclosedCache,localstorage:()=>new LC},Ry=r=>qC[r],Py=r=>{const{openUrl:e,onRedirect:t}=r,s=Zn(r,["openUrl","onRedirect"]);return Object.assign(Object.assign({},s),{openUrl:e===!1||e?e:t})},lf=new PC;class GC{constructor(e){let t,s;if(this.userCache=new $v().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await lf.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!El())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(El().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)s=e.cache;else{if(t=e.cacheLocation||"memory",!Ry(t))throw new Error(`Invalid cache location "${t}"`);s=Ry(t)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?ro:BC,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(h=>`auth0.${h}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:$C;var u;this.scope=pl("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new FC(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||Bv,this.cacheManager=new MC(s,s.allKeys?void 0:new KC(s,this.options.clientId),this.nowProvider),this.domainUrl=(u=this.options.domain,/^https?:\/\//.test(u)?u:`https://${u}`),this.tokenIssuer=((h,d)=>h?h.startsWith("https://")?h:`https://${h}/`:`${d}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&t==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new HC)}_url(e){const t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||jv)));return`${this.domainUrl}${e}&auth0Client=${t}`}_authorizeUrl(e){return this._url(`/authorize?${Hf(e)}`)}async _verifyIdToken(e,t,s){const o=await this.nowProvider();return zC({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:s,leeway:this.options.leeway,max_age:(u=this.options.authorizationParams.max_age,typeof u!="string"?u:parseInt(u,10)||void 0),now:o});var u}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,t,s){const o=Sy(of()),u=Sy(of()),h=of(),d=(v=>{const E=new Uint8Array(v);return(I=>{const N={"+":"-","/":"_","=":""};return I.replace(/[+/=]/g,F=>N[F])})(window.btoa(String.fromCharCode(...Array.from(E))))})(await(async v=>await El().subtle.digest({name:"SHA-256"},new TextEncoder().encode(v)))(h)),g=((v,E,I,N,F,$,M,Z)=>Object.assign(Object.assign(Object.assign({client_id:v.clientId},v.authorizationParams),I),{scope:pl(E,I.scope),response_type:"code",response_mode:Z||"query",state:N,nonce:F,redirect_uri:M||v.authorizationParams.redirect_uri,code_challenge:$,code_challenge_method:"S256"}))(this.options,this.scope,e,o,u,d,e.redirect_uri||this.options.authorizationParams.redirect_uri||s,t==null?void 0:t.response_mode),y=this._authorizeUrl(g);return{nonce:u,code_verifier:h,scope:g.scope,audience:g.audience||"default",redirect_uri:g.redirect_uri,state:o,url:y}}async loginWithPopup(e,t){var s;if(e=e||{},!(t=t||{}).popup&&(t.popup=(d=>{const g=window.screenX+(window.innerWidth-400)/2,y=window.screenY+(window.innerHeight-600)/2;return window.open(d,"auth0:authorize:popup",`left=${g},top=${y},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);t.popup.location.href=o.url;const u=await(d=>new Promise((g,y)=>{let v;const E=setInterval(()=>{d.popup&&d.popup.closed&&(clearInterval(E),clearTimeout(I),window.removeEventListener("message",v,!1),y(new bd(d.popup)))},1e3),I=setTimeout(()=>{clearInterval(E),y(new Od(d.popup)),window.removeEventListener("message",v,!1)},1e3*(d.timeoutInSeconds||60));v=function(N){if(N.data&&N.data.type==="authorization_response"){if(clearTimeout(I),clearInterval(E),window.removeEventListener("message",v,!1),d.popup.close(),N.data.response.error)return y(Ft.fromPayload(N.data.response));g(N.data.response)}},window.addEventListener("message",v)}))(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==u.state)throw new Ft("state_mismatch","Invalid state");const h=((s=e.authorizationParams)===null||s===void 0?void 0:s.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:u.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:h})}async getUser(){var e;const t=await this._getIdTokenFromCache();return(e=t==null?void 0:t.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const t=await this._getIdTokenFromCache();return(e=t==null?void 0:t.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var t;const s=Py(e),{openUrl:o,fragment:u,appState:h}=s,d=Zn(s,["openUrl","fragment","appState"]),g=((t=d.authorizationParams)===null||t===void 0?void 0:t.organization)||this.options.authorizationParams.organization,y=await this._prepareAuthorizeUrl(d.authorizationParams||{}),{url:v}=y,E=Zn(y,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},E),{appState:h}),g&&{organization:g}));const I=u?`${v}#${u}`:v;o?await o(I):window.location.assign(I)}async handleRedirectCallback(e=window.location.href){const t=e.split("?").slice(1);if(t.length===0)throw new Error("There are no query params available for parsing.");const{state:s,code:o,error:u,error_description:h}=(E=>{E.indexOf("#")>-1&&(E=E.substring(0,E.indexOf("#")));const I=new URLSearchParams(E);return{state:I.get("state"),code:I.get("code")||void 0,error:I.get("error")||void 0,error_description:I.get("error_description")||void 0}})(t.join("")),d=this.transactionManager.get();if(!d)throw new Ft("missing_transaction","Invalid state");if(this.transactionManager.remove(),u)throw new Vd(u,h||u,s,d.appState);if(!d.code_verifier||d.state&&d.state!==s)throw new Ft("state_mismatch","Invalid state");const g=d.organization,y=d.nonce,v=d.redirect_uri;return await this._requestToken(Object.assign({audience:d.audience,scope:d.scope,code_verifier:d.code_verifier,grant_type:"authorization_code",code:o},v?{redirect_uri:v}:{}),{nonceIn:y,organization:g}),{appState:d.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var t;const s=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:pl(this.scope,(t=e.authorizationParams)===null||t===void 0?void 0:t.scope)})}),o=await((u,h)=>{let d=uf[h];return d||(d=u().finally(()=>{delete uf[h],d=null}),uf[h]=d),d})(()=>this._getTokenSilently(s),`${this.options.clientId}::${s.authorizationParams.audience}::${s.authorizationParams.scope}`);return e.detailedResponse?o:o==null?void 0:o.access_token}async _getTokenSilently(e){const{cacheMode:t}=e,s=Zn(e,["cacheMode"]);if(t!=="off"){const o=await this._getEntryFromCache({scope:s.authorizationParams.scope,audience:s.authorizationParams.audience||"default",clientId:this.options.clientId});if(o)return o}if(t!=="cache-only"){if(!await(async(o,u=3)=>{for(let h=0;h<u;h++)if(await o())return!0;return!1})(()=>lf.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new Ma;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),t!=="off"){const y=await this._getEntryFromCache({scope:s.authorizationParams.scope,audience:s.authorizationParams.audience||"default",clientId:this.options.clientId});if(y)return y}const o=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(s):await this._getTokenFromIFrame(s),{id_token:u,access_token:h,oauthTokenScope:d,expires_in:g}=o;return Object.assign(Object.assign({id_token:u,access_token:h},d?{scope:d}:null),{expires_in:g})}finally{await lf.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},t={}){var s;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:pl(this.scope,(s=e.authorizationParams)===null||s===void 0?void 0:s.scope)})});return t=Object.assign(Object.assign({},xC),t),await this.loginWithPopup(o,t),(await this.cacheManager.get(new Jn({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const t=e.logoutParams||{},{federated:s}=t,o=Zn(t,["federated"]),u=s?"&federated":"";return this._url(`/v2/logout?${Hf(Object.assign({clientId:e.clientId},o))}`)+u}async logout(e={}){const t=Py(e),{openUrl:s}=t,o=Zn(t,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const u=this._buildLogoutUrl(o);s?await s(u):s!==!1&&window.location.assign(u)}async _getTokenFromIFrame(e){const t=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),s=this.cookieStorage.get(this.orgHintCookieName);s&&!t.organization&&(t.organization=s);const{url:o,state:u,nonce:h,code_verifier:d,redirect_uri:g,scope:y,audience:v}=await this._prepareAuthorizeUrl(t,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new Ft("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const E=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,I=await((F,$,M=60)=>new Promise((Z,ee)=>{const G=window.document.createElement("iframe");G.setAttribute("width","0"),G.setAttribute("height","0"),G.style.display="none";const W=()=>{window.document.body.contains(G)&&(window.document.body.removeChild(G),window.removeEventListener("message",ce,!1))};let ce;const ne=setTimeout(()=>{ee(new Ma),W()},1e3*M);ce=function(R){if(R.origin!=$||!R.data||R.data.type!=="authorization_response")return;const S=R.source;S&&S.close(),R.data.response.error?ee(Ft.fromPayload(R.data.response)):Z(R.data.response),clearTimeout(ne),window.removeEventListener("message",ce,!1),setTimeout(W,2e3)},window.addEventListener("message",ce,!1),window.document.body.appendChild(G),G.setAttribute("src",F)}))(o,this.domainUrl,E);if(u!==I.state)throw new Ft("state_mismatch","Invalid state");const N=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:d,code:I.code,grant_type:"authorization_code",redirect_uri:g,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:h,organization:t.organization});return Object.assign(Object.assign({},N),{scope:y,oauthTokenScope:N.scope,audience:v})}catch(E){throw E.error==="login_required"&&this.logout({openUrl:!1}),E}}async _getTokenUsingRefreshToken(e){const t=await this.cacheManager.get(new Jn({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(t&&t.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new hc(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const s=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{const u=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:s}),o&&{timeout:o}));return Object.assign(Object.assign({},u),{scope:e.authorizationParams.scope,oauthTokenScope:u.scope,audience:e.authorizationParams.audience||"default"})}catch(u){if((u.message.indexOf("Missing Refresh Token")>-1||u.message&&u.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw u}}async _saveEntryInCache(e){const{id_token:t,decodedToken:s}=e,o=Zn(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:t,decodedToken:s}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(o)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",t=await this.cacheManager.getIdToken(new Jn({clientId:this.options.clientId,audience:e,scope:this.scope})),s=this.userCache.get("@@user@@");return t&&t.id_token===(s==null?void 0:s.id_token)?s:(this.userCache.set("@@user@@",t),t)}async _getEntryFromCache({scope:e,audience:t,clientId:s}){const o=await this.cacheManager.get(new Jn({scope:e,audience:t,clientId:s}),60);if(o&&o.access_token){const{access_token:u,oauthTokenScope:h,expires_in:d}=o,g=await this._getIdTokenFromCache();return g&&Object.assign(Object.assign({id_token:g.id_token,access_token:u},h?{scope:h}:null),{expires_in:d})}}async _requestToken(e,t){const{nonceIn:s,organization:o}=t||{},u=await bC(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),h=await this._verifyIdToken(u.id_token,s,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},u),{decodedToken:h,scope:e.scope,audience:e.audience||"default"}),u.scope?{oauthTokenScope:u.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||h.claims.org_id),Object.assign(Object.assign({},u),{decodedToken:h})}}var Kv={isAuthenticated:!1,isLoading:!0},Er=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},QC=wt(wt({},Kv),{buildAuthorizeUrl:Er,buildLogoutUrl:Er,getAccessTokenSilently:Er,getAccessTokenWithPopup:Er,getIdTokenClaims:Er,loginWithRedirect:Er,loginWithPopup:Er,logout:Er,handleRedirectCallback:Er}),qv=Pe.createContext(QC),xy=function(r){kC(e,r);function e(t,s){var o=r.call(this,s||t)||this;return o.error=t,o.error_description=s,Object.setPrototypeOf(o,e.prototype),o}return e}(Error),XC=/[?&]code=[^&]+/,YC=/[?&]state=[^&]+/,ZC=/[?&]error=[^&]+/,JC=function(r){return r===void 0&&(r=window.location.search),(XC.test(r)||ZC.test(r))&&YC.test(r)},Gv=function(r){return function(e){return e instanceof Error?e:e!==null&&typeof e=="object"&&"error"in e&&typeof e.error=="string"?"error_description"in e&&typeof e.error_description=="string"?new xy(e.error,e.error_description):new xy(e.error):new Error(r)}},Ny=Gv("Login failed"),cf=Gv("Get access token failed"),Qv=function(r){var e;r!=null&&r.redirectUri&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),r.authorizationParams=r.authorizationParams||{},r.authorizationParams.redirect_uri=r.redirectUri,delete r.redirectUri),!((e=r==null?void 0:r.authorizationParams)===null||e===void 0)&&e.redirectUri&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),r.authorizationParams.redirect_uri=r.authorizationParams.redirectUri,delete r.authorizationParams.redirectUri)},eA=function(r,e){switch(e.type){case"LOGIN_POPUP_STARTED":return wt(wt({},r),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return wt(wt({},r),{isAuthenticated:!!e.user,user:e.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return r.user===e.user?r:wt(wt({},r),{isAuthenticated:!!e.user,user:e.user});case"LOGOUT":return wt(wt({},r),{isAuthenticated:!1,user:void 0});case"ERROR":return wt(wt({},r),{isLoading:!1,error:e.error})}},tA=function(r){return Qv(r),wt(wt({},r),{auth0Client:{name:"auth0-react",version:"2.3.0"}})},nA=function(r){window.history.replaceState({},document.title,(r==null?void 0:r.returnTo)||window.location.pathname)},rA=function(r){var e=r.children,t=r.skipRedirectCallback,s=r.onRedirectCallback,o=s===void 0?nA:s,u=r.context,h=u===void 0?qv:u,d=RC(r,["children","skipRedirectCallback","onRedirectCallback","context"]),g=Pe.useState(function(){return new GC(tA(d))})[0],y=Pe.useReducer(eA,Kv),v=y[0],E=y[1],I=Pe.useRef(!1),N=Pe.useCallback(function(ne){return E({type:"ERROR",error:ne}),ne},[]);Pe.useEffect(function(){I.current||(I.current=!0,function(){return Xs(void 0,void 0,void 0,function(){var ne,R,S;return Ys(this,function(A){switch(A.label){case 0:return A.trys.push([0,7,,8]),ne=void 0,JC()&&!t?[4,g.handleRedirectCallback()]:[3,3];case 1:return R=A.sent().appState,[4,g.getUser()];case 2:return ne=A.sent(),o(R,ne),[3,6];case 3:return[4,g.checkSession()];case 4:return A.sent(),[4,g.getUser()];case 5:ne=A.sent(),A.label=6;case 6:return E({type:"INITIALISED",user:ne}),[3,8];case 7:return S=A.sent(),N(Ny(S)),[3,8];case 8:return[2]}})})}())},[g,o,t,N]);var F=Pe.useCallback(function(ne){return Qv(ne),g.loginWithRedirect(ne)},[g]),$=Pe.useCallback(function(ne,R){return Xs(void 0,void 0,void 0,function(){var S,A;return Ys(this,function(P){switch(P.label){case 0:E({type:"LOGIN_POPUP_STARTED"}),P.label=1;case 1:return P.trys.push([1,3,,4]),[4,g.loginWithPopup(ne,R)];case 2:return P.sent(),[3,4];case 3:return S=P.sent(),N(Ny(S)),[2];case 4:return[4,g.getUser()];case 5:return A=P.sent(),E({type:"LOGIN_POPUP_COMPLETE",user:A}),[2]}})})},[g]),M=Pe.useCallback(function(ne){return ne===void 0&&(ne={}),Xs(void 0,void 0,void 0,function(){return Ys(this,function(R){switch(R.label){case 0:return[4,g.logout(ne)];case 1:return R.sent(),(ne.openUrl||ne.openUrl===!1)&&E({type:"LOGOUT"}),[2]}})})},[g]),Z=Pe.useCallback(function(ne){return Xs(void 0,void 0,void 0,function(){var R,S,A,P;return Ys(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,3,5]),[4,g.getTokenSilently(ne)];case 1:return R=D.sent(),[3,5];case 2:throw S=D.sent(),cf(S);case 3:return A=E,P={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,g.getUser()];case 4:return A.apply(void 0,[(P.user=D.sent(),P)]),[7];case 5:return[2,R]}})})},[g]),ee=Pe.useCallback(function(ne,R){return Xs(void 0,void 0,void 0,function(){var S,A,P,D;return Ys(this,function(O){switch(O.label){case 0:return O.trys.push([0,2,3,5]),[4,g.getTokenWithPopup(ne,R)];case 1:return S=O.sent(),[3,5];case 2:throw A=O.sent(),cf(A);case 3:return P=E,D={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,g.getUser()];case 4:return P.apply(void 0,[(D.user=O.sent(),D)]),[7];case 5:return[2,S]}})})},[g]),G=Pe.useCallback(function(){return g.getIdTokenClaims()},[g]),W=Pe.useCallback(function(ne){return Xs(void 0,void 0,void 0,function(){var R,S,A;return Ys(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,3,5]),[4,g.handleRedirectCallback(ne)];case 1:return[2,P.sent()];case 2:throw R=P.sent(),cf(R);case 3:return S=E,A={type:"HANDLE_REDIRECT_COMPLETE"},[4,g.getUser()];case 4:return S.apply(void 0,[(A.user=P.sent(),A)]),[7];case 5:return[2]}})})},[g]),ce=Pe.useMemo(function(){return wt(wt({},v),{getAccessTokenSilently:Z,getAccessTokenWithPopup:ee,getIdTokenClaims:G,loginWithRedirect:F,loginWithPopup:$,logout:M,handleRedirectCallback:W})},[v,Z,ee,G,F,$,M,W]);return Wt.createElement(h.Provider,{value:ce},e)},Md=function(r){return r===void 0&&(r=qv),Pe.useContext(r)};function iA(){const r=qf(),[e,t]=Pe.useState(""),[s,o]=Pe.useState(!1),{user:u,isAuthenticated:h}=Md(),d=async()=>{if(e.trim().length===0){alert("Todo cannot be empty");return}const g={id:Math.floor(Math.random()*99999999),content:e};r(f0(g)),h&&u&&await wC(zv,{...g,userId:u.sub}),t(""),o(!1)};return Se.jsxs("div",{className:"todo-create",children:[Se.jsx("button",{className:"todo-create-button",onClick:()=>o(!0),children:"Create"}),Se.jsx(Xl,{in:s,timeout:500,classNames:"fade",unmountOnExit:!0,children:Se.jsx("input",{value:e,onChange:g=>t(g.target.value),className:"todo-input",type:"text",placeholder:"Create Todo..."})}),s&&Se.jsx("button",{className:"todo-create-button",onClick:d,children:"Submit"})]})}var Xv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Dy=Wt.createContext&&Wt.createContext(Xv),sA=["attr","size","title"];function oA(r,e){if(r==null)return{};var t=aA(r,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function aA(r,e){if(r==null)return{};var t={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;t[s]=r[s]}return t}function $l(){return $l=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},$l.apply(this,arguments)}function Vy(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function Wl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vy(Object(t),!0).forEach(function(s){uA(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vy(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function uA(r,e,t){return e=lA(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lA(r){var e=cA(r,"string");return typeof e=="symbol"?e:e+""}function cA(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Yv(r){return r&&r.map((e,t)=>Wt.createElement(e.tag,Wl({key:t},e.attr),Yv(e.child)))}function $a(r){return e=>Wt.createElement(hA,$l({attr:Wl({},r.attr)},e),Yv(r.child))}function hA(r){var e=t=>{var{attr:s,size:o,title:u}=r,h=oA(r,sA),d=o||t.size||"1em",g;return t.className&&(g=t.className),r.className&&(g=(g?g+" ":"")+r.className),Wt.createElement("svg",$l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,h,{className:g,style:Wl(Wl({color:r.color||t.color},t.style),r.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),u&&Wt.createElement("title",null,u),r.children)};return Dy!==void 0?Wt.createElement(Dy.Consumer,null,t=>e(t)):e(Xv)}function fA(r){return $a({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M346.5 240h-181c-8.8 0-16 6-16 16s7.5 16 16 16h181c8.8 0 16-7.2 16-16s-7.2-16-16-16z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(r)}function dA(r){return $a({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(r)}function pA(r){return $a({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(r)}function mA(r){return $a({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"},child:[]}]})(r)}function gA({todoProps:r}){const{id:e,content:t}=r,s=qf(),[o,u]=Pe.useState(!1),[h,d]=Pe.useState(t),g=()=>{s(d0(Number(e)))},y=()=>{s(p0({id:e,content:h})),u(!1)};return Se.jsxs("div",{className:"todo",children:[Se.jsx("div",{children:o?Se.jsx("input",{type:"text",className:"todo-input",onChange:v=>d(v.target.value)}):Se.jsx("div",{children:t})}),Se.jsxs("div",{children:[Se.jsx(fA,{className:"icons",onClick:g}),o?Se.jsx(dA,{className:"icons",onClick:y}):Se.jsx(mA,{className:"icons",onClick:()=>u(!0)})]})]})}function yA(){const r=qf(),{todos:e}=kE(o=>o.todo),{user:t,isAuthenticated:s}=Md();return Pe.useEffect(()=>{(async()=>{if(s&&t){const u=t.sub,h=hC(zv,fC("userId","==",u)),g=(await vC(h)).docs.map(y=>({id:y.id,...y.data()}));console.log("Remove me after test! User Todos from DB:",g),r(m0(g))}})()},[r,s,t]),Se.jsx("div",{className:"todo-responsive",children:e&&e.map(o=>Se.jsx(Xl,{timeout:500,classNames:"fade",children:Se.jsx(gA,{todoProps:o},o.id)},o.id))})}function _A(r){return $a({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Light"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12,18.09A6.09,6.09,0,1,1,18.09,12,6.1,6.1,0,0,1,12,18.09ZM12,6.91A5.09,5.09,0,1,0,17.09,12,5.1,5.1,0,0,0,12,6.91Z"},child:[]},{tag:"path",attr:{d:"M11.5,2.568v1.6a.5.5,0,1,0,1,0v-1.6a.5.5,0,1,0-1,0Z"},child:[]},{tag:"path",attr:{d:"M12.5,21.432v-1.6a.5.5,0,0,0-1,0v1.6a.5.5,0,1,0,1,0Z"},child:[]},{tag:"path",attr:{d:"M21.432,11.5h-1.6a.5.5,0,0,0,0,1h1.6a.5.5,0,1,0,0-1Z"},child:[]},{tag:"path",attr:{d:"M2.568,12.5h1.6a.5.5,0,1,0,0-1h-1.6a.5.5,0,1,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M18.316,4.977l-.992.992-.141.141a.514.514,0,0,0-.146.353.508.508,0,0,0,.146.354.5.5,0,0,0,.354.146.515.515,0,0,0,.353-.146l.992-.992.141-.141a.515.515,0,0,0,.147-.354.508.508,0,0,0-.147-.353.5.5,0,0,0-.353-.147.522.522,0,0,0-.354.147Z"},child:[]},{tag:"path",attr:{d:"M5.684,19.023l.992-.992.141-.141a.514.514,0,0,0,.146-.353.508.508,0,0,0-.146-.354.5.5,0,0,0-.354-.146.515.515,0,0,0-.353.146l-.992.992-.141.141a.515.515,0,0,0-.147.354.508.508,0,0,0,.147.353.5.5,0,0,0,.353.147.522.522,0,0,0,.354-.147Z"},child:[]},{tag:"path",attr:{d:"M19.023,18.316l-.992-.992-.141-.141a.514.514,0,0,0-.353-.146.508.508,0,0,0-.354.146.5.5,0,0,0-.146.354.515.515,0,0,0,.146.353l.992.992.141.141a.515.515,0,0,0,.354.147.508.508,0,0,0,.353-.147.5.5,0,0,0,.147-.353.522.522,0,0,0-.147-.354Z"},child:[]},{tag:"path",attr:{d:"M4.977,5.684l.992.992.141.141a.514.514,0,0,0,.353.146.508.508,0,0,0,.354-.146.5.5,0,0,0,.146-.354.515.515,0,0,0-.146-.353l-.992-.992-.141-.141A.515.515,0,0,0,5.33,4.83a.508.508,0,0,0-.353.147.5.5,0,0,0-.147.353.522.522,0,0,0,.147.354Z"},child:[]}]}]}]})(r)}const vA=()=>{const{user:r,isAuthenticated:e,isLoading:t,loginWithRedirect:s,logout:o}=Md(),[u,h]=Pe.useState(!1);if(t)return Se.jsx("div",{children:"Loading ..."});const d=()=>{const g=document.getElementById("root");g&&(g.classList.toggle("dark-mode"),g.style.backgroundColor=u?"white":"black",g.style.color=u?"black":"white",h(!u))};return Se.jsxs("div",{className:"auth-container",children:[Se.jsxs("div",{className:"theme-toggle",children:[u?Se.jsx(_A,{className:"icon",onClick:d}):Se.jsx(pA,{className:"icon",onClick:d}),Se.jsx("span",{className:"theme-toggle-text",children:u?"Dark Mode":"Light Mode"})]}),Se.jsx("div",{className:"auth-buttons",children:e?Se.jsxs(Se.Fragment,{children:[Se.jsxs("div",{className:"user-info",children:[Se.jsx("img",{src:r==null?void 0:r.picture,alt:r==null?void 0:r.name,className:"user-image"}),Se.jsxs("div",{className:"user-details",children:[Se.jsx("h2",{className:"user-name",children:r==null?void 0:r.name}),Se.jsx("p",{className:"user-email",children:r==null?void 0:r.email})]})]}),Se.jsx("button",{className:"auth-button logged-in",onClick:()=>o({logoutParams:{returnTo:window.location.origin}}),children:"Log Out"})]}):Se.jsx("button",{className:"auth-button",onClick:()=>s(),children:"Log In"})})]})};function wA(){return Se.jsxs("div",{children:[Se.jsx(vA,{}),Se.jsx(iA,{}),Se.jsx(yA,{})]})}const EA=ZE({reducer:{todo:g0}});aE.createRoot(document.getElementById("root")).render(Se.jsx(rA,{domain:"dev-gg4q1n6iysfjqaru.us.auth0.com",clientId:"opZr0Gu3hieNd1xsTws9UVZAsWgVqkfN",authorizationParams:{redirect_uri:window.location.origin},children:Se.jsx(TE,{store:EA,children:Se.jsx(wA,{})})}));
